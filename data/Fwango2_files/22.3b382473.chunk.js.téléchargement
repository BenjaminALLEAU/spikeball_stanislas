(this["webpackJsonp@fwango/client"]=this["webpackJsonp@fwango/client"]||[]).push([[22],{1009:function(e,t,n){"use strict";var a,r=n(598).default,i=n(1082).default,o=n(601).default,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,d=Object.prototype.hasOwnProperty,u=function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})},m={};u(m,{Errors:function(){return R},Money:function(){return k},TournamentMatch:function(){return M},Utils:function(){return L},isMatchPlayed:function(){return p},playerKOTC:function(){return b},teamPoolPlay:function(){return f}}),e.exports=(a=m,function(e,t,n,a){if(t&&"object"===typeof t||"function"===typeof t){var r,i=o(l(t));try{var u=function(){var i=r.value;d.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(a=c(t,i))||a.enumerable})};for(i.s();!(r=i.n()).done;)u()}catch(m){i.e(m)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),a));var b={};u(b,{buildStatisticsFromMatches:function(){return j},emptyStatistics:function(){return g},getTeamStatisticsFromMatch:function(){return h}});var p=function(e){return!!e.winner||!!(1===e.numberOfGames&&e.games.length>0&&e.games[0]&&e.games[0].team1Score&&e.games[0].team1Score===e.games[0].team2Score)},g={wins:0,losses:0,draws:0,pf:0,pa:0,gf:0,ga:0,court:0,seed:0},j=function(e){var t,n={},a=o(e);try{for(a.s();!(t=a.n()).done;){var r=t.value,i=r.courtNumber,s=r.team1,c=r.team2;if(s&&c&&2===s.leaguePlayers.length&&2===c.leaguePlayers.length){var l=0,d=0,u=0,m=0,b=0;if(r.games){var j,h=!1,f=o(r.games);try{for(f.s();!(j=f.n()).done;){var O=j.value;!O.team1Score&&0!==O.team1Score||!O.team2Score&&0!==O.team2Score||(h=!0,l+=O.team1Score,d+=O.team2Score,u+=O.team1Score>O.team2Score?1:0,m+=O.team1Score<O.team2Score?1:0)}}catch(P){f.e(P)}finally{f.f()}b=h&&1===r.numberOfGames&&l===d?1:0}for(var x=0,y=[0,1];x<y.length;x++){var v=y[x],w=n[s.leaguePlayers[v]||""]||g;n[s.leaguePlayers[v]||""]={wins:w.wins+(1===r.winner?1:0),losses:w.losses+(2===r.winner?1:0),draws:w.draws+b,pf:w.pf+l,pa:w.pa+d,gf:w.gf+u,ga:w.ga+m,court:w.court+(p(r)?i:0)}}for(var S=0,T=[0,1];S<T.length;S++){var N=T[S],C=n[c.leaguePlayers[N]||""]||g;n[c.leaguePlayers[N]||""]={wins:C.wins+(2===r.winner?1:0),losses:C.losses+(1===r.winner?1:0),draws:C.draws+b,pf:C.pf+d,pa:C.pa+l,gf:C.gf+m,ga:C.ga+u,court:C.court+(p(r)?i:0)}}}}}catch(P){a.e(P)}finally{a.f()}return n},h=function(e,t){var n=1===t?"team1Score":"team2Score",a=1===t?"team2Score":"team1Score";if(!e.games||0===e.games.length||!e.team1||!e.team2)return g;var r,i=0,s=0,c=0,l=0,d=o(e.games);try{for(d.s();!(r=d.n()).done;){var u=r.value;!u.team1Score&&0!==u.team1Score||!u.team2Score&&0!==u.team2Score||(i+=u[n]||0,s+=u[a]||0,c+=(u[n]||0)>(u[a]||0)?1:0,l+=(u[n]||0)<(u[a]||0)?1:0)}}catch(b){d.e(b)}finally{d.f()}var m=1===e.numberOfGames&&i===s;return{wins:e.winner===t?1:0,losses:e.winner===3-t?1:0,draws:m?1:0,pf:i,pa:s,gf:c,ga:l,court:e.winner||m?e.courtNumber:0}},f={};u(f,{buildStatisticsFromMatches:function(){return x},emptyStatistics:function(){return O},getTeamStatisticsFromMatch:function(){return y}});var O={wins:0,losses:0,draws:0,pf:0,pa:0,gf:0,ga:0,pool:0,seed:0},x=function(e){var t,n={},a=o(e);try{for(a.s();!(t=a.n()).done;){var r=t.value,i=r.poolNumber;if(r.team1&&r.team2&&r.team1.leagueTeamID&&r.team2.leagueTeamID){var s=0,c=0,l=0,d=0,u=0;if(r.games){var m,b=!1,g=o(r.games);try{for(g.s();!(m=g.n()).done;){var j=m.value;!j.team1Score&&0!==j.team1Score||!j.team2Score&&0!==j.team2Score||(b=!0,s+=j.team1Score,c+=j.team2Score,l+=j.team1Score>j.team2Score?1:0,d+=j.team1Score<j.team2Score?1:0)}}catch(x){g.e(x)}finally{g.f()}u=b&&1===r.numberOfGames&&s===c?1:0}var h=n[r.team1.leagueTeamID]||O;n[r.team1.leagueTeamID]={wins:h.wins+(1===r.winner?1:0),losses:h.losses+(2===r.winner?1:0),draws:h.draws+u,pf:h.pf+s,pa:h.pa+c,gf:h.gf+l,ga:h.ga+d,pool:h.pool+(p(r)?i:0)};var f=n[r.team2.leagueTeamID]||O;n[r.team2.leagueTeamID]={wins:f.wins+(2===r.winner?1:0),losses:f.losses+(1===r.winner?1:0),draws:f.draws+u,pf:f.pf+c,pa:f.pa+s,gf:f.gf+d,ga:f.ga+l,pool:f.pool+(p(r)?i:0)}}}}catch(x){a.e(x)}finally{a.f()}return n},y=function(e,t){var n=1===t?"team1Score":"team2Score",a=1===t?"team2Score":"team1Score";if(!e.games||0===e.games.length||!e.team1||!e.team2||!e.team1.leagueTeamID||!e.team2.leagueTeamID)return O;var r,i=0,s=0,c=0,l=0,d=o(e.games);try{for(d.s();!(r=d.n()).done;){var u=r.value;!u.team1Score&&0!==u.team1Score||!u.team2Score&&0!==u.team2Score||(i+=u[n]||0,s+=u[a]||0,c+=(u[n]||0)>(u[a]||0)?1:0,l+=(u[n]||0)<(u[a]||0)?1:0)}}catch(b){d.e(b)}finally{d.f()}var m=1===e.numberOfGames&&i===s;return{wins:e.winner===t?1:0,losses:e.winner===3-t?1:0,draws:m?1:0,pf:i,pa:s,gf:c,ga:l,pool:e.winner||m?e.poolNumber:0}},v={usd:{code:"usd",symbol:"$",decimals:2,minimumCharge:150},eur:{code:"eur",symbol:"\u20ac",decimals:2,minimumCharge:150},cad:{code:"cad",symbol:"$",decimals:2,minimumCharge:150},aud:{code:"aud",symbol:"$",decimals:2,minimumCharge:150},gbp:{code:"gbp",symbol:"\xa3",decimals:2,minimumCharge:150},ron:{code:"ron",symbol:"lei",decimals:2,minimumCharge:650},dkk:{code:"dkk",symbol:"kr.",decimals:2,minimumCharge:1e3},czk:{code:"czk",symbol:"K\u010d",decimals:2,minimumCharge:3500},nok:{code:"nok",symbol:"kr",decimals:2,minimumCharge:1500},pln:{code:"pln",symbol:"z\u0142",decimals:2,minimumCharge:800},sek:{code:"sek",symbol:"kr",decimals:2,minimumCharge:2e3}};var w={};function S(e,t,n){var a=new Intl.NumberFormat("en-us",i({style:"currency",currency:t},n)).format(Math.abs(e/Math.pow(10,v[t].decimals)));return e<0?"(".concat(a,")"):a}function T(e,t,n){if(!n)throw Error("Invalid currency.");var a=n.percentage,r=n.fix,i=0,o=0;return t?(i=0===e?0:Math.round((e-r)/(1+a/100)),o=0===e?0:e-i):(i=e,o=0===e?0:Math.round(e*(a/100)+r)),{total:i+o,costBeforeFees:i,fees:o}}function N(e){var t=e.currency,n=e.transactionFee;return T(v[t].minimumCharge,!0,n).costBeforeFees}u(w,{calculateCosts:function(){return T},formatPrice:function(){return S},getMinimumChargeBeforeFees:function(){return N}});var C={};function P(e){var t=e.tournamentTeam1,n=e.tournamentTeam2,a=I(t),i=I(n),o=r(new Set([].concat(r(a.users),r(i.users)))),s=r(new Set([].concat(r(a.usersInvited),r(i.usersInvited)))).filter((function(e){return!o.includes(e)})),c=[].concat(r(o),r(s));return{users:o,usersInvited:s,usersAll:c}}function I(e){if(!e||"denied"===e.invitationStatus||"cancelled"===e.invitationStatus)return{users:[],usersInvited:[],usersAll:[]};var t=e.team,n=[],a=[];if("id"in t){var i=e.invitation&&"pending"===e.invitationStatus;Object.values(t.players||{}).forEach((function(e){e.uid&&(t.users.includes(e.uid)?i?a.push(e.uid):n.push(e.uid):e.invitation&&"pending"===e.invitationStatus&&a.push(e.uid))}))}n=r(new Set(n)),a=r(new Set(a)).filter((function(e){return!n.includes(e)}));var o=[].concat(r(n),r(a));return{users:n,usersInvited:a,usersAll:o}}function E(e,t){var n=I(e),a=n.users,r=n.usersInvited,i=I(t),o=i.users,s=i.usersInvited,c=!(a.length===o.length&&a.every((function(e){return o.includes(e)}))),l=!(r.length===s.length&&r.every((function(e){return s.includes(e)})));return c||l}function _(e){var t=0,n=0;return e.games?(e.games.forEach((function(e){(e.team1Score&&e.team2Score||e.team1Score&&0===e.team2Score||e.team2Score&&0===e.team1Score)&&(e.team1Score>e.team2Score?t++:e.team1Score<e.team2Score&&n++)})),t>e.numberOfGames/2&&e.team1?1:n>e.numberOfGames/2&&e.team2?2:null):null}u(C,{didTournamentTeamUsersChange:function(){return E},getMatchUsers:function(){return P},getWinnerTeam:function(){return _}});var k=i(i({},w),{},{currencies:v}),R={getErrorMessage:function(e){return function(e){if("object"===typeof(t=e)&&null!==t&&"message"in t&&"string"===typeof t.message)return e;var t;try{return new Error(JSON.stringify(e))}catch(n){return new Error(String(e))}}(e).message},getErrorName:function(e){return function(e){if("object"===typeof(t=e)&&null!==t&&"name"in t&&"string"===typeof t.name)return e;var t;try{return new Error(JSON.stringify(e))}catch(n){return new Error(String(e))}}(e).name}},L={slugify:function(e,t){var n,a="\xe0\xe1\xe2\xe4\xe6\xe3\xe5\u0101\u0103\u0105\xe7\u0107\u010d\u0111\u010f\xe8\xe9\xea\xeb\u0113\u0117\u0119\u011b\u011f\u01f5\u1e27\xee\xef\xed\u012b\u012f\xec\u0142\u1e3f\xf1\u0144\u01f9\u0148\xf4\xf6\xf2\xf3\u0153\xf8\u014d\xf5\u1e55\u0155\u0159\xdf\u015b\u0161\u015f\u0219\u0165\u021b\xfb\xfc\xf9\xfa\u016b\u01d8\u016f\u0171\u0173\u1e83\u1e8d\xff\xfd\u017e\u017a\u017c\xb7/_,:;",r=new RegExp(a.split("").join("|"),"g"),i=(null==t?void 0:t.allowUppercase)?e.toString():e.toString().toLowerCase();return n=i.replace(/\s+/g,"").replace(r,(function(e){return"aaaaaaaaaacccddeeeeeeeegghiiiiiilmnnnnooooooooprrsssssttuuuuuuuuuwxyyzzz------".charAt(a.indexOf(e))})).replace(/&/g,"-and-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,""),(null==t?void 0:t.doNotTrimEnd)?n:n.replace(/-+$/,"")}},M=i({},C)},1010:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(21),r=n(1),i=n(16),o=n(5),s=n(4),c=n(2),l=n.n(c),d=n(962),u=n(1011),m=n(0),b=s.c.div.withConfig({displayName:"MatchGames__Container",componentId:"sc-1dqkm5i-0"})(["flex-shrink:0;display:flex;.team-1-caret{font-size:1.15rem;margin-right:0.25rem;margin-bottom:0.25rem;visibility:",";}.team-2-caret{font-size:1.15rem;margin-right:0.25rem;visibility:",";}"],(function(e){return 1===e.winner?"visible":"hidden"}),(function(e){return 2===e.winner?"visible":"hidden"})),p=l.a.forwardRef((function(e,t){var n=e.match.games,s=Object(c.useState)(n),l=Object(o.a)(s,2),p=l[0],g=l[1],j=Object(c.useState)(n),h=Object(o.a)(j,2),f=h[0],O=h[1];Object(c.useEffect)((function(){n!==p&&(g(n),O(n))}),[n,p]);for(var x=function(e,t,n){var o=1===t?"team1Score":"team2Score",s=1===t?"team2Score":"team1Score",c=Object(i.a)(f);c[e]=Object(r.a)(Object(r.a)({},c[e]),{},Object(a.a)({},o,n?parseInt(n):null)),null===c[e][o]&&null===c[e][s]&&c.splice(e,1),O(c)},y=function(){if(e.canEdit){var t=!0;f.forEach((function(e){(!e.team1Score&&0!==e.team1Score&&e.team2Score||!e.team2Score&&0!==e.team2Score&&e.team1Score)&&(t=!1)}));var n=!1;if(f.some((function(e,t){return(!p[t]||p[t].team1Score!==e.team1Score||p[t].team2Score!==e.team2Score)&&(n=!0,!0)})),n||p.some((function(e,t){return(!f[t]||f[t].team1Score!==e.team1Score||f[t].team2Score!==e.team2Score)&&(n=!0,!0)})),t&&n){var a=d.a[e.match.format].getWinningTeam(Object(r.a)(Object(r.a)({},e.match),{},{games:f}));e.saveScore(e.match,Object(r.a)(Object(r.a)({},e.match),{},{games:f,winner:a}))}}},v=[],w=0;w<e.match.numberOfGames;w++){var S=1===e.match.numberOfGames||0===w&&(!f[w]||!f[w].team1Score||!f[w].team2Score)||(!f[w]||!f[w].team1Score||!f[w].team2Score)&&f[w-1]&&f[w-1].team1Score&&f[w-1].team2Score;v.push(Object(m.jsx)(u.a,{ref:S?t:void 0,matchNumber:e.match.matchNumber,canEdit:e.canEdit,editMode:e.editMode,setEditMode:e.setEditMode,values:f[w],gameIndex:w,handleChange:x,submitScores:y},w))}return Object(m.jsxs)(b,{winner:e.match.winner,children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"team-1-caret",children:Object(m.jsx)("i",{className:"fas fa-caret-right"})}),Object(m.jsx)("div",{className:"team-2-caret",children:Object(m.jsx)("i",{className:"fas fa-caret-right"})})]}),v]})}));t.b=p},1011:function(e,t,n){"use strict";var a,r,i=n(14),o=n(4),s=n(2),c=n.n(s),l=n(198),d=n(9),u=n(0),m=o.c.form.withConfig({displayName:"MatchGame__Container",componentId:"sc-1asd8lj-0"})(["> div:first-child{margin-bottom:0.25rem;}"]),b=Object(o.c)(l.b).withConfig({displayName:"MatchGame__StyledInput",componentId:"sc-1asd8lj-1"})(["font-size:",";line-height:",";margin-left:",";height:calc(1rem * 1.5 + 0.2rem);width:",";border-radius:0.5rem;padding:0.1rem 0.25rem;text-align:center;background:",";font-weight:",";&::selection{background:",";}user-select:",";&::-webkit-inner-spin-button,&::-webkit-outer-spin-button{-webkit-appearance:none;margin:0;}-moz-appearance:textfield;&:focus{font-weight:400 !important;}&:disabled{color:inherit;}"," ",""],(function(e){return e.editMode?"1rem":"1.15rem"}),(function(e){return e.editMode?1.15*1.5:1.5}),(function(e){return e.editMode?"0.25rem":"0"}),(function(e){var t=e.editMode,n=e.digits;return t?n>2?"2.75rem":"2.25rem":n>2?"2.5rem":"2rem"}),(function(e){var t=e.editMode,n=e.canEdit,a=e.theme;return t&&n?a.colors.lightgray:" transparent"}),(function(e){return e.bold?700:400}),(function(e){return e.editMode?"rgba("+e.theme.colors.primary+", 0.3)":"transparent"}),(function(e){return e.editMode?"auto":"none"}),d.b.greaterThan("md")(a||(a=Object(i.a)(["\n    padding: 0.1rem 0.5rem;\n    width: ",";\n  "])),(function(e){return e.digits>2?"3rem":"2.5rem"})),d.b.between("lg","xl")(r||(r=Object(i.a)(["\n    padding: 0.1rem 0.25rem;\n    width: ",";\n  "])),(function(e){return e.digits>2?"2.75rem":"2.25rem"}))),p=c.a.forwardRef((function(e,t){var n=e.values,a=n&&n.team1Score&&n.team2Score?n.team1Score>n.team2Score?n.team1Score.toString().length:n.team2Score.toString().length:0,r=function(t,n){t.target.value&&parseInt(t.target.value)>999||e.handleChange(e.gameIndex,n,t.target.value)},i=function(e){"Enter"===e.key&&e.currentTarget.blur()},o=function(){var t=document.activeElement;t&&t.classList&&t.classList.contains("match-"+e.matchNumber)||e.setEditMode(!1),e.submitScores()},s="undefined"!==typeof InstallTrigger;return Object(u.jsxs)(m,{className:"game",children:[Object(u.jsx)("div",{children:Object(u.jsx)(b,{ref:t,className:"team-1-score match-"+(e.matchNumber||"12345"),disabled:!e.canEdit,canEdit:e.canEdit,editMode:e.editMode,digits:a,bold:!!(n&&n.team1Score&&n.team2Score&&n.team1Score>n.team2Score),type:"number",placeholder:e.editMode?"":"-",value:n&&n.team1Score?n.team1Score:"",onChange:function(e){return r(e,1)},onBlur:function(){s?setTimeout(o,1):o()},onFocus:function(){s?setTimeout((function(){return e.setEditMode(!0)}),1):e.setEditMode(!0)},onClick:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyPress:i})}),Object(u.jsx)("div",{children:Object(u.jsx)(b,{className:"team-2-score match-"+e.matchNumber,disabled:!e.canEdit,canEdit:e.canEdit,editMode:e.editMode,digits:a,bold:!!(n&&n.team1Score&&n.team2Score&&n.team1Score<n.team2Score),type:"number",placeholder:e.editMode?"":"-",value:n&&n.team2Score?n.team2Score:"",onChange:function(e){return r(e,2)},onBlur:function(){s?setTimeout(o,1):o()},onFocus:function(){s?setTimeout((function(){return e.setEditMode(!0)}),1):e.setEditMode(!0)},onClick:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyPress:i})})]})}));t.a=p},1012:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(4),r=n(2),i=n(264),o=n(948),s=n(210),c=n(0),l=a.c.div.withConfig({displayName:"MatchHeader__Container",componentId:"sc-ezv43f-0"})(["flex-shrink:0;position:relative;padding-right:",";margin-top:",";margin-bottom:",";margin-right:",";border-bottom:",";padding-bottom:",";> div{display:flex;}.wrapper{flex-grow:1;line-height:1;visibility:",";display:",";align-items:center;justify-content:space-between;color:",";}.match-number{display:flex;justify-content:center;align-items:center;font-size:",";text-align:",";margin-bottom:",";}.subtitle{font-size:",";text-align:",';}&:after{content:"";position:absolute;height:2.25rem;width:',";background:",";opacity:0.3;right:0;top:0.375rem;}"],(function(e){return e.editMode?0:"1rem"}),(function(e){return e.editMode?"0.25rem":0}),(function(e){return e.editMode?"0.9rem":0}),(function(e){return e.editMode?"0.2rem":0}),(function(e){var t=e.editMode,n=e.theme;return t?"1px solid "+n.colors.darkblues[8]:0}),(function(e){return e.editMode?"0.6rem":0}),(function(e){return e.loading?"hidden":"visible"}),(function(e){return e.editMode?"flex":"block"}),(function(e){return e.theme.colors.darkblues[4]}),(function(e){return e.editMode?"1.2rem":"1.85rem"}),(function(e){return e.editMode?"left":"center"}),(function(e){return e.editMode?"0rem":"0.25rem"}),(function(e){return e.editMode?"1rem":"0.9rem"}),(function(e){return e.editMode?"left":"center"}),(function(e){return e.editMode?0:"1.2px"}),(function(e){return e.theme.colors.darkblue})),d=a.c.div.withConfig({displayName:"MatchHeader__DropdownContainer",componentId:"sc-ezv43f-1"})(["font-size:1rem;margin-left:0.5rem;.icon{color:",";padding:0rem 0.5rem;cursor:pointer;&:hover{color:",";}}"],(function(e){return e.theme.colors.darkblues[4]}),(function(e){return e.theme.colors.darkblue}));t.b=function(e){var t=Object(r.useContext)(o.b).role,n=e.match,a=e.editMode,u="";"poolNumber"in n?u="Pool "+n.poolNumber:"courtNumber"in n&&(u="Court "+n.courtNumber);var m=t===o.a.admin||t===o.a.moderator,b=[{label:{text:"Delete match",iconClassName:"far fa-trash-alt"},onClick:e.deleteMatch}];return Object(c.jsx)(l,{loading:!!n.saving,editMode:a,children:Object(c.jsx)(i.a,{active:!!n.saving,whiteOverlay:!0,spinnerSize:20,style:{borderRadius:"0.75rem"},children:Object(c.jsxs)("div",{className:"wrapper",children:[Object(c.jsx)("div",{className:"match-number",children:Object(c.jsxs)("div",{children:[a&&"Match #",n.matchNumber]})}),Object(c.jsxs)("div",{style:{display:"flex"},children:[Object(c.jsxs)("div",{className:"subtitle",children:[a&&Object(c.jsxs)("span",{children:["Round ",n.round]}),a&&Object(c.jsx)("span",{children:"\xa0 | \xa0"}),u]}),a&&m&&Object(c.jsx)(d,{children:Object(c.jsx)(s.a,{items:b,placement:"BOTTOM_RIGHT",children:Object(c.jsx)("i",{className:"fas fa-ellipsis-h icon"})})})]})]})})})}},1041:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return f}));var a=n(5),r=n(4),i=n(2),o=n(962),s=n(1010),c=n(60),l=n.n(c),d=n(948),u=n(18),m=(n(98),n(1012)),b=n(262),p=n(0),g=r.c.div.withConfig({displayName:"Match__Container",componentId:"sc-exmma4-0"})(["padding:",";border-radius:0.75rem;background:",";box-shadow:0 3px 6px rgba(0,0,0,0.08);margin-bottom:0.85rem;cursor:",";display:",";align-items:center;transform:",";transition:all 0.2s ease-in-out;z-index:",";position:relative;"],(function(e){return e.editMode?"0.8rem 1.15rem":"0.8rem 1rem"}),(function(e){return e.theme.colors.whites[0]}),(function(e){return e.editMode?"initial":"pointer"}),(function(e){return e.editMode?"block":"flex"}),(function(e){return e.editMode?"scale(1.05)":"none"}),(function(e){return e.editMode?11:"auto"})),j=r.c.div.withConfig({displayName:"Match__MatchBody",componentId:"sc-exmma4-1"})(["display:flex;flex-grow:1;overflow:hidden;"]),h=r.c.span.withConfig({displayName:"Match__Overlay",componentId:"sc-exmma4-2"})(["position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,0.25);z-index:10;"]),f=r.c.div.withConfig({displayName:"Match__TeamContainer",componentId:"sc-exmma4-3"})(["flex-grow:1;padding:",";font-size:1.15rem;overflow:hidden;> div{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;&:first-child{margin-bottom:0.1rem;}}.winner{font-weight:700;}"],(function(e){return e.editMode?"0 1.25rem 0 0":"0 1.25rem"}));t.c=function(e){var t=Object(i.useState)(!1),n=Object(a.a)(t,2),r=n[0],c=n[1],O=Object(i.useContext)(d.b).role,x=Object(i.useRef)(null),y=e.leaguePermissions,v=y.canReportAnyScore,w=y.canReportOwnScore,S=u.a.auth().currentUser,T=S?S.uid:void 0,N=e.match,C=e.leagueTeams,P=e.leaguePlayers,I=o.a[N.format],E=!!T&&I.isOwnGame(T,N,C||{},P||{}),_=!!N.team1&&!!N.team2&&O!==d.a.guest&&(O===d.a.player&&(v||w&&E)||O===d.a.admin||O===d.a.moderator||O===d.a.editor),k=I.getMatchTeam1(N,e.leagueTeams||{},e.leaguePlayers||{}),R=I.getMatchTeam2(N,e.leagueTeams||{},e.leaguePlayers||{}),L=document.getElementById("root");return Object(p.jsxs)(g,{editMode:r,canEdit:_,onClick:function(e){r?e.preventDefault():(c(!0),_&&x&&x.current&&x.current.focus())},onMouseDown:function(e){r&&e.preventDefault()},children:[Object(p.jsx)(m.b,{match:N,editMode:r,deleteMatch:function(){var t=Object(p.jsx)("div",{children:"Are you sure you want to delete this match?"});Object(b.a)(t,{proceedText:"Delete",proceedTheme:"danger"}).then((function(){e.deleteMatch(e.match)}))}}),Object(p.jsxs)(j,{children:[Object(p.jsxs)(f,{editMode:r,children:[Object(p.jsx)("div",{className:1===N.winner?"winner":"",children:k}),Object(p.jsx)("div",{className:2===N.winner?"winner":"",children:R})]}),Object(p.jsx)(s.b,{ref:x,match:N,saveScore:e.saveScore,canEdit:_,editMode:r,setEditMode:c})]}),r&&L&&l.a.createPortal(Object(p.jsx)(h,{onClick:function(e){e.stopPropagation(),c(!1)},onMouseDown:function(e){e.stopPropagation()}}),L)]})}},1065:function(e,t,n){"use strict";function a(e){return function(t){return{type:e,payload:t}}}n.d(t,"a",(function(){return a}))},1127:function(e,t,n){"use strict";function a(e){return function(t){return{type:e,payload:t}}}n.d(t,"a",(function(){return a}))},1175:function(e,t,n){"use strict";var a=n(1),r=n(5),i=n(4),o=n(2),s=n(347),c=n(1048),l=n(77),d=n(0),u=i.c.div.attrs((function(e){return{style:{width:e.width+"px",textAlign:e.isToggled?"left":"right",background:e.theme.colors.lightgray}}})).withConfig({displayName:"Switch__Container",componentId:"sc-1cohve4-0"})(["position:relative;height:36px;pointer-events:auto;transform-origin:50% 50% 0px;box-sizing:border-box;display:grid;align-items:center;border-radius:50rem;box-shadow:0 3px 6px rgba(0,0,0,0.08);user-select:none;.inactive-label{position:absolute;height:100%;top:0;left:",";width:50%;opacity:0.65;cursor:pointer;display:flex;align-items:center;justify-content:center;}.handle{cursor:-webkit-grab;background-color:",";color:",";position:absolute;height:100%;width:50%;display:flex;align-items:center;justify-content:center;border-radius:50rem;box-shadow:0 3px 6px rgba(0,0,0,0.08);font-size:1rem;font-weight:600;transition:box-shadow 0.75s;}.handle:active{cursor:-webkit-grabbing;box-shadow:0px 10px 20px -10px rgba(0,0,0,0.4);}.handle > *{pointer-events:none;}"],(function(e){return e.isToggled?"0.15rem":"calc(50% - 0.15rem)"}),(function(e){return e.theme.colors.whites[0]}),(function(e){return e.theme.colors.darkblue}));t.a=function(e){var t=e.width,n=e.leftLabel,i=e.rightLabel,m=Object(o.useState)(!!e.isOnRight),b=Object(r.a)(m,2),p=b[0],g=b[1],j=Object(o.useState)(!1),h=Object(r.a)(j,2),f=h[0],O=h[1],x=Object(o.useState)(!!e.isOnRight),y=Object(r.a)(x,2),v=y[0],w=y[1],S=Object(s.useSpring)((function(){return{x:p?t/2:0,size:1,immediate:function(e){return!1},config:s.config.gentle}})),T=Object(r.a)(S,2),N=T[0],C=N.x,P=N.size,I=T[1],E=Object(c.b)((function(n){var a=Object(r.a)(n.movement,1)[0];n.down?(O(!0),I({x:p?Object(c.a)(a+t/2,0,t/2,.05):Object(c.a)(a,0,t/2,.05),size:1.1,immediate:function(e){return"x"===e}}),w(p?!(a<t/-4):a>t/4)):g((function(n){var r=n?a<t/-4:a>t/4,i=r?!n:n;return r&&e.onChange&&e.onChange(!n),I({x:i?t/2:0,size:1,immediate:function(){return!1}}),w(i),i}))})),_=Object(l.a)(e.isOnRight);return Object(o.useEffect)((function(){"boolean"===typeof _&&"boolean"===typeof e.isOnRight&&e.isOnRight!==_&&(g(e.isOnRight),I({x:e.isOnRight?t/2:0}),w(e.isOnRight))}),[e.isOnRight,_,I,t]),Object(d.jsxs)(u,{width:t,isToggled:v,onClick:function(){return f?O(!1):g((function(n){return e.onChange&&e.onChange(!n),I({x:n?0:t/2}),w(!n),!n}))},children:[Object(d.jsx)("div",{className:"inactive-label",children:v?n:i}),Object(d.jsx)(s.animated.div,Object(a.a)(Object(a.a)({},E()),{},{className:"handle",style:{transform:Object(s.interpolate)([C,P],(function(e,t){return"translate3d(".concat(e,"px,0,0) scale(").concat(t,")")}))},children:v?i:n}))]})}},1888:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Kr}));var a,r,i,o,s,c,l,d,u,m,b,p,g,j,h,f,O,x,y,v,w,S,T,N,C,P,I,E,_,k,R,L,M,D,A,F,z,G,U,B,q,W,Y,V,H,Q,K,$,J,X,Z=n(1),ee=n(2),te=n.n(ee),ne=n(260),ae=n(5),re=n(7),ie=n(11),oe=n(20),se=n(14),ce=n(4),le=n(79),de=n(78),ue=n(210),me=n(31),be=n(66),pe=n(948),ge=n(18),je=(n(98),n(977)),he=n(9),fe=n(0),Oe=["isExpanded","sidebarWidth"],xe=ce.c.div.withConfig({displayName:"LeagueSideMenu__Container",componentId:"sc-qksi33-0"})(["position:fixed;top:0;left:",";bottom:0;overflow:auto;width:",";display:flex;flex-direction:column;justify-content:space-between;z-index:999;transition:all 0.25s ease;background:",";.logo-container,.user-container{display:flex;margin:1.5rem 0rem;align-items:center;cursor:pointer;.icon-container{display:flex;justify-content:center;width:",";flex-shrink:0;> div{display:flex;}}.label{display:",";overflow:hidden;white-space:nowrap;}}",""],(function(e){return e.isOpen?0:e.isExpanded?-1*e.sidebarExpandedWidth+"px":-1*e.sidebarWidth+"px"}),(function(e){return e.isExpanded?e.sidebarExpandedWidth+"px":e.sidebarWidth+"px"}),(function(e){return e.theme.colors.whites[0]}),(function(e){return e.sidebarWidth+"px"}),(function(e){return e.isExpanded?"block":"none"}),he.b.greaterThan("md")(a||(a=Object(se.a)(["\n    .centered-items {\n      margin-bottom: 36px;\n    }\n  "])))),ye=Object(ce.c)(le.a).withConfig({displayName:"LeagueSideMenu__StyledLogo",componentId:"sc-qksi33-1"})(["width:36px;"]),ve=Object(ce.c)((function(e){e.isExpanded,e.sidebarWidth;var t=Object(oe.a)(e,Oe);return Object(fe.jsx)(me.c,Object(Z.a)({},t))})).withConfig({displayName:"LeagueSideMenu__SideMenuItem",componentId:"sc-qksi33-2"})(["width:100%;display:flex;padding:0.5rem 0;margin:1.5rem 0rem;cursor:pointer;font-size:1.15rem;opacity:0.9;color:inherit;.icon-container{width:",";text-align:center;flex-shrink:0;}.label{display:",";overflow:hidden;white-space:nowrap;margin-left:-0.25rem;}&.active{color:",";}&:hover{text-decoration:none;}&:not(.active):hover{opacity:1;color:inherit;}",""],(function(e){return e.sidebarWidth+"px"}),(function(e){return e.isExpanded?"block":"none"}),(function(e){return e.theme.colors.primary}),he.b.greaterThan("md")(r||(r=Object(se.a)(["\n    margin: 2rem 0;\n  "])))),we=ce.c.div.withConfig({displayName:"LeagueSideMenu__ExpandButton",componentId:"sc-qksi33-3"})(["display:none;width:100%;padding:0.5rem 0rem;cursor:pointer;font-size:1.25rem;opacity:0.4;width:",";&:hover{opacity:1;}",""],(function(e){return e.sidebarWidth+"px"}),he.b.greaterThan("md")(i||(i=Object(se.a)(["\n    display: flex;\n    justify-content: center;\n  "])))),Se=function(e){var t=Object(ee.useContext)(je.a),n=t.width,a=t.expandedWidth,r=Object(ee.useContext)(pe.b).role,i=Object(be.h)(),o=Object(be.k)("")||{url:""},s=function(){var e=Object(ie.a)(Object(re.a)().mark((function e(){return Object(re.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge.a.auth().signOut();case 2:i.push("/signin");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=e.userFromDB?[{label:{text:"Dashboard",iconClassName:"fas fa-columns"},path:"/"},{label:{text:"Sign out",iconClassName:"fas fa-sign-out-alt"},onClick:s}]:[{label:{text:"Sign in",iconClassName:"fas fa-user"},path:"/signin"}],l=function(){e.setIsSidebarExpanded(!1),e.closeSidebar()};return Object(fe.jsxs)(xe,{isOpen:e.isOpen,isExpanded:e.isSidebarExpanded,sidebarWidth:n,sidebarExpandedWidth:a,children:[Object(fe.jsxs)("div",{children:[Object(fe.jsx)("div",{className:"logo-container",children:Object(fe.jsx)("div",{className:"icon-container",children:Object(fe.jsx)(me.b,{to:"/",children:Object(fe.jsx)(ye,{})})})}),Object(fe.jsx)(we,{title:"Expand sidebar",isExpanded:e.isSidebarExpanded,sidebarWidth:n,onClick:function(){return e.setIsSidebarExpanded((function(e){return!e}))},children:e.isSidebarExpanded?Object(fe.jsx)("i",{className:"fas fa-chevron-left icon"}):Object(fe.jsx)("i",{className:"fas fa-chevron-right icon"})})]}),Object(fe.jsxs)("div",{className:"centered-items",children:[Object(fe.jsxs)(ve,{to:o.url,activeClassName:"active",title:"League Home",exact:!0,isExpanded:e.isSidebarExpanded,sidebarWidth:n,onClick:l,children:[Object(fe.jsx)("div",{className:"icon-container",children:Object(fe.jsx)("i",{className:"fas fa-home icon"})}),Object(fe.jsx)("div",{className:"label",children:"League"})]}),(r!==pe.a.guest||e.leaguePermissions.sessionsArePublic)&&Object(fe.jsxs)(ve,{to:"".concat(o.url,"/statistics"),activeClassName:"active",title:"Statistics",isExpanded:e.isSidebarExpanded,sidebarWidth:n,onClick:l,children:[Object(fe.jsx)("div",{className:"icon-container",children:Object(fe.jsx)("i",{className:"far fa-chart-bar icon"})}),Object(fe.jsx)("div",{className:"label",children:"Statistics"})]}),(r===pe.a.admin||r===pe.a.moderator)&&Object(fe.jsxs)(ve,{to:"".concat(o.url,"/setup"),activeClassName:"active",title:"League Setup",isExpanded:e.isSidebarExpanded,sidebarWidth:n,onClick:l,children:[Object(fe.jsx)("div",{className:"icon-container",children:Object(fe.jsx)("i",{className:"far fa-clipboard icon"})}),Object(fe.jsx)("div",{className:"label",children:"Setup"})]}),r===pe.a.admin&&Object(fe.jsxs)(ve,{to:"".concat(o.url,"/admin"),activeClassName:"active",title:"Administration",isExpanded:e.isSidebarExpanded,sidebarWidth:n,onClick:l,children:[Object(fe.jsx)("div",{className:"icon-container",children:Object(fe.jsx)("i",{className:"fas fa-cog icon"})}),Object(fe.jsx)("div",{className:"label",children:"Administration"})]})]}),Object(fe.jsxs)("div",{className:"user-container",onClick:e.isSidebarExpanded?s:function(){},children:[Object(fe.jsx)("div",{className:"icon-container",children:Object(fe.jsx)(ue.a,{items:e.isSidebarExpanded?[]:c,placement:"RIGHT_BOTTOM",fixed:!0,children:Object(fe.jsx)(de.a,{user:e.userFromDB||void 0,size:36})})}),Object(fe.jsx)("div",{className:"label",children:e.userFromDB?"Sign out":"Sign in"})]})]})},Te=ce.c.div.withConfig({displayName:"LeagueTopMenu__Container",componentId:"sc-9yh55w-0"})(["position:fixed;top:0;left:0;right:0;z-index:997;display:flex;justify-content:space-between;align-items:center;background:",";padding:0.75rem 1rem;",""],(function(e){return e.theme.colors.whites[0]}),he.b.greaterThan("md")(o||(o=Object(se.a)(["\n      display: none;\n  "])))),Ne=Object(ce.c)(me.b).withConfig({displayName:"LeagueTopMenu__LogoLink",componentId:"sc-9yh55w-1"})(["width:32px;height:auto;"]),Ce=function(e){return Object(fe.jsxs)(Te,{children:[Object(fe.jsx)("div",{onClick:e.openSidebar,children:Object(fe.jsx)("i",{className:"fas fa-bars"})}),Object(fe.jsx)("div",{children:Object(fe.jsx)(Ne,{to:"/",children:Object(fe.jsx)(le.a,{style:{width:"32px"}})})}),Object(fe.jsx)(de.a,{user:e.userFromDB||void 0,size:30})]})},Pe=function(e){return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(Ce,{userFromDB:e.userFromDB,openSidebar:function(){return e.setIsSidebarOpen(!0)}}),Object(fe.jsx)(Se,{userFromDB:e.userFromDB,leaguePermissions:e.leaguePermissions,isOpen:e.isSidebarOpen||!e.isMobile,isMobile:e.isMobile,closeSidebar:function(){return e.setIsSidebarOpen(!1)},isSidebarExpanded:e.isSidebarExpanded||e.isMobile,setIsSidebarExpanded:e.setIsSidebarExpanded})]})},Ie=n(347),Ee=Object(ce.c)(Ie.animated.div).withConfig({displayName:"ScreenTopMenu__Container",componentId:"sc-gcafvx-0"})(["position:relative;overflow:auto;display:flex;align-items:flex-end;mask-image:linear-gradient(to right,transparent,black 20px,black 90%,transparent);> nav{display:flex;align-items:flex-end;padding-left:1.5rem;padding-right:1.5rem;}",""],he.b.greaterThan("md")(s||(s=Object(se.a)(["\n    padding-left: 3.5rem;\n\n    > nav {\n      justify-content: flex-start;\n    }\n  "])))),_e=Object(ce.c)(me.c).withConfig({displayName:"ScreenTopMenu__MenuItem",componentId:"sc-gcafvx-1"})(["position:relative;display:inline-block;padding-bottom:0.7rem;text-decoration:none;color:inherit;white-space:nowrap;&.active{color:",';font-weight:600;&:after{content:"";position:absolute;bottom:0;left:5%;height:2px;width:90%;background:',';border-radius:5rem;}}&:last-child:before{content:"";display:block;position:absolute;right:-1.5rem;width:1.5rem;height:1px;}&:not(:first-child){margin-left:2.25rem;}&:hover{text-decoration:none;color:',";}",""],(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.primary}),he.b.greaterThan("md")(c||(c=Object(se.a)(["\n    &:not(:first-child) {\n      margin-left: 3.5rem;\n    }\n\n    &:last-child:before {\n      display: none;\n    }\n  "])))),ke={admin:[{label:"League Settings",pathname:"settings"},{label:"Registrations",pathname:"registrations"}]},Re=function(e){var t,n=Object(be.h)();Object.keys(ke).some((function(e){return!!n.location.pathname.includes(e)&&(t=ke[e],!0)}));var a=Object(Ie.useSpring)({height:!t||e.isMobile&&e.isSidebarOpen?0:e.height});return Object(fe.jsx)(Ee,{style:Object(Z.a)({},a),children:Object(fe.jsx)("nav",{children:t&&t.map((function(e){return Object(fe.jsx)(_e,{to:e.pathname,children:e.label},e.pathname)}))})})},Le=n(428),Me=n(213),De=ce.c.h1.withConfig({displayName:"HomeTitle__Title",componentId:"sc-qpk0ld-0"})(["font-size:2rem;margin-bottom:0.75rem;"," "," ",""],he.b.greaterThan("sm")(l||(l=Object(se.a)(["\n    font-size: 2.5rem;\n  "]))),he.b.greaterThan("md")(d||(d=Object(se.a)(["\n     font-size: 3rem;\n  "]))),he.b.greaterThan("xl")(u||(u=Object(se.a)(["\n     font-size: 3rem;\n     margin-bottom: 1.15rem;\n  "])))),Ae=function(e){return Object(fe.jsx)("div",{children:Object(fe.jsx)(De,{children:e.title})})},Fe=ce.c.div.withConfig({displayName:"HomeInfo__Container",componentId:"sc-ne27ok-0"})([".icon{margin-right:0.5rem;}"]),ze=ce.c.span.withConfig({displayName:"HomeInfo__SeeAllDescription",componentId:"sc-ne27ok-1"})(["margin-left:0.5rem;cursor:pointer;text-decoration:underline;.icon{margin-left:0.25rem;}"]),Ge=function(e){var t=Object(ee.useState)(!1),n=Object(ae.a)(t,2),a=n[0],r=n[1];return e.location||e.description?Object(fe.jsx)(Fe,{children:Object(fe.jsxs)("div",{children:[e.description&&Object(fe.jsxs)("p",{style:{whiteSpace:"pre-line"},children:[!a&&e.description.length>400?e.description.substring(0,400)+"...":e.description,Object(fe.jsx)(ze,{onClick:function(){return r(!a)},children:a?Object(fe.jsxs)(fe.Fragment,{children:["See less",Object(fe.jsx)("i",{className:"fas fa-angle-up icon"})]}):Object(fe.jsxs)(fe.Fragment,{children:["See more",Object(fe.jsx)("i",{className:"fas fa-angle-down icon"})]})})]}),e.location&&Object(fe.jsxs)("div",{children:[Object(fe.jsx)("i",{className:"fas fa-map-marker-alt icon"}),e.location.address]})]})}):null},Ue=n(23),Be=n(40),qe=n.n(Be),We=ce.c.div.withConfig({displayName:"HomeRegistrationCard__RegistrationCard",componentId:"sc-1lcgwic-0"})(["background:",";border-radius:1rem;padding:1.85rem 2rem;align-items:center;justify-content:space-between;box-shadow:0 7px 14px rgba(50,50,93,0.1),0 3px 6px rgba(0,0,0,0.08);margin-bottom:1.5rem;margin-top:1.5rem;font-size:1.25rem;"," ",""],(function(e){return e.theme.colors.whites[0]}),he.b.greaterThan("md")(m||(m=Object(se.a)(["\n     display: flex;\n     padding: 1.65rem 2rem;\n     margin-bottom: 1.5rem;\n     margin-top: 1.25rem;\n  "]))),he.b.between("lg","xl")(b||(b=Object(se.a)(["\n     display: block;\n     padding: 1.35rem 2rem;\n  "])))),Ye=ce.c.div.withConfig({displayName:"HomeRegistrationCard__InfoContainer",componentId:"sc-1lcgwic-1"})([""," ",""],he.b.lessThan("md")(p||(p=Object(se.a)(["\n     display: flex;\n     justify-content: center;\n  "]))),he.b.between("lg","xl")(g||(g=Object(se.a)(["\n     display: flex;\n     justify-content: center;\n  "])))),Ve=ce.c.div.withConfig({displayName:"HomeRegistrationCard__Cost",componentId:"sc-1lcgwic-2"})(["display:flex;align-items:flex-start;font-weight:600;.icon{margin-right:1rem;}"]),He=ce.c.div.withConfig({displayName:"HomeRegistrationCard__AvailablePlaces",componentId:"sc-1lcgwic-3"})(["margin-top:0.75rem;.icon{margin-right:1rem;}"]),Qe=ce.c.div.withConfig({displayName:"HomeRegistrationCard__ButtonContainer",componentId:"sc-1lcgwic-4"})(["text-align:center;margin-top:1.5rem;"," ",""],he.b.greaterThan("md")(j||(j=Object(se.a)(["\n     margin-top: 0;\n     padding-right: 1.5rem;\n     margin-bottom: -0.75rem;\n  "]))),he.b.between("lg","xl")(h||(h=Object(se.a)(["\n    text-align: center;\n    margin-top: 1.25rem;\n    margin-bottom: 0rem;\n  "])))),Ke=Object(ce.c)(Ue.a).withConfig({displayName:"HomeRegistrationCard__StyledButton",componentId:"sc-1lcgwic-5"})(["font-weight:600;font-size:1rem;padding:0.75rem 1rem;margin-bottom:0.25rem;",""],he.b.greaterThan("sm")(f||(f=Object(se.a)(["\n    font-size: 1.15rem;\n    padding: 0.75rem 1.5rem;\n  "])))),$e=function(e){return Object(fe.jsx)(Ke,{theme:"primary",disabled:e.disabled,children:e.disabled?"NO PLACES LEFT":e.isLoggedIn?e.onlyTeamRegistration?"REGISTER YOUR TEAM":"REGISTER NOW":"LOGIN AND REGISTER"})},Je=function(e){var t=e.registration,n=t.player,a=t.team,r=qe()(e.registration.closingDate.toDate());if(r.isBefore(qe()()))return null;var i=!n.enabled&&a.enabled?a.limit:n.limit,o=!n.enabled&&a.enabled?a.limit?a.limit-e.teamCount:"Infinity":n.limit?n.limit-e.playerCount:"Infinity",s=r.format("MMM Do 'YY [at] H:mm"),c=a.enabled&&!n.enabled;return Object(fe.jsxs)(We,{children:[Object(fe.jsx)(Ye,{children:Object(fe.jsxs)("div",{children:[Object(fe.jsxs)(Ve,{children:[Object(fe.jsx)("div",{children:Object(fe.jsx)("i",{className:"far fa-credit-card icon"})}),Object(fe.jsxs)("div",{children:[n.enabled&&Object(fe.jsxs)("div",{children:[n.cost.toFixed(2),"$ /player"]}),a.enabled&&Object(fe.jsxs)("div",{children:[a.cost.toFixed(2),"$ /team"]})]})]}),Object(fe.jsxs)(He,{children:[Object(fe.jsx)("i",{className:"fas fa-user-plus icon"}),null!==i?Object(fe.jsxs)("span",{children:[i," spots \u2014 ",o<0?"0":o," left"]}):"Unlimited places"]})]})}),Object(fe.jsxs)(Qe,{children:[o<=0?Object(fe.jsx)($e,{isLoggedIn:!!e.userFromAuth,onlyTeamRegistration:c,disabled:!0}):Object(fe.jsx)(me.b,{to:e.userFromAuth?"/".concat(e.url,"/register"):{pathname:"/signin",search:"?r=/"+e.url+"/register"},children:Object(fe.jsx)($e,{isLoggedIn:!!e.userFromAuth,onlyTeamRegistration:c})}),Object(fe.jsxs)("div",{style:{fontSize:"0.85rem"},children:["Closes on ",s]})]})]})},Xe=n(80),Ze=n(37),et=n(218),tt=n(264),nt=n(212),at=Object(ce.c)(et.a).withConfig({displayName:"CreateSessionModal__StyledLocationField",componentId:"sc-18fxag4-0"})([".form-field{input{color:",";}}"],(function(e){return e.theme.colors.darkblue})),rt=ce.c.div.withConfig({displayName:"CreateSessionModal__FieldContainer",componentId:"sc-18fxag4-1"})(["margin-top:1.5rem;"]),it=function(e){var t=qe()().add(7,"days");return Object(fe.jsx)(Xe.a,{isOpen:e.isOpen,onRequestClose:e.onRequestClose,children:Object(fe.jsx)(tt.a,{active:e.creatingSession,children:Object(fe.jsx)(Ze.b,{initialValues:{leagueID:e.league.id,date:t,location:e.league.location||void 0,format:e.league.format},onSubmit:function(t){return e.createSession(t,(function(){return e.onRequestClose()}))},keepDirtyOnReinitialize:!0,render:function(n){var a=n.handleSubmit;return Object(fe.jsxs)("form",{onSubmit:a,children:[Object(fe.jsx)("h2",{children:"New session"}),Object(fe.jsx)(Ze.a,{name:"leagueID",type:"hidden",component:"input"}),Object(fe.jsxs)(rt,{children:[Object(fe.jsx)("label",{children:"Date"}),Object(fe.jsx)(Ze.a,{name:"date",format:function(e){return qe()(e).toDate()},parse:function(e){return e?qe()(e):t},render:function(e){var t=e.input,n=e.meta;return Object(fe.jsx)(nt.a,{input:t,meta:n})}})]}),Object(fe.jsxs)(rt,{children:[Object(fe.jsx)("label",{children:"Location (optional)"}),Object(fe.jsx)(Ze.a,{name:"location",render:function(e){var t=e.input,n=e.meta;return Object(fe.jsx)(at,{input:t,meta:n,formFieldClassName:"form-field",placeholder:"Find the location of your session..."})}})]}),Object(fe.jsx)("div",{style:{textAlign:"center",marginTop:"2.5rem"},children:Object(fe.jsx)(Ue.a,{theme:"primary",type:"submit",disabled:e.creatingSession,loading:e.creatingSession,children:"Create session"})})]})}})})})},ot=n(435),st=n(262),ct=n(211),lt=Object(ce.c)(me.b).withConfig({displayName:"SessionItem__Container",componentId:"sc-1wzqxl7-0"})(["display:flex;align-items:center;padding:1.25rem 1.25rem;margin:0rem -1rem;border-radius:1rem;text-decoration:none;color:inherit;.session-number{font-size:2.5rem;margin-right:1.75rem;font-weight:600;}.session-title{width:200px;font-size:1.15rem;font-weight:600;flex-grow:1;}.session-subtitle{font-size:0.85rem;}.progress-bar-container{flex-grow:1;margin:0rem 4rem;display:none;}.action-button{padding:0.25rem 1rem;background-color:rgba(255,255,255,0.75);border-radius:50rem;cursor:pointer;.icon{color:rgba(0,0,0,0.15);}}&:hover{text-decoration:none;color:inherit;background-color:",";transform:translateY(-1px);box-shadow:0 7px 14px rgba(50,50,93,0.1),0 3px 6px rgba(0,0,0,0.08);.action-button{background-color:rgba(0,0,0,0.05);&:hover{transform:translateY(-1px);background-color:rgba(0,0,0,0.075);}}}"," ",""],(function(e){return e.theme.colors.whites[0]}),he.b.greaterThan("md")(O||(O=Object(se.a)(["\n    .session-number {\n      font-size: 2.5rem;\n      margin-right: 2rem;\n    }\n\n    .session-title {\n      white-space: nowrap;\n      font-size: 1.35rem;\n      flex-grow: 0;\n    }\n\n    .progress-bar-container {\n      display: block;\n    }\n  "]))),he.b.between("lg","xl")(x||(x=Object(se.a)(["\n    .progress-bar-container {\n      margin: 0rem 2rem;\n    }\n  "])))),dt=function(e){var t=Object(ee.useContext)(pe.b).role,n=Object(be.k)("")||{url:""},a=e.session,r=qe()(a.date.toDate()).format("dddd, MMM Do"),i=[{label:{text:"Delete session",iconClassName:"far fa-trash-alt"},onClick:function(t){t.preventDefault(),t.stopPropagation(),function(){var t=Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsxs)("div",{style:{marginBottom:"1rem"},children:["Are you sure you want to delete session of ",r,"?"]}),Object(fe.jsx)(ct.a,{style:{color:he.c.colors.danger},children:"This will permanently erase all matches, scores and statistics from this session."})]});Object(st.a)(t,{proceedText:"Delete session",proceedTheme:"danger"}).then((function(){e.deleteSession(a.id)}))}()}}];return Object(fe.jsx)(tt.a,{active:!!a.loading,children:Object(fe.jsxs)(lt,{to:"".concat(n.url,"/session/").concat(a.id),children:[Object(fe.jsx)("div",{className:"session-number",children:e.index+1}),Object(fe.jsxs)("div",{className:"session-title",children:[Object(fe.jsx)("div",{children:r}),Object(fe.jsxs)("div",{className:"session-subtitle",children:[a.matchCount||"0"," matches"]})]}),Object(fe.jsx)("div",{className:"progress-bar-container",children:Object(fe.jsx)(ot.a,{total:a.matchCount||0,done:a.playedMatchCount||0})}),(t===pe.a.admin||t===pe.a.moderator)&&Object(fe.jsx)(ue.a,{items:i,placement:"BOTTOM_RIGHT",children:Object(fe.jsx)("div",{className:"action-button",children:Object(fe.jsx)("i",{className:"fas fa-ellipsis-h icon"})})})]})})},ut=n(266),mt=n.n(ut),bt=ce.c.div.withConfig({displayName:"SessionList__Container",componentId:"sc-1l9f5ji-0"})(["margin-top:2.25rem;"]),pt=ce.c.div.withConfig({displayName:"SessionList__Header",componentId:"sc-1l9f5ji-1"})(["display:flex;align-items:center;.title{margin-right:1.5rem;font-size:2.15rem;font-weight:600;}"]),gt=function(e){var t=e.league,n=e.getSessions,a=Object(ee.useState)(!1),r=Object(ae.a)(a,2),i=r[0],o=r[1],s=Object(ee.useState)(!1),c=Object(ae.a)(s,2),l=c[0],d=c[1],u=Object(ee.useContext)(pe.b).role,m=u===pe.a.admin||u===pe.a.moderator,b=t.permissions.sessionsArePublic||u!==pe.a.guest,p=mt()(t.sessions,"date");return Object(ee.useEffect)((function(){t.id&&!t.sessions&&!l&&b&&(d(!0),n(t.id))}),[t,n,l,b]),Object(fe.jsxs)(bt,{children:[Object(fe.jsxs)(pt,{children:[Object(fe.jsx)("h2",{className:"title",children:"Sessions"}),m&&Object(fe.jsxs)(Ue.a,{theme:"primary",size:"sm",onClick:function(){return o(!0)},children:[Object(fe.jsx)("i",{className:"fas fa-plus icon-left"}),"New"]})]}),b?Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(tt.a,{active:e.loadingSessions,whiteOverlay:!0,children:p.length>0&&p.map((function(n,a){return Object(fe.jsx)(dt,{session:n,index:a,deleteSession:function(n){e.deleteSession(t.id,n)}},n.id)}))}),0===p.length&&(m?Object(fe.jsx)("div",{children:"Create your first session to prepare your format, matches and more!"}):Object(fe.jsx)("div",{children:"There are no sessions in this league."}))]}):Object(fe.jsx)("div",{children:"Sessions are only accessible to players of the league."}),Object(fe.jsx)(it,{isOpen:i,onRequestClose:function(){return o(!1)},createSession:e.createSession,creatingSession:e.creatingSession,league:e.league})]})},jt=n(1065),ht=(n(160),n(27)),ft=function(e,t){return function(){var n=Object(ie.a)(Object(re.a)().mark((function n(a){var r,i,o,s,c,l,d;return Object(re.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a(Object(jt.a)("CREATE_SESSION_REQUEST")(!0)),r=ge.a.auth().currentUser,i=r?r.uid:null){n.next=5;break}throw new Error;case 5:return o=ge.a.firestore(),s=o.collection("leagues").doc(e.leagueID),n.prev=7,n.next=10,s.collection("sessions").add({format:e.format,date:ge.a.firestore.Timestamp.fromDate(qe()(e.date).toDate()),location:e.location||null,createdBy:i,createdAt:ge.a.firestore.FieldValue.serverTimestamp()});case 10:return c=n.sent,n.next=13,c.get();case 13:l=n.sent,d=Object(Z.a)(Object(Z.a)({},l.data()),{},{id:l.id}),a(Object(jt.a)("CREATE_SESSION_SUCCESS")(d)),t&&t(),n.next=23;break;case 19:n.prev=19,n.t0=n.catch(7),a(Object(jt.a)("CREATE_SESSION_REQUEST")(!1)),Object(ht.a)("Sorry, a problem occured while trying to save your session. Please try again or contact an administrator.");case 23:case"end":return n.stop()}}),n,null,[[7,19]])})));return function(e){return n.apply(this,arguments)}}()},Ot=function(e){return function(){var t=Object(ie.a)(Object(re.a)().mark((function t(n){var a,r,i,o;return Object(re.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Object(jt.a)("GET_SESSIONS_REQUEST")(!0)),a=ge.a.firestore(),r=a.collection("leagues").doc(e),t.prev=3,t.next=6,r.collection("sessions").get();case 6:i=t.sent,o=[],i.forEach((function(e){o.push(Object(Z.a)(Object(Z.a)({},e.data()),{},{id:e.id}))})),n(Object(jt.a)("GET_SESSIONS_SUCCESS")(o)),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(3),n(Object(jt.a)("GET_SESSIONS_REQUEST")(!1)),Object(ht.a)("Sorry, a problem occured while trying to retrieve your sessions. Please try again or contact an administrator.");case 16:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(e){return t.apply(this,arguments)}}()},xt=function(e,t){return function(){var n=Object(ie.a)(Object(re.a)().mark((function n(a){var r,i,o,s;return Object(re.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(Object(jt.a)("DELETE_SESSION_REQUEST")({id:t,loading:!0})),r=ge.a.firestore(),i=r.collection("leagues").doc(e),o=i.collection("sessions").doc(t),n.prev=4,(s=r.batch()).delete(o),s.delete(i.collection("playerStatistics").doc(t)),s.delete(i.collection("teamStatistics").doc(t)),n.next=11,s.commit();case 11:a(Object(jt.a)("DELETE_SESSION_SUCCESS")(t)),n.next=18;break;case 14:n.prev=14,n.t0=n.catch(4),a(Object(jt.a)("DELETE_SESSION_REQUEST")({id:t,loading:!1})),Object(ht.a)("Sorry, a problem occured while trying to delete your session. Please try again or contact an administrator.");case 18:case"end":return n.stop()}}),n,null,[[4,14]])})));return function(e){return n.apply(this,arguments)}}()},yt=n(50),vt=ce.c.div.withConfig({displayName:"LeagueHome__HomeContainer",componentId:"sc-1emdq5m-0"})([""]),wt=Object(ne.b)((function(e){return{league:e.league.data,creatingSession:!!e.league.loading.createSession,loadingSessions:!!e.league.loading.getSessions}}),(function(e){return Object(Me.b)({createSession:ft,deleteSession:xt,getSessions:Ot},e)}))((function(e){var t=Object(yt.b)(),n=t.userFromDB,a=t.userFromAuth,r=Object(be.h)(),i=e.league;if(!i)return r.push("/"),null;var o=n&&n.leagues&&n.leagues.includes(i.id),s=!1;if(i.leaguePlayers&&n&&(o=!!Object.values(i.leaguePlayers).find((function(e){return!e.deletedAt&&e.player.uid===n.uid}))),(i.registration.player.enabled||i.registration.team.enabled)&&!o){var c=i.registration.closingDate.toDate();qe()(c).isAfter()&&(s=!!i.registration.player.enabled||!!i.registration.team.enabled)}return Object(fe.jsxs)(vt,{children:[Object(fe.jsx)(Ae,{title:i.name}),s&&Object(fe.jsx)(Je,{url:i.url,registration:i.registration,playerCount:i.playerCount,teamCount:i.teamCount,userFromAuth:a}),Object(fe.jsx)(Ge,{location:i.location,description:i.description}),Object(fe.jsx)(gt,{league:i,getSessions:e.getSessions,loadingSessions:e.loadingSessions,createSession:e.createSession,creatingSession:e.creatingSession,deleteSession:e.deleteSession})]})})),St=n(46),Tt=n(431),Nt=ce.c.div.withConfig({displayName:"AdminSettingsForm__FieldContainer",componentId:"sc-1m0nglv-0"})(["margin-bottom:1rem;"]),Ct=function(e){var t={};return e.name?e.name.length>40?t.name="Sorry, league name is limited to 40 characters.":e.name.length<3&&(t.name="Your league name needs at least 3 characters."):t.name="Your league needs a name!",e.description&&e.description.length>1e3&&(t.name="Sorry, league description is limited to 1000 characters."),t},Pt=function(e){return Object(fe.jsx)(Ze.b,{validate:Ct,onSubmit:function(t){return e.editLeague(t)},initialValues:{leagueID:e.league.id,name:e.league.name,location:e.league.location||void 0,description:e.league.description},render:function(t){var n=t.handleSubmit;t.values;return Object(fe.jsxs)("form",{onSubmit:n,children:[Object(fe.jsx)(Ze.a,{name:"leagueID",type:"hidden",component:"input"}),Object(fe.jsx)(Nt,{children:Object(fe.jsx)(Ze.a,{name:"name",render:function(t){var n=t.input,a=t.meta;return Object(fe.jsx)(St.b,{input:n,meta:a,placeholder:"League name",disabled:e.editingLeague})}})}),Object(fe.jsx)(Nt,{children:Object(fe.jsx)(Ze.a,{name:"location",render:function(t){var n=t.input,a=t.meta;return Object(fe.jsx)(et.a,{input:n,meta:a,formFieldClassName:"form-field",placeholder:"Location of your league...",disabled:e.editingLeague})}})}),Object(fe.jsx)(Nt,{children:Object(fe.jsx)(Ze.a,{name:"description",render:function(t){var n=t.input,a=t.meta;return Object(fe.jsx)(St.b,{input:n,meta:a,renderInput:function(){return Object(fe.jsx)(Tt.a,{input:n,meta:a,placeholder:"Description of your league (optional)",rows:4,disabled:e.editingLeague})},style:{marginBottom:0}})}})}),Object(fe.jsx)(Ue.a,{theme:"primary",type:"submit",style:{marginTop:"1rem"},loading:e.editingLeague,children:"Save changes"})]})}})},It=n(125),Et=ce.c.div.withConfig({displayName:"AdminPermissionsForm__CheckboxContainer",componentId:"sc-1klh73v-0"})(["margin-bottom:0.35rem;"]),_t=function(e){return{}},kt=function(e){var t=e.league.permissions;return Object(fe.jsx)(tt.a,{active:e.editingPermissions,children:Object(fe.jsx)(Ze.b,{validate:_t,onSubmit:function(t){return e.editLeaguePermissions(t)},initialValues:{leagueID:e.league.id,isPublic:!!t.isPublic,sessionsArePublic:!!t.sessionsArePublic,participantsArePublic:!!t.participantsArePublic,canReportOwnScore:!!t.canReportOwnScore,canReportAnyScore:!!t.canReportAnyScore},render:function(t){var n=t.handleSubmit;t.values;return Object(fe.jsxs)("form",{onSubmit:n,children:[Object(fe.jsx)(Ze.a,{name:"leagueID",type:"hidden",component:"input"}),Object(fe.jsx)("h5",{style:{marginBottom:"1rem"},children:"Privacy"}),Object(fe.jsx)(Et,{children:Object(fe.jsx)(Ze.a,{name:"isPublic",type:"checkbox",render:function(e){var t=e.input,n=e.meta;return Object(fe.jsx)(It.a,{input:t,meta:n,label:Object(fe.jsx)("span",{children:"League is public"}),info:"When public, anyone can find and see your league's information. When private, only participants can see it. Don't forget that if it's private, no one will be able to register."})}})}),Object(fe.jsx)(Et,{children:Object(fe.jsx)(Ze.a,{name:"participantsArePublic",type:"checkbox",render:function(e){var t=e.input,n=e.meta;return Object(fe.jsx)(It.a,{input:t,meta:n,label:Object(fe.jsx)("span",{children:"List of participants is public"}),info:"When public, anyone can see the lists of players and teams. When private, only participants can see it."})}})}),Object(fe.jsx)(Et,{children:Object(fe.jsx)(Ze.a,{name:"sessionsArePublic",type:"checkbox",render:function(e){var t=e.input,n=e.meta;return Object(fe.jsx)(It.a,{input:t,meta:n,label:Object(fe.jsx)("span",{children:"League sessions and statistics are public"}),info:"When public, anyone can access your sessions, see results and global statistics. When private, only participants can see that."})}})}),Object(fe.jsx)("h5",{style:{margin:"1rem 0rem"},children:"Permissions"}),Object(fe.jsx)(Et,{children:Object(fe.jsx)(Ze.a,{name:"canReportAnyScore",type:"checkbox",render:function(e){var t=e.input,n=e.meta;return Object(fe.jsx)(It.a,{input:t,meta:n,label:Object(fe.jsx)("span",{children:"Players can report scores of any match"}),info:"This setting allows your players to report the score of any match in your league."})}})}),Object(fe.jsx)(Et,{children:Object(fe.jsx)(Ze.a,{name:"canReportOwnScore",type:"checkbox",render:function(e){var t=e.input,n=e.meta;return Object(fe.jsx)(It.a,{input:t,meta:n,label:Object(fe.jsx)("span",{children:"Players can report scores of their matches"}),info:"This setting allows your players to report the score of any match they are involved in."})}})}),Object(fe.jsx)(Ue.a,{theme:"primary",type:"submit",style:{marginTop:"1rem"},loading:e.editingPermissions,children:"Save changes"})]})}})})},Rt=n(97),Lt=n(176),Mt=n(134),Dt=n(8),At=ce.c.h5.withConfig({displayName:"AdminRoles__RoleSubtitle",componentId:"sc-orkfl-0"})(["font-size:1.15rem;font-weight:600;"]),Ft=ce.c.div.withConfig({displayName:"AdminRoles__UserContainer",componentId:"sc-orkfl-1"})(["display:flex;align-items:center;.user-item-container{flex:1 1 auto;}"]),zt=ce.c.div.withConfig({displayName:"AdminRoles__Nobody",componentId:"sc-orkfl-2"})(["font-style:italic;opacity:0.75;margin-bottom:0.5rem;"]),Gt=ce.c.div.withConfig({displayName:"AdminRoles__RemoveRoleButton",componentId:"sc-orkfl-3"})(["cursor:pointer;opacity:0.25;&:hover{color:",";opacity:0.75;}"],(function(e){return e.theme.colors.danger})),Ut=[{title:"Administrators",label:"administrator",inputPlaceholder:"Add an administrator",prop:"admins",tooltip:"Event administrators are given all privileges."},{title:"Moderators",label:"moderator",inputPlaceholder:"Add a moderator",prop:"moderators",tooltip:"Moderators are allowed to create sessions, edit setup and report scores for any match."},{title:"Editors",label:"editor",inputPlaceholder:"Add an editor",prop:"editors",tooltip:"Editors are allowed to report scores for any match."}],Bt=function(e){var t=function(){var t=Object(ie.a)(Object(re.a)().mark((function t(n,a){var r;return Object(re.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(fe.jsxs)("span",{children:["Are you sure you want to give ",Object(fe.jsx)("span",{style:{fontWeight:700},children:a.label})," ","privileges to ",Object(fe.jsx)("span",{style:{fontWeight:700},children:n.displayName}),"?"]}),t.next=3,Object(st.a)(r,{proceedText:"Confirm"});case 3:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:e.addRole(e.leagueID,n.uid,a.prop);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return Object(fe.jsx)("div",{children:Ut.map((function(n){return Object(fe.jsxs)("div",{style:{marginBottom:"2rem"},children:[Object(fe.jsxs)(At,{children:[n.title,Object(fe.jsx)(Mt.a,{info:n.tooltip,style:{marginLeft:"0.5rem",fontSize:"0.95rem",opacity:.5}})]}),Object(fe.jsxs)("div",{children:[e.roles[n.prop].map((function(t,a,r){return Object(fe.jsxs)(Ft,{children:[Object(fe.jsx)(Dt.a,{className:"user-item-container",sx:{py:2},children:Object(fe.jsx)(Rt.b,{uid:t},t)}),(r.length>1||"administrator"!==n.label)&&Object(fe.jsx)(Gt,{onClick:function(){return e.removeRole(e.leagueID,t,n.prop)},children:Object(fe.jsx)("i",{className:"fas fa-user-minus remove-role-icon"})})]},t)})),0===e.roles[n.prop].length&&Object(fe.jsxs)(zt,{children:["There are no ",n.label,"s for this event."]})]}),Object(fe.jsx)("div",{style:{marginTop:"0.25rem"},children:Object(fe.jsx)(Lt.d,{onChange:function(e){e&&t(e,n)},placeholder:n.inputPlaceholder,clearInputOnSelect:!0})})]},n.label)}))})},qt=n(425),Wt=ce.c.div.withConfig({displayName:"AdminSettings__Container",componentId:"sc-1ooh6ch-0"})(["> div:first-child{margin-bottom:1rem;}"," "," ",""],he.b.greaterThan("lg")(y||(y=Object(se.a)(["\n    display: flex;\n    > div:first-child {\n      flex-basis: 480px;\n      flex-shrink: 0;\n      flex-grow: 1;\n      margin-bottom: 0;\n      margin-right: 1.75rem;\n    }\n\n    > div:nth-child(2) {\n      flex-basis: 370px;\n      flex-shrink: 1;\n      flex-grow: 0;\n    }\n  "]))),he.b.greaterThan("xl")(v||(v=Object(se.a)(["\n    > div:first-child {\n      flex-basis: 630px;\n    }\n\n    > div:nth-child(2) {\n      flex-basis: 420px;\n    }\n  "]))),he.b.greaterThan("1440px")(w||(w=Object(se.a)(["\n    > div:nth-child(2) {\n      flex-basis: 480px;\n    }\n  "])))),Yt=ce.c.h3.withConfig({displayName:"AdminSettings__PanelTitle",componentId:"sc-1ooh6ch-1"})(["margin-bottom:1.25rem;"]),Vt=function(e){return Object(fe.jsxs)(Wt,{children:[Object(fe.jsxs)("div",{children:[Object(fe.jsxs)(qt.a,{style:{marginBottom:"1rem"},children:[Object(fe.jsx)(Yt,{children:"League Information"}),Object(fe.jsx)(Pt,{league:e.league,editLeague:e.editLeague,editingLeague:e.editingLeague})]}),Object(fe.jsxs)(qt.a,{children:[Object(fe.jsx)(Yt,{children:"Privacy & Permissions"}),Object(fe.jsx)(kt,{league:e.league,editLeaguePermissions:e.editLeaguePermissions,editingPermissions:e.editingPermissions})]})]}),Object(fe.jsx)("div",{children:Object(fe.jsxs)(qt.a,{children:[Object(fe.jsx)(Yt,{children:"Roles"}),Object(fe.jsx)(Bt,{leagueID:e.league.id,roles:e.league.roles,addRole:e.addRole,removeRole:e.removeRole})]})})]})},Ht=Object(ce.c)(qt.a).withConfig({displayName:"AdminRegistrationSettings__StyledPanel",componentId:"sc-1i9jis3-0"})(["margin-bottom:1rem;"]),Qt=ce.c.div.withConfig({displayName:"AdminRegistrationSettings__FieldContainer",componentId:"sc-1i9jis3-1"})(["margin-top:1rem;> label{font-weight:600;}"]),Kt=ce.c.div.withConfig({displayName:"AdminRegistrationSettings__ButtonContainer",componentId:"sc-1i9jis3-2"})(["margin-top:1.5rem;"]),$t=function(e){var t={};return e.closingDate||(t.closingDate="Required"),t},Jt=function(e){return Object(fe.jsxs)(Ht,{children:[Object(fe.jsx)("h3",{children:"Registration Settings"}),Object(fe.jsx)(Ze.b,{validate:$t,onSubmit:e.editRegistrationSettings,initialValues:{closingDate:qe()(e.registration.closingDate.toDate())},render:function(t){t.form;var n=t.handleSubmit;t.values;return Object(fe.jsxs)("form",{onSubmit:n,children:[Object(fe.jsxs)(Qt,{style:{maxWidth:"400px"},children:[Object(fe.jsx)("label",{children:"Closing date and time"}),Object(fe.jsx)(Ze.a,{name:"closingDate",format:function(e){return qe()(e).toDate()},parse:function(e){return qe()(e)},render:function(t){var n=t.input,a=t.meta;return Object(fe.jsx)(nt.a,{input:n,meta:a,selectTime:!0,disabled:e.editingRegistrationSettings})}})]}),Object(fe.jsx)(Kt,{children:Object(fe.jsx)(Ue.a,{theme:"primary",type:"submit",loading:e.editingRegistrationSettings,children:"Save settings"})})]})}})]})},Xt=n(65),Zt=ce.c.div.withConfig({displayName:"RegistrationsTable__Container",componentId:"sc-1lb139c-0"})(["margin-top:3rem;"]),en=ce.c.div.withConfig({displayName:"RegistrationsTable__Panel",componentId:"sc-1lb139c-1"})(["background:",";border-radius:1rem;padding:1.5rem;box-shadow:0 7px 14px rgba(50,50,93,0.1),0 3px 6px rgba(0,0,0,0.08);margin-top:1.5rem;"," ",""],(function(e){return e.theme.colors.whites[0]}),he.b.greaterThan("lg")(S||(S=Object(se.a)(["\n    padding: 1.5rem 1.75rem;\n  "]))),he.b.greaterThan("xl")(T||(T=Object(se.a)(["\n    padding: 1.5rem 2rem;\n  "])))),tn=ce.c.div.withConfig({displayName:"RegistrationsTable__ResponsiveTableContainer",componentId:"sc-1lb139c-2"})(["display:block;width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch;table{width:100%;thead th{padding:0rem 1rem 0.65rem;color:",";opacity:0.2;}tbody td{padding:0.35rem 1rem;white-space:nowrap;}.user{display:flex;align-items:center;.name{margin-left:0.75rem;max-width:175px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}}.payment{width:1%;white-space:nowrap;}}"],(function(e){return e.theme.colors.darkblue})),nn=function(e){return Object(fe.jsxs)(Zt,{children:[Object(fe.jsx)("h3",{children:"Registrations"}),e.registrations?e.registrations.length>0?Object(fe.jsx)(en,{children:Object(fe.jsx)(tn,{children:Object(fe.jsxs)("table",{children:[Object(fe.jsx)("thead",{children:Object(fe.jsxs)("tr",{children:[Object(fe.jsx)("th",{children:"Registrant"}),Object(fe.jsx)("th",{children:"Team"}),Object(fe.jsx)("th",{children:"Registered at"}),Object(fe.jsx)("th",{className:"payment",children:"Payment"})]})}),Object(fe.jsx)("tbody",{children:e.registrations.map((function(e){return Object(fe.jsxs)("tr",{children:[Object(fe.jsx)("td",{children:Object(fe.jsxs)("div",{className:"user",children:[Object(fe.jsx)(de.a,{uid:e.registeredBy.uid,photoURL:e.registeredBy.photoURL,size:24}),Object(fe.jsx)("span",{className:"name",children:e.registeredBy.displayName})]})}),Object(fe.jsx)("td",{children:"teamName"in e?e.teamName:Object(fe.jsx)("span",{children:"\u2014"})}),Object(fe.jsx)("td",{children:qe()(e.registeredAt.toDate()).format("MMM Do, YYYY")}),Object(fe.jsxs)("td",{className:"payment",children:["$",(e.payment.amount/100).toFixed(2)]})]},e.orderNumber)}))})]})})}):Object(fe.jsx)("div",{children:Object(fe.jsx)("i",{children:"No registrations yet."})}):Object(fe.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:"1rem"},children:Object(fe.jsx)(Xt.a,{size:24})})]})},an=n(81),rn=n(112),on=["noLimit"],sn=ce.c.h3.withConfig({displayName:"AdminRegistrationPlayer__PanelTitle",componentId:"sc-1w5dram-0"})(["margin-bottom:1rem;"]),cn=ce.c.div.withConfig({displayName:"AdminRegistrationPlayer__CheckboxContainer",componentId:"sc-1w5dram-1"})(["margin-bottom:0.75rem;label{margin-bottom:0;}"]),ln=ce.c.div.withConfig({displayName:"AdminRegistrationPlayer__CostInputWrapper",componentId:"sc-1w5dram-2"})(["position:relative;max-width:10rem;.prefix{position:absolute;left:0;top:0;padding:0.45em 1em;}"]),dn=Object(ce.c)(St.b).withConfig({displayName:"AdminRegistrationPlayer__CostFormField",componentId:"sc-1w5dram-3"})(["input{padding-left:2.5rem;}"]),un=function(e){var t={};return 0===e.limit||e.limit||e.noLimit||(t.limit="Required."),t},mn=function(e){var t=Object(rn.c)();return Object(fe.jsxs)(qt.a,{children:[Object(fe.jsx)(sn,{children:"Player Registrations"}),Object(fe.jsx)(Ze.b,{validate:un,initialValues:{enabled:e.registration.player.enabled,cost:0===e.registration.player.cost?"":e.registration.player.cost.toFixed(2),includeFees:e.registration.player.includeFees,limit:e.registration.player.limit||0,noLimit:null===e.registration.player.limit},onSubmit:function(t){var n=t.noLimit,a=Object(oe.a)(t,on),r=parseFloat(t.cost);e.editPlayerRegistration(Object(Z.a)(Object(Z.a)({},a),{},{cost:Object.is(r,NaN)?0:r,limit:n?null:t.limit}))},render:function(n){var a=n.handleSubmit,r=n.values,i=0,o=0;if(r.cost){var s=Object(an.a)(parseFloat(r.cost),!!r.includeFees,t.fees.cad);i=s.total,o=s.costBeforeFees}return Object(fe.jsxs)("form",{onSubmit:a,children:[Object(fe.jsx)(cn,{children:Object(fe.jsx)(Ze.a,{name:"enabled",type:"checkbox",render:function(t){var n=t.input,a=t.meta;return Object(fe.jsx)(It.a,{input:n,meta:a,label:Object(fe.jsx)("span",{children:"Enable player registrations"}),info:"Allow users to register as a player (without a team).",disabled:e.editingPlayerRegistration})}})}),Object(fe.jsxs)(Qt,{children:[Object(fe.jsx)("label",{children:"Cost for a player"}),Object(fe.jsxs)(ln,{children:[Object(fe.jsx)(Ze.a,{name:"cost",render:function(t){var n=t.input,a=t.meta;return Object(fe.jsx)(dn,{input:n,meta:a,placeholder:"0.00",disabled:e.editingPlayerRegistration})},format:function(e){var t=parseFloat(e);return e&&""!==e&&!Object.is(t,NaN)?(100*t/100).toFixed(2):""},formatOnBlur:!0}),Object(fe.jsx)("span",{className:"prefix",children:"$"})]})]}),Object(fe.jsx)(cn,{style:{margin:"0.5rem 0rem 0.25rem"},children:Object(fe.jsx)(Ze.a,{name:"includeFees",type:"checkbox",render:function(t){var n=t.input,a=t.meta;return Object(fe.jsx)(It.a,{input:n,meta:a,label:Object(fe.jsx)("span",{children:"Include transaction fees"}),info:"Transaction fees are 3.9% added to a fix 0.50$",disabled:e.editingPlayerRegistration})}})}),!!r.cost&&!!i&&!!o&&Object(fe.jsxs)(ct.a,{style:{marginTop:0},children:["A player will pay $",i.toFixed(2)," and you will receive $",o.toFixed(2)]}),Object(fe.jsxs)(Qt,{children:[Object(fe.jsx)("label",{children:"How many players can register?"}),!r.noLimit&&Object(fe.jsx)("div",{style:{maxWidth:"10rem"},children:Object(fe.jsx)(Ze.a,{name:"limit",render:function(t){var n=t.input,a=t.meta;return Object(fe.jsx)(St.b,{input:n,meta:a,placeholder:"0",disabled:e.editingPlayerRegistration})},parse:function(e){return e?isNaN(parseInt(e))?void 0:parseInt(e):void 0}})}),Object(fe.jsx)("div",{style:{marginTop:r.noLimit?0:"0.5rem"},children:Object(fe.jsx)(Ze.a,{name:"noLimit",type:"checkbox",render:function(t){var n=t.input,a=t.meta;return Object(fe.jsx)(It.a,{input:n,meta:a,label:"No limit",disabled:e.editingPlayerRegistration})}})})]}),Object(fe.jsx)(Kt,{children:Object(fe.jsx)(Ue.a,{theme:"primary",type:"submit",children:"Save changes"})})]})}})]})},bn=["noLimit","noMax"],pn=ce.c.div.withConfig({displayName:"AdminRegistrationTeam__CostInputWrapper",componentId:"sc-19lbuby-0"})(["position:relative;max-width:10rem;.prefix{position:absolute;left:0;top:0;padding:0.45em 1em;}"]),gn=Object(ce.c)(St.b).withConfig({displayName:"AdminRegistrationTeam__CostFormField",componentId:"sc-19lbuby-1"})(["input{padding-left:2.5rem;}"]),jn=function(e){var t={};return 0===e.limit||e.limit||e.noLimit||(t.limit="Required."),e.minPlayers||"number"===typeof e.minPlayers||(t.minPlayers="Required."),e.maxPlayers||e.noMax||(t.maxPlayers="Maximum is required"),0===e.maxPlayers&&(t.maxPlayers="Maximum cannot be 0."),e.minPlayers&&e.maxPlayers&&e.minPlayers>e.maxPlayers&&(t.maxPlayers="Maximum needs to be higher than minimum"),t},hn=function(e){var t=Object(rn.c)();return Object(fe.jsxs)(qt.a,{children:[Object(fe.jsx)(sn,{children:"Team Registrations"}),Object(fe.jsx)(Ze.b,{validate:jn,initialValues:{enabled:e.registration.team.enabled,cost:0===e.registration.team.cost?"":e.registration.team.cost.toFixed(2),includeFees:e.registration.team.includeFees,limit:e.registration.team.limit||0,noLimit:null===e.registration.team.limit,minPlayers:e.registration.team.minPlayers,maxPlayers:e.registration.team.maxPlayers,noMax:null===e.registration.team.maxPlayers},onSubmit:function(t){var n=t.noLimit,a=t.noMax,r=Object(oe.a)(t,bn),i=parseFloat(t.cost);e.editTeamRegistration(Object(Z.a)(Object(Z.a)({},r),{},{cost:Object.is(i,NaN)?0:i,limit:n?null:t.limit,maxPlayers:a?null:t.maxPlayers}))},render:function(n){var a=n.errors,r=n.handleSubmit,i=n.values,o=0,s=0;if(i.cost){var c=Object(an.a)(parseFloat(i.cost),!!i.includeFees,t.fees.cad);o=c.total,s=c.costBeforeFees}return Object(fe.jsxs)("form",{onSubmit:r,children:[Object(fe.jsx)(cn,{children:Object(fe.jsx)(Ze.a,{name:"enabled",type:"checkbox",render:function(t){var n=t.input,a=t.meta;return Object(fe.jsx)(It.a,{input:n,meta:a,label:Object(fe.jsx)("span",{children:"Enable team registrations"}),info:"Allow users to register a team to your league.",disabled:e.editingTeamRegistration})}})}),Object(fe.jsxs)(Qt,{children:[Object(fe.jsx)("label",{children:"Cost for a team"}),Object(fe.jsxs)(pn,{children:[Object(fe.jsx)(Ze.a,{name:"cost",render:function(t){var n=t.input,a=t.meta;return Object(fe.jsx)(gn,{input:n,meta:a,placeholder:"0.00",disabled:e.editingTeamRegistration})},format:function(e){var t=parseFloat(e);return e&&""!==e&&!Object.is(t,NaN)?(100*t/100).toFixed(2):""},formatOnBlur:!0}),Object(fe.jsx)("span",{className:"prefix",children:"$"})]})]}),Object(fe.jsx)(cn,{style:{margin:"0.5rem 0rem 0.25rem"},children:Object(fe.jsx)(Ze.a,{name:"includeFees",type:"checkbox",render:function(t){var n=t.input,a=t.meta;return Object(fe.jsx)(It.a,{input:n,meta:a,label:Object(fe.jsx)("span",{children:"Include transaction fees"}),info:"Transaction fees are 3.9% added to a fix 0.50$",disabled:e.editingTeamRegistration})}})}),i.cost&&Object(fe.jsxs)(ct.a,{style:{marginTop:0},children:["A player will pay $",o.toFixed(2)," and you will receive $",s.toFixed(2)]}),Object(fe.jsxs)(Qt,{children:[Object(fe.jsx)("label",{children:"How many teams can register?"}),!i.noLimit&&Object(fe.jsx)("div",{style:{maxWidth:"10rem"},children:Object(fe.jsx)(Ze.a,{name:"limit",render:function(t){var n=t.input,a=t.meta;return Object(fe.jsx)(St.b,{input:n,meta:a,placeholder:"0",disabled:e.editingTeamRegistration})},parse:function(e){return e?isNaN(parseInt(e))?void 0:parseInt(e):void 0}})}),Object(fe.jsx)("div",{style:{marginTop:i.noLimit?0:"0.5rem"},children:Object(fe.jsx)(Ze.a,{name:"noLimit",type:"checkbox",render:function(t){var n=t.input,a=t.meta;return Object(fe.jsx)(It.a,{input:n,meta:a,label:"No limit",disabled:e.editingTeamRegistration})}})})]}),Object(fe.jsxs)(Qt,{children:[Object(fe.jsx)("label",{style:{marginBottom:"0.5rem",fontWeight:600},children:"How many players are required in a team?"}),Object(fe.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"0.75rem"},children:[Object(fe.jsx)("div",{style:{width:"6rem"},children:"Minimum"}),Object(fe.jsx)("div",{style:{maxWidth:"10rem"},children:Object(fe.jsx)(Ze.a,{name:"minPlayers",render:function(t){var n=t.input,a=t.meta;return Object(fe.jsx)(St.b,{style:{margin:0},input:n,meta:a,placeholder:"1",disabled:e.editingTeamRegistration})},parse:function(e){return Object.is(parseInt(e),NaN)?void 0:parseInt(e)}})})]}),!i.noMax&&Object(fe.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"0.5rem"},children:[Object(fe.jsx)("div",{style:{width:"6rem"},children:"Maximum"}),Object(fe.jsx)("div",{style:{maxWidth:"10rem"},children:Object(fe.jsx)(Ze.a,{name:"maxPlayers",render:function(t){var n=t.input,a=t.meta;return Object(fe.jsx)(St.b,{style:{margin:0},input:n,meta:a,placeholder:"2",displayError:!1,disabled:e.editingTeamRegistration})},parse:function(e){return Object.is(parseInt(e),NaN)?void 0:parseInt(e)}})})]}),Object(fe.jsx)("div",{children:Object(fe.jsx)(Ze.a,{name:"noMax",type:"checkbox",render:function(t){var n=t.input,a=t.meta;return Object(fe.jsx)(It.a,{input:n,meta:a,label:"No maximum",disabled:e.editingTeamRegistration})}})}),a&&a.maxPlayers&&Object(fe.jsxs)(St.a,{style:{marginTop:0},children:[Object(fe.jsx)("i",{className:"fas fa-exclamation-circle icon"}),a.maxPlayers]})]}),Object(fe.jsx)(Kt,{children:Object(fe.jsx)(Ue.a,{theme:"primary",type:"submit",loading:e.editingTeamRegistration,children:"Save changes"})})]})}})]})},fn=ce.c.div.withConfig({displayName:"AdminRegistrations__Container",componentId:"sc-vv187m-0"})(["padding-bottom:1.5rem;",""],he.b.greaterThan("1600px")(N||(N=Object(se.a)(["\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n  "])))),On=ce.c.div.withConfig({displayName:"AdminRegistrations__FlexContainer",componentId:"sc-vv187m-1"})(["display:flex;flex-wrap:wrap;align-items:flex-start;> div{width:100%;margin-bottom:1rem;&:first-child{width:100%;}}"," ",""],he.b.greaterThan("lg")(C||(C=Object(se.a)(["\n    width: 800px;\n    max-width: 100%;\n\n    > div {\n      width: calc(50% - 0.5rem);\n      min-width: 350px;\n      \n      &:nth-child(2) {\n        margin-right: 1rem;\n      }\n    }\n  "]))),he.b.greaterThan("xl")(P||(P=Object(se.a)(["\n  width: 1000px;\n    max-width: 100%;\n\n    > div {\n      width: calc(50% - 0.5rem);\n      min-width: 400px;\n    }\n\n    &:nth-child(2) {\n      margin-right: 1rem;\n    }\n  "])))),xn=function(e){var t=e.getRegistrations,n=e.league;return Object(ee.useEffect)((function(){t(n.id)}),[t,n.id]),Object(fe.jsxs)(fn,{children:[Object(fe.jsxs)(On,{children:[Object(fe.jsx)(Jt,{registration:e.league.registration,editRegistrationSettings:function(t){return e.editRegistrationSettings(e.league.id,t)},editingRegistrationSettings:e.editingRegistrationSettings}),Object(fe.jsx)(mn,{registration:e.league.registration,editPlayerRegistration:function(t){return e.editPlayerRegistration(e.league.id,t)},editingPlayerRegistration:e.editingPlayerRegistration}),Object(fe.jsx)(hn,{registration:e.league.registration,editTeamRegistration:function(t){return e.editTeamRegistration(e.league.id,t)},editingTeamRegistration:e.editingTeamRegistration})]}),Object(fe.jsx)("div",{children:Object(fe.jsx)(nn,{registrations:e.league.registrations,loadingRegistrations:e.loadingRegistrations})})]})},yn=n(965),vn=Object(ne.b)((function(e){return{league:e.league.data,editingLeague:!!e.league.loading.editLeague,editingPermissions:!!e.league.loading.editLeaguePermissions,editingRegistrationSettings:!!e.league.loading.editRegistrationSettings,editingPlayerRegistration:!!e.league.loading.editPlayerRegistration,editingTeamRegistration:!!e.league.loading.editTeamRegistration,loadingRegistrations:!!e.league.loading.getRegistrations}}),(function(e){return Object(Me.b)({editLeague:yn.c,editLeaguePermissions:yn.d,addRole:yn.a,removeRole:yn.m,editRegistrationSettings:yn.f,editPlayerRegistration:yn.e,editTeamRegistration:yn.g,getRegistrations:yn.k},e)}))((function(e){var t=Object(be.h)(),n=Object(be.j)().page,a=Object(ee.useContext)(pe.b).role;return e.league?a!==pe.a.admin?(t.push("/".concat(e.league.url)),null):"registrations"===n?Object(fe.jsx)(xn,{league:e.league,editRegistrationSettings:e.editRegistrationSettings,editingRegistrationSettings:e.editingRegistrationSettings,editPlayerRegistration:e.editPlayerRegistration,editingPlayerRegistration:e.editingPlayerRegistration,editTeamRegistration:e.editTeamRegistration,editingTeamRegistration:e.editingTeamRegistration,getRegistrations:e.getRegistrations,loadingRegistrations:e.loadingRegistrations}):Object(fe.jsx)(Vt,{league:e.league,editLeague:e.editLeague,editLeaguePermissions:e.editLeaguePermissions,editingLeague:e.editingLeague,editingPermissions:e.editingPermissions,addRole:e.addRole,removeRole:e.removeRole}):(t.push("/"),null)})),wn=ce.c.div.withConfig({displayName:"RegistrationType__Container",componentId:"sc-q1qm83-0"})(["margin-top:2.5rem;display:flex;flex-direction:column;align-items:center;",""],he.b.greaterThan("md")(I||(I=Object(se.a)(["\n    > div {\n      max-width: 600px;\n    }\n  "])))),Sn=ce.c.div.withConfig({displayName:"RegistrationType__ButtonsContainer",componentId:"sc-q1qm83-1"})(["display:flex;flex-direction:column;align-items:stretch;margin-top:2rem;width:160px;> button{display:block;&:first-child{margin-bottom:1rem;}}"," ",""],he.b.greaterThan("sm")(E||(E=Object(se.a)(["\n    width: 220px;\n  "]))),he.b.greaterThan("lg")(_||(_=Object(se.a)(["\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: flex-start;\n    max-width: initial;\n\n    >:first-child {\n        margin-right: 2rem;\n    }\n  "])))),Tn=Object(ce.c)(Ue.a).withConfig({displayName:"RegistrationType__StyledButton",componentId:"sc-q1qm83-2"})(["padding:0.5rem 2rem;font-size:1.85rem;width:100%;",""],he.b.greaterThan("lg")(k||(k=Object(se.a)([" \n    width: auto;\n  "])))),Nn=function(e){return Object(fe.jsxs)(wn,{children:[Object(fe.jsx)("h3",{children:"Do you want to register a player or a team?"}),Object(fe.jsxs)(Sn,{children:[Object(fe.jsx)(Tn,{onClick:function(){return e.onChange(!1)},children:"Player"}),Object(fe.jsx)(Tn,{onClick:function(){return e.onChange(!0)},disabled:!!e.disableTeam,children:"Team"})]}),Object(fe.jsx)(ct.a,{style:{textAlign:"left",fontSize:"0.9rem"},children:"This league supports both player and team registrations. You can register one of your teams to keep your stats rolling or register yourself as an individual player and let the organizer sets you up on a team!"})]})},Cn=n(21),Pn=n(1336),In=ce.c.div.withConfig({displayName:"StyledCardElement__StyledCardElem",componentId:"sc-216agz-0"})(["border:none;font-size:inherit;line-height:1.5;padding:0.3em 1em;background:",";border-radius:0.5em;font-weight:600;&::placeholder{color:rgba(0,0,0,0.25);font:400 1rem Muli;opacity:1;font-size:inherit;}"],(function(e){var t=e.background,n=e.theme;return t||n.colors.grays[0]})),En=function(e){var t=Object(Z.a)(Object(Z.a)({lineHeight:"1.5"},e.style),{},{"::placeholder":{color:"rgba(0,0,0,0.25)"}});return Object(fe.jsx)(In,{background:e.background,children:Object(fe.jsx)(Pn.CardElement,{hidePostalCode:!0,style:{base:t}})})},_n=ce.c.div.withConfig({displayName:"RegistrationPayment__PaymentSection",componentId:"sc-nm23dm-0"})(["> div{margin-top:0.65rem;}.receipt-checkbox-label{font-size:0.9rem;margin-top:0.15rem;}"]),kn=ce.c.div.withConfig({displayName:"RegistrationPayment__ReceiptInfoSection",componentId:"sc-nm23dm-1"})(["display:flex;flex-wrap:wrap;> div{flex-shrink:0;width:calc(50% - 0.5rem);margin-top:0.65rem;&.full-width{width:100%;}}"]),Rn=function(e){var t=e.values;return Object(fe.jsxs)("div",{children:[Object(fe.jsxs)(_n,{children:[Object(fe.jsx)("div",{children:Object(fe.jsx)(Ze.a,{name:"cost",type:"hidden",parse:function(e){return parseInt(e)},component:"input"})}),Object(fe.jsx)("div",{children:Object(fe.jsx)(Ze.a,{name:"cardholder",render:function(e){var t=e.input,n=e.meta;return Object(fe.jsx)(St.b,{input:t,meta:n,placeholder:"Cardholder name",background:"#fff"})}})}),Object(fe.jsx)("div",{children:Object(fe.jsx)(Ze.a,{name:"card",render:function(e){var t=e.input;e.meta;return Object(fe.jsx)(En,{value:t.value,background:"#fff",style:{fontSize:"18.4px"}})}})}),Object(fe.jsx)("div",{style:{marginTop:"1rem"},children:Object(fe.jsx)(Ze.a,{name:"wantsReceipt",type:"checkbox",render:function(e){var t=e.input,n=e.meta;return Object(fe.jsx)(It.a,{input:t,meta:n,label:Object(fe.jsx)("span",{className:"receipt-checkbox-label",children:"I want a receipt"})})}})})]}),t.wantsReceipt&&Object(fe.jsxs)(kn,{children:[Object(fe.jsx)("div",{className:"full-width",children:Object(fe.jsx)(Ze.a,{name:"receipt.name",type:"text",render:function(e){var t=e.input,n=e.meta;return Object(fe.jsx)(St.b,{input:t,meta:n,placeholder:"Full name or company name",background:"#fff"})}})}),Object(fe.jsx)("div",{className:"full-width",children:Object(fe.jsx)(Ze.a,{name:"receipt.address",type:"text",render:function(e){var t=e.input,n=e.meta;return Object(fe.jsx)(St.b,{input:t,meta:n,placeholder:"Address",background:"#fff"})}})}),Object(fe.jsx)("div",{style:{marginRight:"1rem"},children:Object(fe.jsx)(Ze.a,{name:"receipt.city",type:"text",render:function(e){var t=e.input,n=e.meta;return Object(fe.jsx)(St.b,{input:t,meta:n,placeholder:"City",background:"#fff"})}})}),Object(fe.jsx)("div",{children:Object(fe.jsx)(Ze.a,{name:"receipt.postalCode",type:"text",render:function(e){var t=e.input,n=e.meta;return Object(fe.jsx)(St.b,{input:t,meta:n,placeholder:"Postal code/zip code",background:"#fff"})}})}),Object(fe.jsx)("div",{style:{marginRight:"1rem"},children:Object(fe.jsx)(Ze.a,{name:"receipt.province",type:"text",render:function(e){var t=e.input,n=e.meta;return Object(fe.jsx)(St.b,{input:t,meta:n,placeholder:"Province or state",background:"#fff"})}})}),Object(fe.jsx)("div",{children:Object(fe.jsx)(Ze.a,{name:"receipt.country",type:"text",render:function(e){var t=e.input,n=e.meta;return Object(fe.jsx)(St.b,{input:t,meta:n,placeholder:"Country",background:"#fff"})}})})]})]})},Ln=ce.c.div.withConfig({displayName:"RegistrationCost__Container",componentId:"sc-1kyezwo-0"})(["font-size:1rem;margin-bottom:1.25rem;.line{display:flex;margin-top:0.25rem;.dots{flex-grow:1;border-bottom:1px dotted ",";}&.total{font-weight:800;margin-top:0.75rem;}}"],(function(e){return e.theme.colors.blacks[5]})),Mn=function(e){var t=Object(rn.c)(),n=Object(an.a)(e.cost,e.includeFees,t.fees.cad),a=n.total,r=n.costBeforeFees,i=n.fees;return Object(fe.jsxs)(Ln,{children:[Object(fe.jsxs)("div",{className:"line",children:[Object(fe.jsx)("div",{children:"Registration"}),Object(fe.jsx)("div",{className:"dots"}),Object(fe.jsxs)("div",{children:[r.toFixed(2),"$"]})]}),Object(fe.jsxs)("div",{className:"line",children:[Object(fe.jsx)("div",{children:"Transaction fees"}),Object(fe.jsx)("div",{className:"dots"}),Object(fe.jsxs)("div",{children:[i.toFixed(2),"$"]})]}),Object(fe.jsxs)("div",{className:"line total",children:[Object(fe.jsx)("div",{children:"Total"}),Object(fe.jsx)("div",{className:"dots"}),Object(fe.jsxs)("div",{children:[a.toFixed(2),"$"]})]})]})},Dn=Object(ce.c)(Xe.a).withConfig({displayName:"PaymentSecurityFooter__StyledModal",componentId:"sc-1c3g1tm-0"})([".title{text-align:center;background:",";padding:0.5rem 0;margin-bottom:1rem;.icon{color:",";margin-right:1rem;}}"],(function(e){return e.theme.colors.lightgray}),(function(e){return e.theme.colors.primary})),An=function(e){return Object(fe.jsxs)(Dn,{isOpen:e.isOpen,onRequestClose:e.onRequestClose,children:[Object(fe.jsxs)("h5",{className:"title",children:[Object(fe.jsx)("i",{className:"fas fa-lock icon"}),"Secured web page"]}),Object(fe.jsx)("p",{children:"You are on a secured web page using a Transport Layer Security (TLS) protocol to crypt and transmit your data. You can verify its certificate by clicking on its icon at the left of the address bar."}),Object(fe.jsx)("p",{children:"This protocol uses HTTPS from servers of fwango.io."}),Object(fe.jsxs)("p",{children:["Our payment transmission and processing is ",Object(fe.jsx)("span",{style:{fontWeight:600},children:"PCI DSS"})," ","compliant."]}),Object(fe.jsx)("div",{style:{textAlign:"center"},children:Object(fe.jsx)(Ue.a,{onClick:e.onRequestClose,style:{padding:"0.5rem 1rem"},children:"Close"})})]})},Fn=ce.c.div.withConfig({displayName:"PaymentSecurityFooter__Container",componentId:"sc-1c3g1tm-1"})(["text-align:center;margin-top:4rem;.icon-container{margin:0 0.5rem;padding:0.25rem 0.5rem;background:white;font-size:0.85rem;font-weight:600;display:inline-block;border-radius:0.25rem;cursor:pointer;.icon{color:",";margin-right:0.5rem;}}"],(function(e){return e.theme.colors.primary})),zn=function(){var e=Object(ee.useState)(!1),t=Object(ae.a)(e,2),n=t[0],a=t[1];return Object(fe.jsxs)(Fn,{children:[Object(fe.jsx)("img",{src:"/img/visa.png",alt:"Visa",style:{height:"24px",width:"auto",marginRight:"0.5rem"}}),Object(fe.jsx)("img",{src:"/img/mc.png",alt:"Mastercard",style:{height:"24px",width:"auto"}}),Object(fe.jsxs)("div",{className:"icon-container",onClick:function(){return a(!0)},children:[Object(fe.jsx)("i",{className:"fas fa-lock icon"}),"Secured payments"]}),Object(fe.jsx)(An,{isOpen:n,onRequestClose:function(){return a(!1)}})]})},Gn=ce.c.span.withConfig({displayName:"RegistrationTerms__TermsLabel",componentId:"sc-1g5212x-0"})(["font-size:0.9rem;margin-top:0.15rem;a{font-weight:600;color:",";&:hover{color:",";}}"],(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.primary})),Un=function(){return Object(fe.jsx)("div",{style:{marginTop:"2rem"},children:Object(fe.jsx)(Ze.a,{name:"terms",type:"checkbox",render:function(e){var t=e.input,n=e.meta;return Object(fe.jsx)(It.a,{input:t,meta:n,label:Object(fe.jsxs)(Gn,{children:["I agree to the"," ",Object(fe.jsx)("a",{href:"/terms",target:"_blank",children:"Terms of Use"})," ","and"," ",Object(fe.jsx)("a",{href:"/purchaseagreement",target:"_blank",children:"Purchase Agreement"})," ","and understand that information will be used as described in our"," ",Object(fe.jsx)("a",{href:"/privacy",target:"_blank",children:"Privacy Policy"}),"."]})})}})})},Bn=ce.c.div.withConfig({displayName:"RegistrationRegistrant__NamesContainer",componentId:"sc-5xp6rf-0"})(["display:flex;> div{flex-grow:1;&:first-child{margin-right:1rem;}}"]),qn=function(){return Object(fe.jsxs)(Bn,{children:[Object(fe.jsx)("div",{children:Object(fe.jsx)(Ze.a,{name:"firstName",render:function(e){var t=e.input,n=e.meta;return Object(fe.jsx)(St.b,{input:t,meta:n,placeholder:"First name",background:"#fff"})}})}),Object(fe.jsx)("div",{children:Object(fe.jsx)(Ze.a,{name:"lastName",render:function(e){var t=e.input,n=e.meta;return Object(fe.jsx)(St.b,{input:t,meta:n,background:"#fff",placeholder:"Last name"})}})})]})},Wn=n(77),Yn=n(149),Vn=ce.c.div.withConfig({displayName:"RegistrationTeam__FormSection",componentId:"sc-1pyq7xm-0"})(["margin-top:3rem;.section-header{display:flex;align-items:flex-end;.section-title{margin-right:1rem;margin-bottom:0;}}"]),Hn=ce.c.div.withConfig({displayName:"RegistrationTeam__Container",componentId:"sc-1pyq7xm-1"})(["display:flex;flex-wrap:wrap;margin-top:0.25rem;.no-team-message{margin-top:0.75rem;opacity:0.5;font-size:1rem;font-style:italic;}"]),Qn=ce.c.div.withConfig({displayName:"RegistrationTeam__TeamContainer",componentId:"sc-1pyq7xm-2"})(["background:",";border-radius:0.75rem;display:flex;justify-content:space-between;align-items:center;padding:0.75rem 1rem;margin-top:0.75rem;width:100%;box-shadow:0 7px 14px rgba(50,50,93,0.1),0 3px 6px rgba(0,0,0,0.08);cursor:pointer;&:hover{transform:translateY(-1px);}.flex-container{display:flex;align-items:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:0.75rem;}.team-name{flex-grow:1;margin-left:1rem;font-size:1rem;font-weight:600;line-height:1.25;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;.player-count{font-size:0.85rem;font-weight:400;}}.edit-button{opacity:0.15;&:hover{opacity:1;}}",""],(function(e){return e.theme.colors.whites[0]}),he.b.greaterThan("md")(R||(R=Object(se.a)(["\n     width: calc(50% - 0.5rem);\n     flex-grow: 0;\n\n     &:nth-child(even) {\n         margin-left: 1rem;\n     }\n  "])))),Kn=function(e){var t=Object(Yn.b)(),n=t.userTeams,a=!!t.loading.getUserTeams,r=Object(ee.useState)(""),i=Object(ae.a)(r,2),o=i[0],s=i[1],c=Object(Yn.c)(),l=Object(ee.useCallback)((function(t){e.formApi.change("teamID",t.id),s(t.id);var n=Object.keys(t.players).length;n>=e.minPlayersPerTeam&&(null===e.maxPlayersPerTeam||n<=e.maxPlayersPerTeam)?e.formApi.change("playerCount",n):e.formApi.change("playerCount",void 0)}),[e.formApi,e.minPlayersPerTeam,e.maxPlayersPerTeam]),d=Object.keys(n).length,u=Object(Wn.a)(d);if(Object(ee.useEffect)((function(){if("number"===typeof u&&d===u+1){var e=Object.values(n)[d-1];l(e)}}),[u,d,n,l]),a)return Object(fe.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(fe.jsx)(Xt.a,{size:22})});var m=e.formApi.getFieldState("teamID"),b=e.formApi.getFieldState("playerCount"),p=e.minPlayersPerTeam===e.maxPlayersPerTeam?"This league requires teams to have exactly ".concat(e.minPlayersPerTeam," players."):null===e.maxPlayersPerTeam?"This league requires teams to have a minimum of ".concat(e.minPlayersPerTeam," players."):"This league requires teams to have between ".concat(e.minPlayersPerTeam," and ").concat(e.maxPlayersPerTeam," players.");return Object(fe.jsxs)(Vn,{style:{marginBottom:Object.keys(n).length?0:"3rem"},children:[Object(fe.jsxs)("div",{className:"section-header",children:[Object(fe.jsx)("h5",{className:"section-title",children:"Select a team to register"}),Object(fe.jsxs)(Ue.a,{theme:"primary",size:"sm",onClick:function(){c({type:"SHOW_EDIT_TEAM_MODAL",payload:void 0})},type:"button",children:[Object(fe.jsx)("i",{className:"fas fa-plus icon-left"}),"New team"]})]}),Object(fe.jsx)(Ze.a,{name:"teamID",type:"hidden",component:"input"}),Object(fe.jsx)(Ze.a,{name:"playerCount",type:"hidden",component:"input"}),Object(fe.jsx)(ct.a,{children:p}),Object(fe.jsxs)(Hn,{children:[Object.values(n).map((function(e){var t=Object.keys(e.players).length;return Object(fe.jsxs)(Qn,{onClick:function(){return l(e)},children:[Object(fe.jsxs)("div",{className:"flex-container",children:[Object(fe.jsx)("div",{children:o===e.id?Object(fe.jsx)("i",{className:"fas fa-check-circle icon"}):Object(fe.jsx)("i",{className:"far fa-circle icon"})}),Object(fe.jsxs)("div",{className:"team-name",children:[e.name,Object(fe.jsx)("br",{}),Object(fe.jsxs)("span",{className:"player-count",children:[t," player",1!==t&&"s"]})]})]}),Object(fe.jsx)("div",{children:Object(fe.jsx)("i",{className:"fas fa-edit edit-button",onClick:function(t){var n;t.stopPropagation(),t.preventDefault(),n=e.id,c({type:"SHOW_EDIT_TEAM_MODAL",payload:n})}})})]},e.id)})),!Object.keys(n).length&&Object(fe.jsx)("div",{className:"no-team-message",children:"Looks like you have no team yet! You'll need to create one first."})]}),m&&m.submitFailed&&m.error&&Object(fe.jsxs)(St.a,{style:{marginTop:"1rem"},children:[Object(fe.jsx)("i",{className:"fas fa-exclamation-circle icon"}),m.error]}),m&&m.value&&b&&b.error&&Object(fe.jsxs)(St.a,{style:{marginTop:"1rem"},children:[Object(fe.jsx)("i",{className:"fas fa-exclamation-circle icon"}),p]})]})},$n=n(91),Jn=ce.c.div.withConfig({displayName:"RegistrationForm__Container",componentId:"sc-1piq8nk-0"})(["text-align:left;font-size:1.15rem;",""],he.b.greaterThan("md")(L||(L=Object(se.a)(["\n      width: 600px;\n  "])))),Xn=ce.c.div.withConfig({displayName:"RegistrationForm__FormSection",componentId:"sc-1piq8nk-1"})(["margin-top:3rem;.section-title{margin-bottom:0.75rem;}"]),Zn=function(e){var t={},n="This field is required";return e.firstName?e.firstName.length>60&&(t.firstName="Your name cannot exceed 60 characters"):t.firstName="This field is required",e.lastName?e.lastName.length>60&&(t.lastName="Your name cannot exceed 60 characters"):t.lastName="This field is required",e.teamRegistration&&(e.teamID||(t.teamID="You need to select a team. If you don't have any, you need to create one."),null!==e.playerCount&&void 0!==e.playerCount||(t.playerCount="This team does not respect the number of players allowed by this league.")),e.cost>=1&&(e.cardholder||(t.cardholder="This field is required")),e.wantsReceipt&&!e.receipt&&(t.receipt={},t.receipt.name=n),e.wantsReceipt&&e.receipt&&(t.receipt={},e.receipt.name||(t.receipt.name=n),e.receipt.address||(t.receipt.address=n),e.receipt.city||(t.receipt.city=n),e.receipt.postalCode||(t.receipt.postalCode=n),e.receipt.province||(t.receipt.province=n),e.receipt.country||(t.receipt.country=n),0===Object.keys(t.receipt).length&&delete t.receipt),e.terms||(t.terms="You must agree to our Terms of Use, Purchase Agreement and Privacy Policy."),t},ea=Object(Pn.injectStripe)((function(e){var t=Object(rn.c)(),n=Object(ee.useState)(!1),a=Object(ae.a)(n,2),r=a[0],i=a[1],o=e.registration,s=e.registration.team.enabled?[o.team.cost,o.team.includeFees]:[o.player.cost,o.player.includeFees],c=Object(ae.a)(s,2),l=c[0],d=c[1],u=Object(an.a)(l,d,t.fees.cad).total,m=function(){var t=Object(ie.a)(Object(re.a)().mark((function t(n,a,r){var o,s,c;return Object(re.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i(!0),e.stripe||!(l>=1)){t.next=4;break}return r&&r(Object(Cn.a)({},$n.a,"Sorry, we are unable to treat payments at the moment.")),t.abrupt("return");case 4:if(!(l>=1&&e.stripe)){t.next=16;break}return t.next=7,e.stripe.createToken({type:"card",name:n.cardholder});case 7:if(o=t.sent,s=o.error,c=o.token,!s){t.next=15;break}return r&&r(Object(Cn.a)({},$n.a,s.message||"Sorry, your payment could not be processed with the provided information.")),t.abrupt("return");case 15:n.stripeToken=c;case 16:e.register(n,(function(t){return e.onSuccess(t)})),i(!1);case 18:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}();return Object(fe.jsx)(Jn,{children:Object(fe.jsx)(tt.a,{active:e.loadingRegister||r,children:Object(fe.jsx)(Ze.b,{onSubmit:m,initialValues:{teamRegistration:e.teamRegistration,leagueID:e.leagueID,firstName:"",lastName:"",teamID:"",wantsReceipt:!1,cost:u,terms:!1},validate:Zn,render:function(t){var n=t.form,a=t.handleSubmit,r=t.submitError,i=t.values;t.submitting;return Object(fe.jsxs)("form",{onSubmit:a,children:[Object(fe.jsx)(Ze.a,{name:"teamRegistration",type:"hidden",component:"input"}),Object(fe.jsx)(Ze.a,{name:"leagueID",type:"hidden",component:"input"}),Object(fe.jsxs)(Xn,{style:{marginTop:"1rem"},children:[Object(fe.jsx)("h5",{className:"section-title",children:"Registrant"}),Object(fe.jsx)(qn,{})]}),e.teamRegistration&&Object(fe.jsx)(Kn,{userFromDB:e.userFromDB,formApi:n,minPlayersPerTeam:o.team.minPlayers,maxPlayersPerTeam:o.team.maxPlayers}),u>1&&Object(fe.jsxs)(Xn,{children:[Object(fe.jsx)("h5",{className:"section-title",children:"Payment"}),Object(fe.jsx)(Mn,{cost:l,includeFees:d}),Object(fe.jsx)(Rn,{values:i})]}),Object(fe.jsx)(Un,{}),r&&Object(fe.jsxs)(St.a,{children:[Object(fe.jsx)("i",{className:"fas fa-exclamation-circle icon"}),r]}),Object(fe.jsx)("div",{style:{textAlign:"center",marginTop:"1rem"},children:Object(fe.jsx)(Ue.a,{theme:"primary",type:"submit",children:u>1?"Submit Registration and Payment":"Submit Registration"})}),u>1&&Object(fe.jsx)(zn,{})]})}})})})})),ta=n(267),na=ce.c.div.withConfig({displayName:"RegistrationSuccess__Container",componentId:"sc-35stk3-0"})(["display:flex;justify-content:center;text-align:center;.title{margin-bottom:1rem;font-size:3rem;}p{margin-bottom:0.25rem;font-size:1.15rem;}.big-icon{margin-top:1.5rem;font-size:5rem;margin-bottom:1.5rem;}.league-name{font-weight:600;}.order-number{text-decoration:underline;}"]),aa=Object(ce.c)(Ue.a).withConfig({displayName:"RegistrationSuccess__StyledButton",componentId:"sc-35stk3-1"})(["margin-top:2rem;"]),ra=function(e){return Object(fe.jsx)(na,{children:Object(fe.jsxs)("div",{children:[Object(fe.jsx)("i",{className:"far fa-calendar-check big-icon"}),Object(fe.jsx)("h1",{className:"title",children:"Welcome!"}),Object(fe.jsxs)("p",{children:["Your have successfully registered to"," ",Object(fe.jsxs)("span",{className:"league-name",children:[e.league.name,"."]})]}),Object(fe.jsxs)("p",{children:["Here is your confirmation number:"," ",Object(fe.jsx)("span",{className:"order-number",children:e.orderNumber})]}),Object(fe.jsx)(me.b,{to:"/".concat(e.league.url),children:Object(fe.jsxs)(aa,{size:"lg",children:[Object(fe.jsx)("i",{className:"fas fa-arrow-left icon-left"}),"Go back to league"]})})]})})},ia=ce.c.div.withConfig({displayName:"LeagueRegistration__Container",componentId:"sc-dnq2w3-0"})(["display:flex;justify-content:center;text-align:center;"]),oa=Object(ne.b)((function(e){return{league:e.league.data,loadingRegister:!!e.league.loading.register}}),(function(e){return Object(Me.b)({register:yn.l},e)}))((function(e){var t=Object(yt.b)().userFromDB,n=Object(rn.d)(),a=Object(ee.useState)(!1),r=Object(ae.a)(a,2),i=r[0],o=r[1],s=Object(ee.useState)(!1),c=Object(ae.a)(s,2),l=c[0],d=c[1],u=Object(ee.useState)(""),m=Object(ae.a)(u,2),b=m[0],p=m[1],g=Object(be.h)(),j=e.league,h=Object(ee.useState)(!0),f=Object(ae.a)(h,2),O=f[0],x=f[1];if(Object(ee.useEffect)((function(){var e=function(){var e=Object(ie.a)(Object(re.a)().mark((function e(t,n){var a;return Object(re.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge.a.firestore().collection("invitations").where("leagueID","==",t).where("uid","==",n).where("status","==","pending").get();case 2:(a=e.sent).size>0?g.push("/invitation/"+a.docs[0].id):x(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();j&&t&&e(j.id,t.uid)}),[t,j,g]),!j||!t)return g.push("/"),null;var y=j.registration;if(!y.player.enabled&&!y.team.enabled)return g.push("/".concat(j.url)),null;var v=y.player.enabled&&y.team.enabled;v||!y.team.enabled||i||o(!0);return b?Object(fe.jsx)(ra,{orderNumber:b||"55142313",league:j}):Object(fe.jsx)(ia,{children:Object(fe.jsxs)("div",{children:[Object(fe.jsx)("h1",{style:{fontSize:"3rem"},children:j.name}),Object(fe.jsx)("h2",{className:"title",children:"Registration"}),O&&Object(fe.jsx)("div",{style:{marginTop:"3rem",display:"flex",justifyContent:"center"},children:Object(fe.jsx)(Xt.a,{})}),!O&&v&&!l&&Object(fe.jsx)(Nn,{onChange:function(e){o(e),d(!0)},disableTeam:!!(y.team.limit&&y.team.limit-j.teamCount<1)}),!O&&(!v||l)&&Object(fe.jsx)(Pn.StripeProvider,{apiKey:Object(ta.c)(n),children:Object(fe.jsx)(Pn.Elements,{locale:"en",children:Object(fe.jsx)(ea,{userFromDB:t,leagueID:j.id,registration:y,teamRegistration:i,register:e.register,onSuccess:p,loadingRegister:e.loadingRegister})})})]})})})),sa=function(){var e=Object(ie.a)(Object(re.a)().mark((function e(t,n){var a,r,i,o,s,c,l,d,u,m,b,p,g,j,h,f;return Object(re.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="",e.prev=1,r=ge.a.auth().currentUser,i=r?r.uid:null,r&&i){e.next=6;break}throw new Error;case 6:return o=ge.a.firestore(),s=o.batch(),c=o.collection("leagues").doc(t.leagueID),l=c.collection("leaguePlayers").doc(),d=o.collection("invitations").doc(),u=c.collection("leaguePlayers").doc().id,e.next=14,Promise.all([c.collection("leaguePlayers").where("player.uid","==",t.uid).get(),o.collection("invitations").where("uid","==",t.uid).where("type","==","league").where("leagueID","==",t.leagueID).where("status","==","pending").get()]);case 14:if(m=e.sent,b=Object(ae.a)(m,2),p=b[0],g=b[1],!(p.size>0)){e.next=29;break}if(j=p.docs[0],(h=Object(Z.a)(Object(Z.a)({},j.data()),{},{id:j.id})).deletedAt){e.next=26;break}throw a="This user is already part of your league.",Error();case 26:return e.next=28,j.ref.update({deletedAt:ge.a.firestore.FieldValue.delete()});case 28:return e.abrupt("return",{success:!0,leaguePlayer:Object(Z.a)(Object(Z.a)({},h),{},{deletedAt:void 0})});case 29:if(!(g.size>0)){e.next=32;break}throw a="You already invited this player to join your league.",Error();case 32:return s.set(d,{fuid:u,uid:t.uid,type:"league",leagueID:t.leagueID,leagueName:t.leagueName,leaguePlayerID:l.id,from:{uid:i,displayName:n.displayName},createdAt:ge.a.firestore.FieldValue.serverTimestamp(),status:"pending"}),s.set(l,{player:{fuid:u,displayName:t.displayName||"",photoURL:t.photoURL||""},registeredBy:i,registeredAt:ge.a.firestore.FieldValue.serverTimestamp(),invitation:d.id,invitationPending:!0}),s.update(c,{playerCount:ge.a.firestore.FieldValue.increment(1)}),e.next=37,s.commit();case 37:return e.next=39,l.get();case 39:if(!(f=e.sent).data()){e.next=44;break}return e.abrupt("return",{success:!0,leaguePlayer:Object(Z.a)(Object(Z.a)({},f.data()),{},{id:l.id})});case 44:throw Error();case 45:e.next=50;break;case 47:return e.prev=47,e.t0=e.catch(1),e.abrupt("return",{success:!1,errorMessage:a});case 50:case"end":return e.stop()}}),e,null,[[1,47]])})));return function(t,n){return e.apply(this,arguments)}}(),ca=function(){var e=Object(ie.a)(Object(re.a)().mark((function e(t,n){var a,r,i,o,s,c,l,d,u,m,b;return Object(re.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="",e.prev=1,r=ge.a.auth().currentUser,i=r?r.uid:null,r&&i){e.next=6;break}throw new Error;case 6:if(o=ge.a.firestore(),s=o.batch(),c=o.collection("leagues").doc(t.leagueID),l=c.collection("leaguePlayers").doc(),d=o.collection("invitations").doc(),u=c.collection("leaguePlayers").doc().id,m=void 0,!t.email){e.next=22;break}return e.next=16,o.collection("invitations").where("email","==",t.email).where("leagueID","==",t.leagueID).where("status","==","pending").get();case 16:if(!(e.sent.size>0)){e.next=20;break}throw a="You already invited this email address to join your league.",Error();case 20:m={id:d.id,fuid:u,email:t.email,type:"league",leagueID:t.leagueID,leaguePlayerID:l.id,from:{uid:i,displayName:n.displayName},createdAt:ge.a.firestore.FieldValue.serverTimestamp(),status:"pending"},s.set(d,m);case 22:return s.set(l,{player:{fuid:u,firstName:t.firstName,lastName:t.lastName,displayName:t.firstName+" "+t.lastName},registeredBy:i,registeredAt:ge.a.firestore.FieldValue.serverTimestamp(),invitation:t.email?d.id:null,invitationPending:!!t.email}),s.update(c,{playerCount:ge.a.firestore.FieldValue.increment(1)}),e.next=26,s.commit();case 26:return e.next=28,l.get();case 28:if(!(b=e.sent).data()){e.next=33;break}return e.abrupt("return",{success:!0,leaguePlayer:Object(Z.a)(Object(Z.a)({},b.data()),{},{id:l.id}),invitation:m});case 33:throw Error();case 34:e.next=39;break;case 36:return e.prev=36,e.t0=e.catch(1),e.abrupt("return",{success:!1,errorMessage:a});case 39:case"end":return e.stop()}}),e,null,[[1,36]])})));return function(t,n){return e.apply(this,arguments)}}(),la=function(e,t,n){return function(){var a=Object(ie.a)(Object(re.a)().mark((function a(r){var i;return Object(re.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r(Object(jt.a)("SAVE_LEAGUE_PLAYER_REQUEST")(!0)),i={success:!1,errorMessage:""},!e.uid){a.next=8;break}return a.next=5,sa(e,t);case 5:i=a.sent,a.next=11;break;case 8:return a.next=10,ca(e,t);case 10:i=a.sent;case 11:i.success&&i.leaguePlayer?(r(Object(jt.a)("SAVE_LEAGUE_PLAYER_SUCCESS")({leaguePlayer:i.leaguePlayer,invitation:i.invitation})),n&&n()):(r(Object(jt.a)("SAVE_LEAGUE_PLAYER_REQUEST")(!1)),Object(ht.a)(i.errorMessage?i.errorMessage:"Sorry, a problem occured while trying to save the player info. Please try again or contact an administrator."));case 12:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},da=function(e,t,n){return function(){var a=Object(ie.a)(Object(re.a)().mark((function a(r){var i,o,s,c,l,d;return Object(re.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r(Object(jt.a)("SAVE_LEAGUE_PLAYER_REQUEST")(!0)),a.prev=1,i=ge.a.auth().currentUser,o=i?i.uid:null,i&&o){a.next=6;break}throw new Error;case 6:return s=ge.a.firestore(),c=s.collection("leagues").doc(e.leagueID),l=c.collection("leaguePlayers").doc(e.id),a.next=11,s.runTransaction(function(){var n=Object(ie.a)(Object(re.a)().mark((function n(a){var r,i,c,d,u,m,b;return Object(re.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.get(l);case 2:if(r=n.sent,(i=r.data())&&i.player.fuid){n.next=7;break}return a.update(l,{}),n.abrupt("return",!1);case 7:if(c=!0,!i.invitation){n.next=18;break}return d=s.collection("invitations").doc(i.invitation),n.next=12,a.get(d);case 12:if(u=n.sent,m=u.data()){n.next=17;break}return a.update(d,{}),n.abrupt("return",!1);case 17:m.email!==e.email?a.update(d,{status:"cancelled"}):c=!1;case 18:return b=s.collection("invitations").doc(),e.email&&c&&a.set(b,{fuid:i.player.fuid,email:e.email,type:"league",leagueID:e.leagueID,leagueName:e.leagueName,leaguePlayerID:l.id,from:{uid:o,displayName:t.displayName},createdAt:ge.a.firestore.FieldValue.serverTimestamp(),status:"pending"}),a.update(l,{"player.firstName":e.firstName,"player.lastName":e.lastName,"player.displayName":e.firstName+" "+e.lastName,invitation:e.email?c?b.id:i.invitation:null,invitationPending:!!e.email}),n.abrupt("return",!0);case 22:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());case 11:if(a.sent){a.next=14;break}throw Error();case 14:return a.next=16,l.get();case 16:d=a.sent,r(Object(jt.a)("SAVE_LEAGUE_PLAYER_SUCCESS")({leaguePlayer:Object(Z.a)(Object(Z.a)({},d.data()),{},{id:l.id})})),n&&n(),a.next=25;break;case 21:a.prev=21,a.t0=a.catch(1),r(Object(jt.a)("SAVE_LEAGUE_PLAYER_REQUEST")(!1)),Object(ht.a)("Sorry, a problem occured while trying to save the player info. Please try again or contact an administrator.");case 25:case"end":return a.stop()}}),a,null,[[1,21]])})));return function(e){return a.apply(this,arguments)}}()},ua=function(e,t){return function(){var n=Object(ie.a)(Object(re.a)().mark((function n(a){var r,i,o,s,c,l,d;return Object(re.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a(Object(jt.a)("SAVE_LEAGUE_TEAM_REQUEST")(!0)),n.prev=1,r=ge.a.auth().currentUser,i=r?r.uid:null,r&&i){n.next=6;break}throw new Error;case 6:if(!e.id||!e.teamID){n.next=8;break}throw Error("You cannot edit this team.");case 8:if(o=ge.a.firestore().collection("leagues").doc(e.leagueID),s=e.id?o.collection("leagueTeams").doc(e.id):o.collection("leagueTeams").doc(),!e.id||e.teamID){n.next=15;break}return n.next=13,s.update({"team.name":e.name});case 13:n.next=23;break;case 15:if(e.id){n.next=23;break}return c={},e.players.forEach((function(e){var t=e.fuid||null;t&&(c[t]=e)})),(l=ge.a.firestore().batch()).set(s,{team:{name:e.name,players:c},registeredBy:i,registeredAt:ge.a.firestore.FieldValue.serverTimestamp(),leaguePlayers:e.leaguePlayers}),l.update(o,{teamCount:ge.a.firestore.FieldValue.increment(1)}),n.next=23,l.commit();case 23:return n.next=25,s.get();case 25:d=n.sent,a(Object(jt.a)("SAVE_LEAGUE_TEAM_SUCCESS")(Object(Z.a)(Object(Z.a)({},d.data()),{},{id:s.id}))),t&&t(),n.next=34;break;case 30:n.prev=30,n.t0=n.catch(1),a(Object(jt.a)("SAVE_LEAGUE_TEAM_REQUEST")(!1)),Object(ht.a)("Sorry, a problem occured while trying to save the team info. Please try again or contact an administrator.");case 34:case"end":return n.stop()}}),n,null,[[1,30]])})));return function(e){return n.apply(this,arguments)}}()},ma=function(e,t){return function(){var n=Object(ie.a)(Object(re.a)().mark((function n(a){var r,i,o,s;return Object(re.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(Object(jt.a)("DELETE_LEAGUE_PLAYER_REQUEST")({id:t,loading:!0})),n.prev=1,r=ge.a.firestore(),i=ge.a.firestore().collection("leagues").doc(e),o=r.batch(),s=i.collection("leaguePlayers").doc(t),o.update(s,{deletedAt:ge.a.firestore.FieldValue.serverTimestamp()}),o.update(i,{playerCount:ge.a.firestore.FieldValue.increment(-1)}),n.next=10,o.commit();case 10:a(Object(jt.a)("DELETE_LEAGUE_PLAYER_SUCCESS")({id:t,deletedAt:new ge.a.firestore.Timestamp(0,0)})),n.next=17;break;case 13:n.prev=13,n.t0=n.catch(1),a(Object(jt.a)("DELETE_LEAGUE_PLAYER_REQUEST")({id:t,loading:!1})),Object(ht.a)("Sorry, a problem occured while trying to delete this player. Please try again or contact an administrator.");case 17:case"end":return n.stop()}}),n,null,[[1,13]])})));return function(e){return n.apply(this,arguments)}}()},ba=function(e,t){return function(){var n=Object(ie.a)(Object(re.a)().mark((function n(a){var r,i,o,s;return Object(re.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(Object(jt.a)("DELETE_LEAGUE_TEAM_REQUEST")({id:t,loading:!0})),n.prev=1,r=ge.a.firestore(),i=ge.a.firestore().collection("leagues").doc(e),o=r.batch(),s=i.collection("leagueTeams").doc(t),o.update(s,{deletedAt:ge.a.firestore.FieldValue.serverTimestamp()}),o.update(i,{teamCount:ge.a.firestore.FieldValue.increment(-1)}),n.next=10,o.commit();case 10:a(Object(jt.a)("DELETE_LEAGUE_TEAM_SUCCESS")({id:t,deletedAt:new ge.a.firestore.Timestamp(0,0)})),n.next=17;break;case 13:n.prev=13,n.t0=n.catch(1),a(Object(jt.a)("DELETE_LEAGUE_TEAM_REQUEST")({id:t,loading:!1})),Object(ht.a)("Sorry, a problem occured while trying to delete this team. Please try again or contact an administrator.");case 17:case"end":return n.stop()}}),n,null,[[1,13]])})));return function(e){return n.apply(this,arguments)}}()},pa=function(e){return function(){var t=Object(ie.a)(Object(re.a)().mark((function t(n){var a,r,i;return Object(re.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Object(jt.a)("GET_LEAGUE_INVITATIONS_REQUEST")(!0)),a=ge.a.firestore(),t.prev=2,t.next=5,a.collection("invitations").where("type","==","league").where("leagueID","==",e).where("status","==","pending").get();case 5:r=t.sent,i={},r.forEach((function(e){i[e.id]=Object(Z.a)(Object(Z.a)({},e.data()),{},{id:e.id})})),n(Object(jt.a)("GET_LEAGUE_INVITATIONS_SUCCESS")(i)),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),n(Object(jt.a)("GET_LEAGUE_INVITATIONS_REQUEST")(!1)),Object(ht.a)("Sorry, a problem occured while trying to retrieve registrations data.");case 15:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}()},ga=ce.c.div.withConfig({displayName:"SetupHeader__Container",componentId:"sc-1l5qdnq-0"})(['display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;.titles-container{display:flex;position:relative;:after{content:"";height:2px;width:',";background:",";position:absolute;bottom:0;left:",";transition:left 0.5s ease;}}.button-container .icon{margin-right:0.5rem;}"],(function(e){return 0===e.active?"80px":"70px"}),(function(e){return e.theme.colors.primary}),(function(e){return 0===e.active?"15px":"157px"})),ja=ce.c.h2.withConfig({displayName:"SetupHeader__Title",componentId:"sc-1l5qdnq-1"})(["font-size:2rem;font-weight:600;padding:0rem 1rem;color:",";cursor:",";&:first-child{padding-left:0rem;}"],(function(e){var t=e.active,n=e.theme;return t?n.colors.primary:"inherit"}),(function(e){return e.active?"inherit":"pointer"})),ha=function(e){return Object(fe.jsx)(ga,{active:e.showTeams?1:0,children:Object(fe.jsxs)("div",{className:"titles-container",children:[Object(fe.jsx)(ja,{active:!e.showTeams,onClick:function(){return e.setShowTeams(!1)},children:"Players"}),Object(fe.jsx)(ja,{active:e.showTeams,onClick:function(){return e.setShowTeams(!0)},children:"Teams"})]})})},fa=Object(ce.c)(qt.a).withConfig({displayName:"SetupPanel",componentId:"sc-7gztnv-0"})(["padding:1rem 0rem;width:100%;"]),Oa=ce.c.div.withConfig({displayName:"ResponsiveTableContainerstyle__ResponsiveTableContainer",componentId:"sc-6uou1-0"})(["display:block;width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch;"]),xa=ce.c.table.withConfig({displayName:"SetupTable",componentId:"sc-o59m8d-0"})(["width:100%;th,td{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:0.75rem;padding-left:0.75rem;&:last-child{padding-right:1.5rem;}&:first-child{padding-left:1.5rem;}","}th{padding-top:0.5rem;padding-bottom:1.25rem;color:",";border-bottom:1px solid rgba(0,0,0,0.025);}td{padding-top:0.15rem;padding-bottom:0.15rem;}&.teams-table td:not(.dummy-td){padding-top:0.75rem;padding-bottom:0.75rem;vertical-align:text-top;}.dummy-td{padding-top:0.5rem;}tbody tr:hover:not(.dummy-row){box-shadow:0px 0px 20px 0px rgba(0,0,0,0.035),0px 0px 75px 20px rgba(0,0,0,0.015);}.name-column{max-width:200px;}.status-column:not(th){font-style:italic;}.actions-column{width:1%;text-align:center;}"],he.b.greaterThan("lg")(M||(M=Object(se.a)(["\n      &:last-child {\n        padding-right: 2.25rem;\n      }\n      &:first-child {\n        padding-left: 2.25rem;\n      }\n    "]))),(function(e){return e.theme.colors.darkblues[6]})),ya=n(148),va=ce.c.div.withConfig({displayName:"SetupPlayerForm__Container",componentId:"sc-1gqggo0-0"})(["padding:0.25rem 1.5rem;"]),wa=ce.c.h5.withConfig({displayName:"SetupPlayerForm__Title",componentId:"sc-1gqggo0-1"})(["margin-left:0.25rem;margin-bottom:1rem;font-size:1.15rem;font-weight:600;"]),Sa=ce.c.div.withConfig({displayName:"SetupPlayerForm__Clickable",componentId:"sc-1gqggo0-2"})(["display:inline-block;margin-left:0.25rem;margin-top:0.75rem;cursor:pointer;font-size:0.85rem;font-weight:600;&:hover{text-decoration:underline;}"]),Ta=ce.c.div.withConfig({displayName:"SetupPlayerForm__UserContainer",componentId:"sc-1gqggo0-3"})(["display:flex;justify-content:space-between;align-items:center;margin-top:1rem;.remove-button{padding:0rem 0.25rem;cursor:pointer;opacity:0.5;&:hover{opacity:1;.icon{color:",";}}}"],(function(e){return e.theme.colors.danger})),Na=ce.c.div.withConfig({displayName:"SetupPlayerForm__NewPlayerContainer",componentId:"sc-1gqggo0-4"})([""]),Ca=ce.c.div.withConfig({displayName:"SetupPlayerForm__NameContainer",componentId:"sc-1gqggo0-5"})(["display:flex;margin-top:0.25rem;> div{flex-grow:1;&:first-child{margin-right:0.5rem;}&:nth-child(2){margin-left:0.5rem;}}"]),Pa=ce.c.div.withConfig({displayName:"SetupPlayerForm__ButtonContainer",componentId:"sc-1gqggo0-6"})(["margin-top:1rem;"]),Ia=function(e){var t={};return e.uid?e.displayName||(t.displayName="Sorry, it looks like this user is not valid because we can't find his/her name."):(e.firstName||(t.firstName="Required."),e.lastName||(t.lastName="Required"),e.email&&!Object(ya.e)(e.email)&&(t.email="Invalid email address")),t},Ea=function(e){var t=Object(ee.useState)(!1),n=Object(ae.a)(t,2),a=n[0],r=n[1];return Object(fe.jsx)(va,{children:Object(fe.jsx)(Ze.b,{onSubmit:function(t,n){return e.saveLeaguePlayer(t,(function(){return setTimeout((function(){return setTimeout((function(){n.setConfig("keepDirtyOnReinitialize",!1),n.reset(),n.setConfig("keepDirtyOnReinitialize",!0)}))}))}))},initialValues:{leagueID:e.league.id,leagueName:e.league.name},keepDirtyOnReinitialize:!0,validate:Ia,render:function(t){var n,i,o=t.form,s=t.handleSubmit,c=t.values;return Object(fe.jsx)(tt.a,{active:e.savingLeaguePlayer,whiteOverlay:!0,children:Object(fe.jsxs)("form",{onSubmit:s,children:[Object(fe.jsx)(wa,{children:"Add a player to your league"}),Object(fe.jsx)(Ze.a,{name:"leagueID",type:"hidden",component:"input"}),Object(fe.jsx)(Ze.a,{name:"leagueName",type:"hidden",component:"input"}),Object(fe.jsx)(Ze.a,{name:"displayName",type:"hidden",component:"input"}),Object(fe.jsx)(Ze.a,{name:"uid",type:"hidden",component:"input"}),Object(fe.jsx)(Ze.a,{name:"photoURL",type:"hidden",component:"input"}),!a&&Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{children:Object(fe.jsx)(Lt.d,{onChange:function(e){e&&(o.change("displayName",e.displayName),o.change("uid",e.uid),o.change("photoURL",e.photoURL))},placeholder:"Find a user on Fwango...",clearInputOnSelect:!0})}),o.getState().submitFailed&&o.getState().hasValidationErrors&&(null===(n=o.getState().errors)||void 0===n?void 0:n.displayName)&&Object(fe.jsxs)(St.a,{children:[Object(fe.jsx)("i",{className:"fas fa-exclamation-circle icon"}),null===(i=o.getState().errors)||void 0===i?void 0:i.displayName]})]}),c.uid&&c.displayName&&Object(fe.jsxs)(Ta,{children:[Object(fe.jsx)(Dt.a,{sx:{py:2},children:Object(fe.jsx)(Rt.b,{uid:c.uid})}),Object(fe.jsx)("div",{className:"remove-button",onClick:function(){o.change("displayName",""),o.change("uid",""),o.change("photoURL","")},children:Object(fe.jsx)("i",{className:"fas fa-times icon"})})]}),a&&Object(fe.jsxs)(Na,{children:[Object(fe.jsxs)(Ca,{children:[Object(fe.jsx)(Ze.a,{name:"firstName",render:function(e){var t=e.input,n=e.meta;return Object(fe.jsx)(St.b,{input:t,meta:n,placeholder:"First name",background:he.c.colors.lightgray})}}),Object(fe.jsx)(Ze.a,{name:"lastName",render:function(e){var t=e.input,n=e.meta;return Object(fe.jsx)(St.b,{input:t,meta:n,placeholder:"Last name",background:he.c.colors.lightgray})}})]}),Object(fe.jsxs)("div",{style:{marginBottom:"1rem"},children:[Object(fe.jsx)(Ze.a,{name:"email",render:function(e){var t=e.input,n=e.meta;return Object(fe.jsx)(St.b,{input:t,meta:n,placeholder:"Email address (optional)",background:he.c.colors.lightgray})}}),Object(fe.jsx)(ct.a,{style:{lineHeight:1.25,marginTop:"0.75rem"},children:"If you provide an email address, we will send an invitation to join your league on Fwango."})]})]}),(a||c.uid&&c.displayName)&&Object(fe.jsx)(Pa,{children:Object(fe.jsx)(Ue.a,{type:"submit",theme:"primary",loading:e.savingLeaguePlayer,children:"Add player"})}),!c.uid&&Object(fe.jsxs)(Sa,{onClick:function(){return r((function(e){return!e}))},children:[Object(fe.jsx)("i",{className:"fas fa-angle-right",style:{marginRight:"0.25rem"}}),a?"Find a user on Fwango":"Create/invite a player"]})]})})}})})},_a=ce.c.h3.withConfig({displayName:"SetupEditPlayerModal__Title",componentId:"sc-uqycwn-0"})(["text-align:center;margin-bottom:1.5rem;"]),ka=ce.c.div.withConfig({displayName:"SetupEditPlayerModal__ButtonContainer",componentId:"sc-uqycwn-1"})(["margin-top:1.25rem;text-align:center;"]),Ra=function(e){var t={};return e.firstName||(t.firstName="Required."),e.firstName&&e.firstName.length<2&&(t.firstName="Minimum of 2 characters needed."),e.lastName||(t.lastName="Required."),e.lastName&&e.lastName.length<2&&(t.lastName="Minimum of 2 characters needed."),e.email&&!Object(ya.e)(e.email)&&(t.email="Please provide a valid email address."),t},La=function(e){var t=Object(ee.useState)(!0),n=Object(ae.a)(t,2),a=n[0],r=n[1],i=Object(ee.useState)(void 0),o=Object(ae.a)(i,2),s=o[0],c=o[1];return Object(ee.useEffect)((function(){var t=function(){var e=Object(ie.a)(Object(re.a)().mark((function e(t){var n,a;return Object(re.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge.a.firestore().collection("invitations").doc(t).get();case 2:(n=e.sent).exists&&n.data()&&(a=Object(Z.a)(Object(Z.a)({},n.data()),{},{id:n.id}),c(a)),r(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();e.leaguePlayer.invitation?t(e.leaguePlayer.invitation):r(!1)}),[e.leaguePlayer.invitation]),Object(fe.jsx)(Xe.a,{isOpen:e.isOpen,onRequestClose:e.onRequestClose,children:Object(fe.jsx)(Ze.b,{onSubmit:function(t,n){return e.editLeaguePlayer(t,(function(){return setTimeout((function(){return setTimeout((function(){n.setConfig("keepDirtyOnReinitialize",!1),n.reset(),n.setConfig("keepDirtyOnReinitialize",!0),e.onRequestClose()}))}))}))},initialValues:{leagueID:e.league.id,leagueName:e.league.name,id:e.leaguePlayer.id,firstName:e.leaguePlayer.player.firstName||"",lastName:e.leaguePlayer.player.lastName||"",email:s?s.email:""},keepDirtyOnReinitialize:!0,validate:Ra,render:function(t){var n=t.handleSubmit;return Object(fe.jsx)(tt.a,{active:e.savingLeaguePlayer||a,whiteOverlay:!0,children:Object(fe.jsxs)("form",{onSubmit:n,children:[Object(fe.jsx)(_a,{children:"Edit player"}),Object(fe.jsx)(Ze.a,{name:"leagueID",type:"hidden",component:"input"}),Object(fe.jsx)(Ze.a,{name:"leagueName",type:"hidden",component:"input"}),Object(fe.jsx)(Ze.a,{name:"id",type:"hidden",component:"input"}),Object(fe.jsxs)("div",{children:[Object(fe.jsxs)(Ca,{children:[Object(fe.jsx)(Ze.a,{name:"firstName",render:function(e){var t=e.input,n=e.meta;return Object(fe.jsx)(St.b,{input:t,meta:n,placeholder:"First name",background:he.c.colors.lightgray})}}),Object(fe.jsx)(Ze.a,{name:"lastName",render:function(e){var t=e.input,n=e.meta;return Object(fe.jsx)(St.b,{input:t,meta:n,placeholder:"Last name",background:he.c.colors.lightgray})}})]}),Object(fe.jsxs)("div",{style:{marginBottom:"1rem"},children:[Object(fe.jsx)(Ze.a,{name:"email",render:function(e){var t=e.input,n=e.meta;return Object(fe.jsx)(St.b,{input:t,meta:n,placeholder:"Email address (optional)",background:he.c.colors.lightgray})}}),Object(fe.jsx)(ct.a,{style:{lineHeight:1.25,marginTop:"0.75rem"},children:"If you provide an email address, we will send an invitation to join your league on Fwango."})]})]}),Object(fe.jsx)(ka,{children:Object(fe.jsx)(Ue.a,{type:"submit",theme:"primary",loading:e.savingLeaguePlayer,children:"Save"})})]})})}})})},Ma=ce.c.div.withConfig({displayName:"SetupPlayerTable__ActionButton",componentId:"sc-7xnjn3-0"})(["display:inline-flex;justify-content:center;align-items:center;cursor:pointer;padding:0.25rem 0.5rem;border-radius:0.25rem;line-height:1;margin:0rem 0.25rem;background:",";&:hover{color:",";}"],(function(e){return e.theme.colors.lightgray}),(function(e){var t=e.type,n=e.theme;return"danger"===t?n.colors.danger:"inherit"})),Da=Object(ce.c)(Rt.b).withConfig({displayName:"SetupPlayerTable__StyledUserItem",componentId:"sc-7xnjn3-1"})(["padding-top:0.5rem;padding-bottom:0.5rem;.name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}"]),Aa=function(e){var t=Object(ee.useState)(void 0),n=Object(ae.a)(t,2),a=n[0],r=n[1];return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(Oa,{children:Object(fe.jsxs)(xa,{children:[Object(fe.jsx)("thead",{children:Object(fe.jsxs)("tr",{children:[Object(fe.jsx)("th",{className:"name-column",children:"Name"}),Object(fe.jsx)("th",{className:"status-column",children:"Status"}),Object(fe.jsx)("th",{className:"date-column",children:"Added on"}),Object(fe.jsx)("th",{className:"actions-column",children:"Actions"})]})}),Object(fe.jsxs)("tbody",{children:[Object(fe.jsx)("tr",{className:"dummy-row",children:Object(fe.jsx)("td",{className:"dummy-td",colSpan:4})}),mt()(e.leaguePlayers,"player.displayName").map((function(t){if(t.deletedAt)return null;var n=t.player,a=t.invitation,i=t.invitationPending,o=t.acceptedInvitation,s=t.invitationStatus,c=t.registeredWith,l=void 0;c&&(l=e.leagueTeams.find((function(e){return e.team.id===c})));var d="",u=void 0;return!n.uid&&a&&i&&(u=e.pendingInvitations[a])&&u.email&&(d=u.email),Object(fe.jsxs)("tr",{children:[Object(fe.jsx)("td",{className:"name-column",children:Object(fe.jsx)(Da,{user:t.player})}),Object(fe.jsxs)("td",{className:"status-column",children:[!n.uid&&!a&&!c&&"Created by admin",!n.uid&&a&&(i||"pending"===s)&&Object(fe.jsxs)("div",{style:{lineHeight:d?1.15:"inherit"},children:[Object(fe.jsx)("span",{children:"Invitation pending"}),d&&Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("br",{}),Object(fe.jsx)("span",{style:{fontSize:"0.85rem"},children:d})]})]}),a&&(!i&&o||"accepted"===s)&&"Accepted invitation",a&&(!i&&!o||"denied"===s)&&"Invitation declined",n.uid&&!a&&!c&&"Registered",c&&Object(fe.jsxs)("span",{children:["Registered with"," ",l?Object(fe.jsx)("span",{style:{fontWeight:600},children:l.team.name}):"a team"]})]}),Object(fe.jsx)("td",{className:"date-column",children:qe()(t.registeredAt.toDate()).format("MMMM Do, YYYY")}),Object(fe.jsxs)("td",{className:"actions-column",children:[!t.player.uid&&!t.registeredWith&&!t.player.photoURL&&(!u||u.email)&&Object(fe.jsx)(Ma,{title:"Edit player",onClick:function(){return r(t)},children:Object(fe.jsx)("i",{className:"fas fa-user-edit icon"})}),Object(fe.jsx)(Ma,{type:"danger",title:"Remove player from league",onClick:function(){return function(t){var n=[];e.leagueTeams.forEach((function(e){!e.deletedAt&&e.leaguePlayers.includes(t.id)&&n.push(e)}));var a=Object(fe.jsxs)("div",{children:["Are you sure you want to remove"," ",Object(fe.jsx)("span",{style:{fontWeight:900},children:t.player.displayName})," from your league?"]});n.length>0&&(a=Object(fe.jsxs)("div",{children:["Are you sure you want to remove"," ",Object(fe.jsx)("span",{style:{fontWeight:900},children:t.player.displayName})," from your league? This player is part of the following team(s):",Object(fe.jsx)("div",{style:{margin:"1rem 0"},children:n.map((function(e){return Object(fe.jsxs)("div",{style:{padding:"0.15rem 0.5rem",fontWeight:900},children:[Object(fe.jsx)("i",{className:"fas fa-user-friends",style:{marginRight:"0.75rem"}}),e.team.name]},e.id)}))}),Object(fe.jsxs)(ct.a,{children:["The player will not be removed from the team(s) and the team(s) will stay the same, but the player will be removed"," ",(t.player.uid||t.invitation)&&"(thus loose access)"," to your league."]})]})),Object(st.a)(a,{proceedText:"Remove",proceedTheme:"danger"}).then((function(){e.deleteLeaguePlayer(e.league.id,t.id)}))}(t)},children:Object(fe.jsx)("i",{className:"far fa-trash-alt icon"})})]})]},t.id+t.player.displayName)}))]})]})}),!!a&&Object(fe.jsx)(La,{isOpen:!0,onRequestClose:function(){return r(void 0)},league:e.league,leaguePlayer:a,editLeaguePlayer:e.editLeaguePlayer,savingLeaguePlayer:e.savingLeaguePlayer})]})},Fa=n(16),za=n(24),Ga=n(25),Ua=n(44),Ba=n(71),qa=n(280),Wa=n.n(qa),Ya=n(198),Va=Object(ce.c)(Lt.a).withConfig({displayName:"SearchUserFromLeague__StyledAutosuggestContainer",componentId:"sc-18t5hlv-0"})([".search-user-suggestion{cursor:pointer;&:hover{background-color:",";}}"],(function(e){return e.theme.colors.lightgray})),Ha=function(e){return""},Qa=function(e){Object(Ua.a)(n,e);var t=Object(Ba.a)(n);function n(){var e;Object(za.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={value:"",suggestions:[],isLoading:!1},e.onChange=function(t,n){var a=n.newValue;e.setState({value:a})},e.onSuggestionsFetchRequested=function(t){var n=t.value;!n||n.length<2?e.setState({suggestions:[]}):e.loadSuggestions(n)},e.onSuggestionsClearRequested=function(){e.setState({suggestions:[]})},e.loadSuggestions=function(){var t=Object(ie.a)(Object(re.a)().mark((function t(n){var a;return Object(re.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({isLoading:!0}),a=e.props.leaguePlayers.filter((function(e){return!e.deletedAt&&e.player.displayName.toLowerCase().includes(n.toLowerCase())})),e.setState({isLoading:!1,suggestions:a});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.selectLeaguePlayer=function(t){e.setState({value:"",suggestions:[]});var n=e.props.confirmationMessage;if(n){var a=Object(fe.jsx)("div",{style:{fontWeight:400},children:"string"===typeof n?n:n(t)});Object(st.a)(a).then((function(){e.props.onSelect(t)}))}else e.props.onSelect(t)},e.renderSuggestion=function(t){return"string"===typeof t?Object(fe.jsxs)("div",{className:"search-user-suggestion",style:{display:"flex",padding:"0.5rem",alignItems:"center",justifyContent:"center",height:"46px",cursor:"inherit"},onClick:function(){},children:[Object(fe.jsx)("i",{className:"far fa-frown",style:{marginRight:"0.5rem"}}),"No player found"]}):Object(fe.jsxs)("div",{className:"search-user-suggestion",style:{display:"flex",padding:"0.5rem",height:"46px"},onClick:function(){return e.selectLeaguePlayer(t)},children:[Object(fe.jsx)("div",{children:Object(fe.jsx)(de.a,{uid:t.player.uid,size:30})}),Object(fe.jsx)("div",{style:{marginLeft:"1rem",flex:"1 1 auto"},children:t.player.displayName})]})},e}return Object(Ga.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.value,a=t.suggestions,r=t.isLoading,i=Object(Fa.a)(a);0===i.length&&n.length>=3&&(r?i.push("loading"):i.push("empty"));var o={placeholder:"",value:n,onChange:this.onChange};return Object(fe.jsx)(Va,{children:Object(fe.jsx)(Wa.a,{suggestions:a.length>0?a:i,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,getSuggestionValue:Ha,renderSuggestion:this.renderSuggestion,highlightFirstSuggestion:!0,inputProps:o,renderInputComponent:function(t){return Object(fe.jsx)(Ya.b,Object(Z.a)(Object(Z.a)({},t),{},{id:"search-user-input",placeholder:e.props.label,onChange:function(e){return t.onChange(e,{newValue:e.target.value,method:"type"})},required:!1,background:e.props.inputBackground}))}})})}}]),n}(te.a.Component),Ka=Qa,$a=ce.c.div.withConfig({displayName:"SetupTeamForm__Container",componentId:"sc-11gg5xv-0"})(["padding:0.25rem 1.5rem;"]),Ja=ce.c.h5.withConfig({displayName:"SetupTeamForm__Title",componentId:"sc-11gg5xv-1"})(["margin-left:0.25rem;margin-bottom:1rem;font-size:1.15rem;font-weight:600;"]),Xa=ce.c.div.withConfig({displayName:"SetupTeamForm__PlayerContainer",componentId:"sc-11gg5xv-2"})(["display:flex;justify-content:space-between;align-items:center;.remove-button{padding:0rem 0.25rem;cursor:pointer;opacity:0.5;&:hover{opacity:1;.icon{color:",";}}}"],(function(e){return e.theme.colors.danger})),Za=ce.c.div.withConfig({displayName:"SetupTeamForm__ButtonContainer",componentId:"sc-11gg5xv-3"})(["margin-top:1rem;"]),er=function(e,t,n){var a=Object(ae.a)(e,2),r=a[0],i=a[1];(0,n.changeValue)(t,r,(function(e){return[].concat(Object(Fa.a)(e.slice(0,i)),Object(Fa.a)(e.slice(i+1)))}))},tr=function(e){var t={};return e.name||(t.name="Required"),t},nr=function(e){return Object(fe.jsx)($a,{children:Object(fe.jsx)(Ze.b,{onSubmit:function(t,n){e.saveLeagueTeam(t,(function(){return setTimeout((function(){n.setConfig("keepDirtyOnReinitialize",!1),n.reset(),n.setConfig("keepDirtyOnReinitialize",!0)}))}))},initialValues:{leagueID:e.leagueID,name:"",players:[],leaguePlayers:[]},mutators:{removeArrayElement:er},keepDirtyOnReinitialize:!0,validate:tr,render:function(t){var n=t.form,a=t.handleSubmit,r=t.values;return Object(fe.jsx)(tt.a,{active:e.savingLeagueTeam,whiteOverlay:!0,children:Object(fe.jsxs)("form",{onSubmit:a,children:[Object(fe.jsx)(Ja,{children:"Add a team to your league"}),Object(fe.jsx)(Ze.a,{name:"leagueID",type:"hidden",component:"input"}),Object(fe.jsx)(Ze.a,{name:"name",render:function(e){var t=e.input,n=e.meta;return Object(fe.jsx)(St.b,{input:t,meta:n,placeholder:"Team name",background:he.c.colors.lightgray})}}),Object(fe.jsxs)("div",{style:{marginBottom:"1rem"},children:[Object(fe.jsx)(Ka,{onSelect:function(e){n.change("players",[].concat(Object(Fa.a)(r.players),[e.player])),n.change("leaguePlayers",[].concat(Object(Fa.a)(r.leaguePlayers),[e.id]))},label:"Add players from your league...",hideLabel:!0,icon:Object(fe.jsx)("i",{className:"far fa-user-circle"}),inputBackground:he.c.colors.lightgray,leaguePlayers:e.leaguePlayers}),Object(fe.jsx)(ct.a,{style:{lineHeight:1.25,marginTop:"0.75rem"},children:"You can only create a team with players from your league. If a player is not in your league, you must first add him/her."}),Object(fe.jsx)(ct.a,{style:{lineHeight:1.25,marginTop:"0.35rem"},children:"After a team is created, you cannot edit its players."})]}),r.players&&r.players[0]&&r.players.map((function(e,t){return Object(fe.jsxs)(Xa,{children:[Object(fe.jsx)(Dt.a,{sx:{py:2},children:Object(fe.jsx)(Rt.b,{user:e})}),Object(fe.jsx)("div",{className:"remove-button",onClick:function(){n.mutators.removeArrayElement("players",t)},children:Object(fe.jsx)("i",{className:"fas fa-times icon"})})]},e.displayName)})),Object(fe.jsx)(Za,{children:Object(fe.jsx)(Ue.a,{type:"submit",theme:"primary",loading:e.savingLeagueTeam,children:"Add team"})})]})})}})})},ar=ce.c.h3.withConfig({displayName:"SetupEditTeamModal__Title",componentId:"sc-1tjdc90-0"})(["text-align:center;margin-bottom:1.5rem;"]),rr=ce.c.div.withConfig({displayName:"SetupEditTeamModal__ButtonContainer",componentId:"sc-1tjdc90-1"})(["margin-top:1.25rem;text-align:center;"]),ir=function(e){var t={};return e.name||(t.name="Required"),t},or=function(e){return Object(fe.jsx)(Xe.a,{isOpen:e.isOpen,onRequestClose:e.onRequestClose,children:Object(fe.jsx)(Ze.b,{onSubmit:function(t,n){e.saveLeagueTeam(t,(function(){return setTimeout((function(){n.setConfig("keepDirtyOnReinitialize",!1),n.reset(),n.setConfig("keepDirtyOnReinitialize",!0),e.onRequestClose()}))}))},initialValues:{leagueID:e.leagueID,id:e.leagueTeam.id,name:e.leagueTeam.team.name,players:Object.values(e.leagueTeam.team.players),leaguePlayers:e.leagueTeam.leaguePlayers},keepDirtyOnReinitialize:!0,validate:ir,render:function(t){t.form;var n=t.handleSubmit,a=t.values;return Object(fe.jsx)(tt.a,{active:e.savingLeagueTeam,whiteOverlay:!0,children:Object(fe.jsxs)("form",{onSubmit:n,children:[Object(fe.jsx)(ar,{children:"Edit team"}),Object(fe.jsx)(Ze.a,{name:"leagueID",type:"hidden",component:"input"}),Object(fe.jsx)(Ze.a,{name:"id",type:"hidden",component:"input"}),Object(fe.jsx)("div",{style:{marginBottom:"1rem"},children:Object(fe.jsx)(Ze.a,{name:"name",render:function(e){var t=e.input,n=e.meta;return Object(fe.jsx)(St.b,{input:t,meta:n,placeholder:"Team name",background:he.c.colors.lightgray})}})}),a.players&&a.players[0]&&a.players.map((function(e,t){return Object(fe.jsx)(Xa,{children:Object(fe.jsx)(Dt.a,{sx:{py:2},children:Object(fe.jsx)(Rt.b,{user:e})})},e.displayName)})),Object(fe.jsx)(ct.a,{children:"After a team is created, you cannot edit its players."}),Object(fe.jsx)(rr,{children:Object(fe.jsx)(Ue.a,{type:"submit",theme:"primary",loading:e.savingLeagueTeam,children:"Save"})})]})})}})})},sr=function(e){var t=Object(ee.useState)(void 0),n=Object(ae.a)(t,2),a=n[0],r=n[1];return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(Oa,{children:Object(fe.jsxs)(xa,{className:"teams-table",children:[Object(fe.jsx)("thead",{children:Object(fe.jsxs)("tr",{children:[Object(fe.jsx)("th",{className:"name-column",children:"Name"}),Object(fe.jsx)("th",{className:"players-column",children:"Players"}),Object(fe.jsx)("th",{className:"status-column",children:"Status"}),Object(fe.jsx)("th",{className:"date-column",children:"Added on"}),Object(fe.jsx)("th",{className:"actions-column",children:"Actions"})]})}),Object(fe.jsxs)("tbody",{children:[Object(fe.jsx)("tr",{className:"dummy-row",children:Object(fe.jsx)("td",{className:"dummy-td",colSpan:4})}),mt()(e.leagueTeams,"team.name").map((function(t){if(t.deletedAt)return null;var n=t.team,a=t.leaguePlayers;return Object(fe.jsxs)("tr",{children:[Object(fe.jsxs)("td",{className:"name-column",children:[Object(fe.jsx)("i",{className:"fas fa-user-friends",style:{marginRight:"0.75rem"}}),n.name]}),Object(fe.jsx)("td",{className:"players-column",children:Object(fe.jsxs)("div",{children:[a.map((function(t,n){var r=e.leaguePlayers.find((function(e){return e.id===t}));return r?r.player.displayName+(n+1<a.length?", ":""):null})),0===a.length&&"-"]})}),Object(fe.jsxs)("td",{className:"status-column",children:[!n.id&&"Created by admin",n.id&&"Registered"]}),Object(fe.jsx)("td",{className:"date-column",children:qe()(t.registeredAt.toDate()).format("MMMM Do, YYYY")}),Object(fe.jsxs)("td",{className:"actions-column",children:[!n.id&&Object(fe.jsx)(Ma,{title:"Edit team",onClick:function(){return r(t)},children:Object(fe.jsx)("i",{className:"fas fa-user-edit icon"})}),Object(fe.jsx)(Ma,{type:"danger",title:"Remove team from league",onClick:function(){return function(t){var n=Object(fe.jsxs)("div",{children:["Are you sure you want to remove"," ",Object(fe.jsx)("span",{style:{fontWeight:900},children:t.team.name})," from your league?"]});Object(st.a)(n,{proceedText:"Remove",proceedTheme:"danger"}).then((function(){e.deleteLeagueTeam(e.leagueID,t.id)}))}(t)},children:Object(fe.jsx)("i",{className:"far fa-trash-alt icon"})})]})]},t.id+t.team.name)}))]})]})}),!!a&&Object(fe.jsx)(or,{isOpen:!0,onRequestClose:function(){return r(void 0)},leagueID:e.leagueID,leagueTeam:a,leaguePlayers:e.leaguePlayers,saveLeagueTeam:e.saveLeagueTeam,savingLeagueTeam:e.savingLeagueTeam})]})},cr=n(467),lr=ce.c.div.withConfig({displayName:"LeagueSetup__SetupContainer",componentId:"sc-1ms86c7-0"})([""]),dr=Object(ne.b)((function(e){return{league:e.league.data,leaguePlayers:Object(cr.b)(e.league),loadingPlayers:!!e.league.loading.getLeaguePlayers,loadingTeams:!!e.league.loading.getLeagueTeams,savingLeaguePlayer:!!e.league.loading.saveLeaguePlayer,savingLeagueTeam:!!e.league.loading.saveLeagueTeam}}),(function(e){return Object(Me.b)({getLeaguePlayers:yn.i,getLeagueTeams:yn.j,saveLeaguePlayer:la,saveLeagueTeam:ua,editLeaguePlayer:da,deleteLeaguePlayer:ma,deleteLeagueTeam:ba,getPendingInvitations:pa},e)}))((function(e){var t=Object(yt.b)().userFromDB,n=Object(ee.useState)(!1),a=Object(ae.a)(n,2),r=a[0],i=a[1],o=Object(be.h)(),s=Object(ee.useContext)(pe.b).role,c=s===pe.a.admin||s===pe.a.moderator,l=e.league,d=e.getLeaguePlayers,u=e.getLeagueTeams,m=e.getPendingInvitations,b=l?l.id:"";if(Object(ee.useEffect)((function(){b&&c&&(d(b),u(b),m(b))}),[b,c,d,u,m]),!l)return o.push("/"),null;if(!c)return o.push("/".concat(l.url)),null;return Object(fe.jsxs)(lr,{children:[Object(fe.jsx)(ha,{showTeams:r,setShowTeams:i}),Object(fe.jsx)("div",{style:{paddingBottom:"1rem"},children:Object(fe.jsx)(fa,{children:r?Object(fe.jsx)(nr,{leagueID:l.id,saveLeagueTeam:e.saveLeagueTeam,savingLeagueTeam:e.savingLeagueTeam,leaguePlayers:e.leaguePlayers}):Object(fe.jsx)(Ea,{league:l,saveLeaguePlayer:function(n,a){if(n.uid&&e.leaguePlayers.find((function(e){return e.player.uid===n.uid&&!e.deletedAt})))return void Object(ht.a)("This user is already part of your league.");t&&e.saveLeaguePlayer(n,t,a)},savingLeaguePlayer:e.savingLeaguePlayer})})}),Object(fe.jsx)(fa,{children:r?Object(fe.jsx)(sr,{leagueID:l.id,leaguePlayers:e.leaguePlayers,leagueTeams:Object.values(l.leagueTeams||{}),deleteLeagueTeam:e.deleteLeagueTeam,saveLeagueTeam:e.saveLeagueTeam,savingLeagueTeam:e.savingLeagueTeam}):Object(fe.jsx)(Aa,{league:l,leaguePlayers:e.leaguePlayers,leagueTeams:Object.values(l.leagueTeams||{}),pendingInvitations:l.pendingInvitations||{},deleteLeaguePlayer:e.deleteLeaguePlayer,editLeaguePlayer:function(n,a){t&&e.editLeaguePlayer(n,t,a)},savingLeaguePlayer:e.savingLeaguePlayer})})]})})),ur=n(423),mr=n(133),br=n.n(mr),pr=n(108),gr=ce.c.div.withConfig({displayName:"SessionList__SessionItem",componentId:"sc-xvg8pv-0"})(["display:flex;"]),jr=Object(ce.c)(ur.a).withConfig({displayName:"SessionList__StyledCheckbox",componentId:"sc-xvg8pv-1"})(["font-size:1rem;",""],he.b.greaterThan("md")(D||(D=Object(se.a)(["\n    font-size: 1.15rem;\n  "])))),hr=function(e){var t=e.sessions,n=e.selectedSessions,a=Object(fe.jsxs)("div",{children:[Object(fe.jsx)(pr.TextRow,{color:"#e7ecf5",style:{width:280,height:30}}),Object(fe.jsx)(pr.TextRow,{color:"#e7ecf5",style:{width:280,height:30}}),Object(fe.jsx)(pr.TextRow,{color:"#e7ecf5",style:{width:280,height:30}})]});return Object(fe.jsx)("div",{children:Object(fe.jsxs)(br.a,{ready:!!t&&!!n,customPlaceholder:a,showLoadingAnimation:!0,children:[t&&n&&mt()(t,"date").map((function(a){var r=a.date.toDate(),i=qe()(r).format("dddd, MMMM Do");return Object(fe.jsx)(gr,{children:Object(fe.jsxs)(jr,{children:[Object(fe.jsx)("input",{type:"checkbox",checked:n.includes(a.id),onChange:function(r){return function(a,r){var i=Object(Fa.a)(n||[]);if(r)i.push(a);else{var o=i.indexOf(a);o>-1&&i.splice(o,1)}var s=[];t&&i.forEach((function(e){var n=t.find((function(t){return t.id===e}));n&&!s.includes(n.format.name)&&s.push(n.format.name)})),e.setSelectedSessions(i),1===s.length?e.setFormatUsed(s[0]):e.setFormatUsed(void 0)}(a.id,r.target.checked)}}),Object(fe.jsx)("span",{children:i})]})},a.id)})),t&&0===t.length&&Object(fe.jsx)("div",{children:"No sessions yet."})]})})},fr=n(1175),Or=Object(ce.c)(qt.a).withConfig({displayName:"StatisticsPanel",componentId:"sc-1hdh7gm-0"})(["width:100%;margin-top:1rem;padding:1rem 0.75rem 1rem 1rem;",""],he.b.greaterThan("md")(A||(A=Object(se.a)(["\n    padding: 1.25rem 1.25rem 1.25rem 1.75rem;\n  "])))),xr=n(932),yr=n(962),vr=ce.c.div.withConfig({displayName:"StatisticsTable__ResponsiveTableContainer",componentId:"sc-1x4qzo1-0"})(["display:block;width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch;"]),wr=ce.c.table.withConfig({displayName:"StatisticsTable__StyledTable",componentId:"sc-1x4qzo1-1"})(["width:100%;font-weight:600;font-size:1.1rem;thead tr th{opacity:0.3;}td,th{white-space:nowrap;min-width:2.5rem;text-align:center;width:1%;max-width:100px;padding-right:0.25rem;padding-left:0.25rem;padding-bottom:0.5rem;&:last-child{padding-right:0;}}.rank{padding:0rem 0rem 0.5rem;min-width:auto;div{display:flex;align-items:center;justify-content:center;height:25px;width:25px;border-radius:5rem;text-align:center;background-color:",";font-size:0.9rem;}}.team-name{text-align:left;padding-left:1.25rem;padding-right:0.5rem;width:99%;min-width:150px;overflow:hidden;text-overflow:ellipsis;}",""],(function(e){return e.theme.colors.lightgray}),he.b.greaterThan("md")(F||(F=Object(se.a)(["\n    td,\n    th {\n      min-width: 3.25rem;\n    }\n  "])))),Sr=ce.c.div.withConfig({displayName:"StatisticsTable__SpinnerContainer",componentId:"sc-1x4qzo1-2"})(["display:flex;flex-direction:column;align-items:center;padding:3rem 0rem;.message{margin-top:1.5rem;}"]),Tr=function(e){var t=e.stats,n=e.selectedSessions,a=e.leaguePlayers,r=e.leagueTeams,i=e.showTeams,o=e.formatUsed,s=Object(ee.useMemo)((function(){var e={};if(t&&n){Object.entries(t).forEach((function(t){var o=Object(ae.a)(t,2),s=o[0],c=o[1];n.includes(s)&&Object.entries(c).forEach((function(t){var n=Object(ae.a)(t,2),o=n[0],s=n[1];i&&r&&r[o]&&r[o].deletedAt||!i&&a&&a[o]&&a[o].deletedAt||(e[o]||(e[o]={}),Object.entries(s).forEach((function(t){var n=Object(ae.a)(t,2),a=n[0],r=n[1];e[o][a]=(e[o][a]||0)+r})))}))})),i&&r?Object.values(r).forEach((function(t){t.deletedAt||e[t.id]||(e[t.id]={})})):!i&&a&&Object.values(a).forEach((function(t){t.deletedAt||e[t.id]||(e[t.id]={})}));var s=Object.entries(e).map((function(e){var t=Object(ae.a)(e,2);return{id:t[0],stats:t[1]}}));return o?yr.a[o].orderAllTeams(s):mt()(s,[function(e){return(e.stats.wins||0)+(e.stats.losses||0)+(e.stats.draws||0)>0?e.stats.wins:-1},function(e){return e.stats.pf||0===e.stats.pf?e.stats.pf-e.stats.pa:-4}],["desc","desc"])}return[]}),[t,n,i,r,a,o]),c=function(t){return e.showTeams?e.leagueTeams&&e.leagueTeams[t]?e.leagueTeams[t].team.name:"-":e.leaguePlayers&&e.leaguePlayers[t]?e.leaguePlayers[t].player.displayName:"-"};if(!t||!n||i&&!r||!i&&!a)return Object(fe.jsxs)(Sr,{children:[Object(fe.jsx)(Xt.a,{}),Object(fe.jsx)("div",{className:"message",children:"Preparing statistics..."})]});var l=function(e){return(e.wins||0)+(e.losses||0)+(e.draws||0)},d=Math.floor(1e5*Math.random());return Object(fe.jsxs)(vr,{children:[Object(fe.jsxs)(wr,{children:[Object(fe.jsx)("thead",{children:Object(fe.jsxs)("tr",{children:[Object(fe.jsx)("th",{colSpan:2}),("teamPoolPlay"===o||"playerKOTC"===o&&!i)&&Object(fe.jsx)("th",{title:"Average Pool",children:"AP"}),Object(fe.jsx)("th",{title:"Wins",children:"W"}),Object(fe.jsx)("th",{title:"Losses",children:"L"}),Object(fe.jsx)("th",{title:"Draws",children:"D"}),Object(fe.jsx)("th",{title:"Points for",children:"PF"}),Object(fe.jsx)("th",{title:"Points against",children:"PA"}),Object(fe.jsx)("th",{title:"Point differential",children:"+/-"})]})}),s.length>0&&Object(fe.jsx)(xr.b,{flipKey:d,element:"tbody",spring:"veryGentle",children:s.map((function(e,t){var n=e.id,a=e.stats;return Object(fe.jsx)(xr.a,{flipId:n,children:function(e){return Object(ee.createElement)("tr",Object(Z.a)(Object(Z.a)({},e),{},{key:n}),Object(fe.jsx)("td",{className:"rank",children:Object(fe.jsx)("div",{children:t+1})}),Object(fe.jsx)("td",{className:"team-name",children:c(n)}),"teamPoolPlay"===o&&Object(fe.jsx)("td",{children:l(a)>0?(a.pool/l(a)).toFixed(2):0}),"playerKOTC"===o&&!i&&Object(fe.jsx)("td",{children:l(a)>0?(a.court/l(a)).toFixed(2):0}),Object(fe.jsx)("td",{children:a.wins||0}),Object(fe.jsx)("td",{children:a.losses||0}),Object(fe.jsx)("td",{children:a.draws||0}),Object(fe.jsx)("td",{children:a.pf||0}),Object(fe.jsx)("td",{children:a.pa||0}),Object(fe.jsx)("td",{children:(a.pf||0)-(a.pa||0)}))}},n)}))})]}),0===s.length&&Object(fe.jsxs)("div",{style:{padding:"1.5rem 0rem 1rem"},children:["There is no ",i?"team":"player"," in this league yet."]})]})},Nr=ce.c.div.withConfig({displayName:"LeagueStatistics__Container",componentId:"sc-1hkr3ao-0"})([".title{margin-bottom:1rem;}",""],he.b.greaterThan("lg")(z||(z=Object(se.a)(["\n    .title {\n        margin-bottom: 1.5rem;\n    }\n    \n    display: flex;\n    justify-content: center;\n    justify-content: flex-start;\n  "])))),Cr=ce.c.div.withConfig({displayName:"LeagueStatistics__LeftContainer",componentId:"sc-1hkr3ao-1"})(["width:100%;"," ",""],he.b.greaterThan("lg")(G||(G=Object(se.a)(["\n    /* width: 30% */\n    /* min-width: 350px; */\n    width: auto;\n    white-space: nowrap;\n    flex-shrink: 0;\n    flex-grow: 0;\n    padding-right: 5rem;\n  "]))),he.b.greaterThan("1300px")(U||(U=Object(se.a)(["\n    padding-right: 8rem;\n  "])))),Pr=ce.c.div.withConfig({displayName:"LeagueStatistics__RightContainer",componentId:"sc-1hkr3ao-2"})(["width:100%;display:flex;flex-direction:column;align-items:center;margin-top:1.25rem;",""],he.b.greaterThan("lg")(B||(B=Object(se.a)(["\n    margin-top: 0;\n    white-space: nowrap;\n    flex-grow: 1;\n    max-width: 800px;\n  "])))),Ir=Object(ne.b)((function(e){return{league:e.league.data,loadingPlayers:!!e.league.loading.getLeaguePlayers,loadingTeams:!!e.league.loading.getLeagueTeams,loadingSessions:!!e.league.loading.getSessions}}),(function(e){return Object(Me.b)({getLeaguePlayers:yn.i,getLeagueTeams:yn.j,getSessions:Ot,dispatch:e},e)}))((function(e){var t=Object(ee.useContext)(pe.b).role,n=Object(ee.useState)(!0),a=Object(ae.a)(n,2),r=a[0],i=a[1],o=Object(ee.useState)(void 0),s=Object(ae.a)(o,2),c=s[0],l=s[1],d=Object(ee.useState)(void 0),u=Object(ae.a)(d,2),m=u[0],b=u[1],p=Object(be.h)(),g=e.league,j=e.getSessions,h=e.getLeaguePlayers,f=e.getLeagueTeams,O=e.loadingSessions,x=e.loadingPlayers,y=e.loadingTeams,v=e.dispatch,w=g?g.id:"",S=g?g.sessions:void 0,T=g?g.teamStatistics:void 0,N=g?g.playerStatistics:void 0,C=!!g&&g.permissions.sessionsArePublic,P=t!==pe.a.guest||C;return Object(ee.useEffect)((function(){g&&P&&(g.leaguePlayers||x||r||h(g.id),g.leagueTeams||y||!r||f(g.id))}),[g,h,f,x,y,r,P]),Object(ee.useEffect)((function(){g&&P&&!g.sessions&&!O&&j(g.id)}),[g,O,j,P]),Object(ee.useEffect)((function(){if(!c&&S){var e=S[0]?S[0].format.name:void 0,t=[];S.forEach((function(n){t.push(n.id),e&&n.format.name!==e&&(e=void 0)})),b(e),l(S.map((function(e){return e.id})))}}),[S,c]),Object(ee.useEffect)((function(){if(w&&r&&P)return v(Object(jt.a)("GET_TEAM_STATISTICS_REQUEST")(!0)),ge.a.firestore().collection("leagues").doc(w).collection("teamStatistics").onSnapshot((function(e){var t={};e.docChanges().forEach((function(e){t[e.doc.id]=e.doc.data()})),v(Object(jt.a)("GET_TEAM_STATISTICS_SUCCESS")(t))}))}),[w,r,v,P]),Object(ee.useEffect)((function(){if(w&&!r&&P)return v(Object(jt.a)("GET_PLAYER_STATISTICS_REQUEST")(!0)),ge.a.firestore().collection("leagues").doc(w).collection("playerStatistics").onSnapshot((function(e){var t={};e.docChanges().forEach((function(e){t[e.doc.id]=e.doc.data()})),v(Object(jt.a)("GET_PLAYER_STATISTICS_SUCCESS")(t))}))}),[w,r,v,P]),g&&P?Object(fe.jsxs)(Nr,{children:[Object(fe.jsxs)(Cr,{children:[Object(fe.jsx)("h1",{className:"title",children:"Statistics"}),Object(fe.jsx)(hr,{sessions:g.sessions,selectedSessions:c,setSelectedSessions:l,setFormatUsed:b})]}),Object(fe.jsxs)(Pr,{children:[Object(fe.jsx)(fr.a,{width:200,leftLabel:"Teams",rightLabel:"Players",onChange:function(e){return i(!e)},isOnRight:!r}),Object(fe.jsx)(Or,{children:Object(fe.jsx)(Tr,{stats:r?T:N,selectedSessions:c,leagueTeams:g.leagueTeams,leaguePlayers:g.leaguePlayers,showTeams:r,formatUsed:m})})]})]}):(p.push("/"),null)})),Er=function(e){var t=Object(be.k)("")||{path:""};return Object(fe.jsxs)(be.e,{children:[Object(fe.jsx)(be.c,{exact:!0,path:"".concat(t.path),component:wt}),Object(fe.jsx)(be.c,{exact:!0,path:"".concat(t.path,"/register"),component:oa}),Object(fe.jsx)(be.c,{exact:!0,path:"".concat(t.path,"/setup"),component:dr}),Object(fe.jsx)(be.c,{exact:!0,path:"".concat(t.path,"/statistics"),component:Ir}),Object(fe.jsx)(be.c,{path:"".concat(t.path,"/admin/:page(settings|registrations)?"),render:function(e){return e.match.params.page?Object(fe.jsx)(vn,Object(Z.a)({},e)):Object(fe.jsx)(be.b,{to:"".concat(e.match.url,"/settings")})}}),Object(fe.jsx)(be.c,{component:Le.a})]})},_r=function(e){var t=mt()(e.leaguePlayers,"player.displayName");return Object(fe.jsx)("div",{children:t.map((function(e){if(e.deletedAt)return null;var t=e.player;return Object(fe.jsx)(Dt.a,{sx:{py:2},children:t.uid?Object(fe.jsx)(Rt.b,{user:t}):Object(fe.jsx)(Rt.b,{displayName:t.displayName})},e.id)}))})},kr=ce.c.div.withConfig({displayName:"TeamList__Container",componentId:"sc-4gcewv-0"})(["margin-top:1.5rem;"]),Rr=ce.c.div.withConfig({displayName:"TeamList__TeamContainer",componentId:"sc-4gcewv-1"})(["display:flex;justify-content:space-between;align-items:center;.team-info{display:flex;align-items:center;padding:0.5em 0em;.team-icon{font-size:22px;}.team-name{padding-left:1rem;}}"]),Lr=function(e){var t=mt()(e.leagueTeams,"team.name");return Object(fe.jsx)(kr,{children:t.map((function(e){if(e.deletedAt)return null;var t=e.team,n=Object.values(e.team.players),a="";return n.forEach((function(e,t,n){0===t?a+=e.displayName:t+1<n.length?a+=", "+e.displayName:t+1===n.length&&(a+=" and "+e.displayName)})),Object(fe.jsxs)(Rr,{children:[Object(fe.jsxs)("div",{className:"team-info",children:[Object(fe.jsx)("div",{children:Object(fe.jsx)("i",{className:"fas fa-user-friends team-icon"})}),Object(fe.jsx)("div",{className:"team-name",children:t.name})]}),n.length>0&&Object(fe.jsx)(Mt.a,{info:a})]},e.id)}))})},Mr=ce.c.div.withConfig({displayName:"Participants__Container",componentId:"sc-ldaf4e-0"})(["min-height:100%;background:",";padding:2.5rem 2rem;.spinner-container{display:flex;justify-content:center;padding-top:2rem;}"," ",""],(function(e){return e.theme.colors.whites[0]}),he.b.greaterThan("sm")(q||(q=Object(se.a)(["\n    padding: 2rem 2.5rem;\n  "]))),he.b.greaterThan("lg")(W||(W=Object(se.a)(["\n      padding: 2rem 3rem;\n  "])))),Dr=ce.c.div.withConfig({displayName:"Participants__SwitchContainer",componentId:"sc-ldaf4e-1"})(["display:flex;justify-content:center;margin-top:1rem;margin-bottom:1rem;"]),Ar=Object(ne.b)((function(e){return{leaguePlayers:Object(cr.b)(e.league),leagueTeams:Object(cr.c)(e.league),loadingPlayers:!!e.league.loading.getLeaguePlayers,loadingTeams:!!e.league.loading.getLeagueTeams}}),(function(e){return Object(Me.b)({getLeaguePlayers:yn.i,getLeagueTeams:yn.j},e)}))((function(e){var t=Object(ee.useState)(!0),n=Object(ae.a)(t,2),a=n[0],r=n[1],i=e.getLeaguePlayers,o=e.getLeagueTeams,s=e.leagueID;Object(ee.useEffect)((function(){i(s)}),[i,s]);return Object(fe.jsxs)(Mr,{children:[Object(fe.jsx)("h1",{children:"Participants"}),Object(fe.jsx)(Dr,{children:Object(fe.jsx)(fr.a,{width:200,onChange:function(t){return(n=!t)||e.leagueTeams&&0!==e.leagueTeams.length||o(e.leagueID),void r(n);var n},leftLabel:"Players",rightLabel:"Teams",isOnRight:!a})}),a?e.loadingPlayers?Object(fe.jsx)("div",{className:"spinner-container",children:Object(fe.jsx)(Xt.a,{})}):Object(fe.jsx)(_r,{leaguePlayers:e.leaguePlayers}):e.loadingTeams?Object(fe.jsx)("div",{className:"spinner-container",children:Object(fe.jsx)(Xt.a,{})}):Object(fe.jsx)(Lr,{leagueTeams:e.leagueTeams})]})})),Fr=n(163),zr=n(287),Gr=n.n(zr),Ur=["sidebarWidth","sidebarExpandedWidth","isSidebarExpanded","hasScreenTopMenu","screenTopMenuHeight"],Br=["isShown"],qr=Object(ce.c)((function(e){e.sidebarWidth,e.sidebarExpandedWidth,e.isSidebarExpanded,e.hasScreenTopMenu,e.screenTopMenuHeight;var t=Object(oe.a)(e,Ur);return Object(fe.jsx)(Gr.a,Object(Z.a)({},t))})).withConfig({displayName:"LeagueViewstyle__LeagueContainer",componentId:"sc-phd9qg-0"})(["position:relative;display:flex;flex-direction:column;background:",";padding-top:56px;left:",";.flex-container{position:relative;flex-grow:1;display:flex;flex-wrap:wrap;height:",";}"," ",""],(function(e){return e.theme.colors.whites[0]}),(function(e){var t=e.sidebarWidth,n=e.sidebarExpandedWidth;return e.isSidebarExpanded?n-t+"px":0}),(function(e){return e.hasScreenTopMenu?"calc(100% - "+e.screenTopMenuHeight+"px)":"100%"}),he.b.greaterThan("md")(Y||(Y=Object(se.a)(["\n      width: ",";\n      margin-left: ",";\n      transition: all 0.25s ease-out;\n      padding-top: 0;\n   "])),(function(e){return"calc(100% - "+e.sidebarWidth+"px)"}),(function(e){return e.sidebarWidth+"px"})),he.b.greaterThan("lg")(V||(V=Object(se.a)(["\n     .flex-container {\n        flex-wrap: nowrap;\n      }\n    "])))),Wr=ce.c.div.withConfig({displayName:"LeagueViewstyle__MainContainer",componentId:"sc-phd9qg-1"})(["flex-grow:1;padding:1.5rem 1rem;transition:width 0.25s ease-out;background:",";width:100%;max-width:100%;min-height:",";> div{max-width:",";}"," "," "," "," ",""],(function(e){return e.theme.colors.lightgray}),(function(e){return e.showSidePanel?"none":"100%"}),(function(e){return e.showSidePanel?"1100px":"1500px"}),he.b.greaterThan("sm")(H||(H=Object(se.a)(["\n    padding: 2rem 2.5rem;\n  "]))),he.b.greaterThan("md")(Q||(Q=Object(se.a)(["\n      border-top-left-radius: 1.9rem;\n      border-bottom-left-radius: ",";\n  "])),(function(e){return e.showSidePanel?0:"1.9rem"})),he.b.greaterThan("lg")(K||(K=Object(se.a)(["\n      padding: 2rem 2.5rem;\n      border-radius: 1.9rem;\n      border-top-right-radius: ",";\n      border-bottom-right-radius: ",";\n  "])),(function(e){return e.showSidePanel?"1.9rem":0}),(function(e){return e.showSidePanel?"1.9rem":0})),he.b.greaterThan("xl")($||($=Object(se.a)(["\n      padding: 2rem 3rem;\n      display: flex;\n      flex-direction: column;\n      \n      > div {\n        width: 100%;\n      }\n  "]))),he.b.greaterThan("1600px")(J||(J=Object(se.a)(["\n      align-items: center;\n  "])))),Yr=Object(ce.c)((function(e){e.isShown;var t=Object(oe.a)(e,Br);return Object(fe.jsx)(Ie.animated.div,Object(Z.a)({},t))})).withConfig({displayName:"LeagueViewstyle__SideContainer",componentId:"sc-phd9qg-2"})(["flex-shrink:0;background:",";max-width:100%;display:",";overflow:",";> div{background:",";}",""],(function(e){return e.theme.colors.whites[0]}),(function(e){return e.isShown?"block":"none"}),(function(e){return e.isShown?"inherit":"hidden"}),(function(e){return e.theme.colors.whites[0]}),he.b.greaterThan("lg")(X||(X=Object(se.a)(["\n    display: block;\n\n    > div {\n        height: 100%;\n        /* border-top-left-radius: 1.9rem;\n        border-bottom-left-radius: 1.9rem; */\n        border-top-right-radius: 0;\n    }\n  "])))),Vr=ce.c.span.withConfig({displayName:"LeagueViewstyle__Overlay",componentId:"sc-phd9qg-3"})(["position:absolute;top:0;left:0;bottom:0;right:0;z-index:998;background:",";border-top-left-radius:1.9rem;border-bottom-left-radius:1.9rem;"],(function(e){return e.theme.colors.darkblues[7]})),Hr=function(e){var t=e.league,n=Object(yt.b)().userFromDB,a=Object(ee.useContext)(pe.b).role,r=Object(be.k)(t?"/".concat(t.url):"w"),i=r&&r.isExact,o=Object(Fr.a)(["md"],[!1],!0),s=Object(ee.useState)(!1),c=Object(ae.a)(s,2),l=c[0],d=c[1],u=Object(ee.useState)(!1),m=Object(ae.a)(u,2),b=m[0],p=m[1],g=Object(ee.useContext)(je.a),j=g.width,h=g.expandedWidth,f=Object(be.h)(),O=Object.keys(ke).some((function(e){return f.location.pathname.includes(e)})),x=!(!i||!e.league||!e.league.permissions.participantsArePublic&&a===pe.a.guest),y=Object(Fr.a)(["xl","lg"],[375,325],992),v=Object(Ie.useSpring)({width:x?y:0});return Object(fe.jsxs)("div",{style:{overflow:"hidden",position:"relative"},children:[Object(fe.jsx)(Pe,{userFromDB:n,leaguePermissions:e.league.permissions,isMobile:!!o,isSidebarOpen:b,setIsSidebarOpen:p,isSidebarExpanded:l,setIsSidebarExpanded:d}),Object(fe.jsxs)(qr,{style:{minHeight:"100rvh"},sidebarWidth:j,sidebarExpandedWidth:h,isSidebarExpanded:l,hasScreenTopMenu:O,screenTopMenuHeight:55,children:[Object(fe.jsx)(Re,{height:55,isMobile:!!o,isSidebarOpen:b}),Object(fe.jsxs)("div",{className:"flex-container",children:[Object(fe.jsx)(Wr,{showSidePanel:!!x,sideContainerWidth:y,children:Object(fe.jsx)(Er,{})}),Object(fe.jsx)(Yr,{style:v,isShown:x,children:x&&Object(fe.jsx)(Ar,{leagueID:e.leagueID})}),(b&&o||l)&&Object(fe.jsx)(Vr,{onClick:function(){p(!1),d(!1)}})]})]})]})},Qr=n(114),Kr=Object(ne.b)((function(e){return{league:e.league.data,loadingLeague:e.league.loading.getLeague}}),(function(e){return Object(Me.b)({getLeague:yn.h},e)}))((function(e){var t=Object(yt.b)().userFromDB,n=Object(be.h)(),a=e.getLeague,r=e.leagueID,i=e.league,o=e.loadingLeague;return Object(ee.useEffect)((function(){a(r,(function(){return n.push("/")}))}),[a,r,n]),o||!i?Object(fe.jsx)(Qr.a,{message:"Preparing your league..."}):Object(fe.jsx)(pe.c,{roles:i.roles,userFromDB:t,leagueID:i.id,children:Object(fe.jsx)(je.b,{children:Object(fe.jsx)(Hr,Object(Z.a)({},e))})})}))},948:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return l}));var a,r=n(5),i=n(2),o=n.n(i),s=n(114),c=n(0);!function(e){e.admin="admin",e.moderator="moderator",e.editor="editor",e.player="player",e.guest="guest"}(a||(a={}));var l=o.a.createContext({role:a.guest});l.Consumer;t.c=function(e){var t=Object(i.useState)(a.guest),n=Object(r.a)(t,2),o=n[0],d=n[1],u=Object(i.useState)(!0),m=Object(r.a)(u,2),b=m[0],p=m[1],g=e.roles,j=e.userFromDB,h=e.leagueID,f=j?j.uid:null;return Object(i.useEffect)((function(){f&&(-1!==g.admins.indexOf(f)?d(a.admin):-1!==g.moderators.indexOf(f)?d(a.moderator):-1!==g.editors.indexOf(f)?d(a.editor):j&&j.leagues&&j.leagues.includes(h)&&d(a.player)),p(!1)}),[f,h,g,j]),b?Object(c.jsx)(s.a,{message:"Verifying permissions..."}):Object(c.jsx)(l.Provider,{value:{role:o},children:e.children})}},962:function(e,t,n){"use strict";var a={};n.r(a),n.d(a,"formatType",(function(){return Y})),n.d(a,"defaultValues",(function(){return V})),n.d(a,"emptyStatistics",(function(){return H})),n.d(a,"getMatchTeam1",(function(){return Q})),n.d(a,"getMatchTeam2",(function(){return K})),n.d(a,"isOwnGame",(function(){return $})),n.d(a,"myMatchesFilter",(function(){return J})),n.d(a,"getWinningTeam",(function(){return X})),n.d(a,"getGroupName",(function(){return Z})),n.d(a,"saveScore",(function(){return ie})),n.d(a,"buildStandingsFromMatches",(function(){return me})),n.d(a,"updateStandingsFromMatch",(function(){return be})),n.d(a,"orderTeams",(function(){return pe})),n.d(a,"orderAllTeams",(function(){return ge})),n.d(a,"getMatchFilters",(function(){return he})),n.d(a,"Setup",(function(){return on})),n.d(a,"RoundSetup",(function(){return Jt})),n.d(a,"ReportScoreModal",(function(){return kn}));var r={};n.r(r),n.d(r,"formatType",(function(){return Rn})),n.d(r,"defaultValues",(function(){return Ln})),n.d(r,"emptyStatistics",(function(){return Mn})),n.d(r,"getMatchTeam1",(function(){return Dn})),n.d(r,"getMatchTeam2",(function(){return An})),n.d(r,"isOwnGame",(function(){return zn})),n.d(r,"myMatchesFilter",(function(){return Gn})),n.d(r,"getWinningTeam",(function(){return Un})),n.d(r,"getGroupName",(function(){return Bn})),n.d(r,"saveScore",(function(){return qn})),n.d(r,"buildStandingsFromMatches",(function(){return Vn})),n.d(r,"updateStandingsFromMatch",(function(){return Hn})),n.d(r,"orderTeams",(function(){return Qn})),n.d(r,"orderAllTeams",(function(){return Kn})),n.d(r,"getMatchFilters",(function(){return Jn})),n.d(r,"Setup",(function(){return Za})),n.d(r,"RoundSetup",(function(){return Va})),n.d(r,"ReportScoreModal",(function(){return Or}));var i,o,s,c,l,d,u,m,b,p,g,j,h,f,O,x,y,v,w,S,T,N,C,P,I,E,_,k,R,L,M,D,A,F,z,G,U,B,q,W,Y="team",V={name:"teamPoolPlay",rounds:1,confrontations:1,numberOfGames:1,allowDraws:!0},H={wins:0,losses:0,draws:0,pf:0,pa:0,gf:0,ga:0,pool:0,seed:0},Q=function(e,t,n){var a="Pool "+e.poolNumber+" - Team "+e.seeds[0];return e.team1&&e.team1.leagueTeamID&&t[e.team1.leagueTeamID]?t[e.team1.leagueTeamID].team.name:a},K=function(e,t,n){var a="Pool "+e.poolNumber+" - Team "+e.seeds[1];return e.team2&&e.team2.leagueTeamID&&t[e.team2.leagueTeamID]?t[e.team2.leagueTeamID].team.name:a},$=function(e,t,n,a){return[t.team1?n[t.team1.leagueTeamID]:void 0,t.team2?n[t.team2.leagueTeamID]:void 0].some((function(t){return!!Object.values((null===t||void 0===t?void 0:t.team.players)||{}).find((function(t){return t.uid===e}))}))},J=function(e,t,n,a){return t.filter((function(t){var a=!1;return[t.team1,t.team2].some((function(t){if(!t||!t.leagueTeamID)return!1;var r=n[t.leagueTeamID];return!!r&&(!(!r.team||!r.team.players)&&Object.values(r.team.players).some((function(t){return t.uid===e&&(a=!0,!0)})))})),a}))},X=function(e){var t=0,n=0;return e.games?(e.games.forEach((function(e){(e.team1Score&&e.team2Score||e.team1Score&&0===e.team2Score||e.team2Score&&0===e.team1Score)&&(e.team1Score=+e.team1Score,e.team2Score=+e.team2Score,e.team1Score>e.team2Score?t++:e.team1Score<e.team2Score&&n++)})),t>e.numberOfGames/2&&e.team1?1:n>e.numberOfGames/2&&e.team2?2:null):null},Z=function(e){return"Pool "+e},ee=n(7),te=n(21),ne=n(5),ae=n(11),re=n(18),ie=(n(160),function(){var e=Object(ae.a)(Object(ee.a)().mark((function e(t,n,a){var r,i,o;return Object(ee.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=re.a.firestore(),i=r.collection("leagues").doc(t),o=i.collection("sessions").doc(n).collection("matches").doc(a.id),e.next=5,r.runTransaction(function(){var e=Object(ae.a)(Object(ee.a)().mark((function e(t){var r,s,c,l,d,u,m,b,p,g,j,h;return Object(ee.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get(o);case 2:if((r=e.sent).exists){e.next=6;break}return t.update(o,{}),e.abrupt("return",{success:!1,message:"Match not found."});case 6:if((s=r.data()).team1&&s.team1.leagueTeamID&&s.team2&&s.team2.leagueTeamID){e.next=10;break}return t.update(o,{}),e.abrupt("return",{success:!1,message:"Teams not found."});case 10:return c=i.collection("leagueTeams").doc(s.team1.leagueTeamID),l=i.collection("leagueTeams").doc(s.team2.leagueTeamID),e.next=14,Promise.all([t.get(c),t.get(l)]);case 14:if(d=e.sent,u=Object(ne.a)(d,2),m=u[0],b=u[1],m.exists&&b.exists){e.next=23;break}return t.update(o,{}),t.update(c,{}),t.update(l,{}),e.abrupt("return",{success:!1,message:"Team not found."});case 23:for(p=i.collection("teamStatistics").doc(n),g=function(){var e,r=h[j],o=oe(s,r.id),c=oe(a,r.id),l=re.a.firestore.FieldValue.increment,d=c&&o?{wins:l(c.wins-o.wins),losses:l(c.losses-o.losses),draws:l(c.draws-o.draws),pf:l(c.pf-o.pf),pa:l(c.pa-o.pa),gf:l(c.gf-o.gf),ga:l(c.ga-o.ga),pool:l(c.pool-o.pool)}:{},u=r.data();u.leaguePlayers&&u.leaguePlayers.forEach((function(e){var a;t.set(i.collection("playerStatistics").doc(n),Object(te.a)({},e,(a={},Object(te.a)(a,s.round,d),Object(te.a)(a,"total",d),a)),{merge:!0})})),t.set(p,Object(te.a)({},r.id,(e={},Object(te.a)(e,s.round,d),Object(te.a)(e,"total",d),e)),{merge:!0})},j=0,h=[m,b];j<h.length;j++)g();return a.winner=se(a),t.update(o,{games:a.games,winner:a.winner}),t.update(c,{}),t.update(l,{}),e.abrupt("return",{success:!0,match:a});case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),oe=function(e,t){var n=e.team1&&e.team1.leagueTeamID===t?1:e.team2&&e.team2.leagueTeamID===t?2:null;if(!n)return null;var a=!1,r=[];if(e.games.forEach((function(e){!e.team1Score&&0!==e.team1Score||!e.team2Score&&0!==e.team2Score||(a=!0,r.push(e))})),!a)return H;var i=se(e),o=i===n?1:0,s=null===i||i===n?0:1,c=r.reduce((function(e,t){return e+(1===n?t.team1Score||0:t.team2Score||0)}),0),l=r.reduce((function(e,t){return e+(1===n?t.team2Score||0:t.team1Score||0)}),0),d=0,u=0;return r.forEach((function(e){(e.team1Score||0)>(e.team2Score||0)?1===n?d++:u++:(e.team1Score||0)<(e.team2Score||0)&&(1===n?u++:d++)})),{wins:o,losses:s,draws:1===e.numberOfGames&&c===l?1:0,pf:c,pa:l,gf:d,ga:u,pool:e.poolNumber}},se=function(e){var t=0,n=0;return e.games?(e.games.forEach((function(e){(e.team1Score&&e.team2Score||e.team1Score&&0===e.team2Score||e.team2Score&&0===e.team1Score)&&(e.team1Score=+e.team1Score,e.team2Score=+e.team2Score,e.team1Score>e.team2Score?t++:e.team1Score<e.team2Score&&n++)})),t>e.numberOfGames/2&&e.team1?1:n>e.numberOfGames/2&&e.team2?2:null):null},ce=n(1),le=n(29),de=n(430),ue=n(1009),me=function(e){var t,n={},a=Object(le.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value,i=r.round,o=r.poolNumber;if(n[i]||(n[i]={}),n[i][o]||(n[i][o]={}),r.team1&&r.team2&&r.team1.leagueTeamID&&r.team2.leagueTeamID){var s=0,c=0,l=0,d=0,u=0;if(r.games){var m,b=!1,p=Object(le.a)(r.games);try{for(p.s();!(m=p.n()).done;){var g=m.value;!g.team1Score&&0!==g.team1Score||!g.team2Score&&0!==g.team2Score||(b=!0,s+=g.team1Score,c+=g.team2Score,l+=g.team1Score>g.team2Score?1:0,d+=g.team1Score<g.team2Score?1:0)}}catch(f){p.e(f)}finally{p.f()}u=b&&1===r.numberOfGames&&s===c?1:0}var j=n[i][o][r.team1.leagueTeamID]||H;n[i][o][r.team1.leagueTeamID]={wins:j.wins+(1===r.winner?1:0),losses:j.losses+(2===r.winner?1:0),draws:j.draws+u,pf:j.pf+s,pa:j.pa+c,gf:j.gf+l,ga:j.ga+d,pool:j.pool+o,seed:r.seeds[0]};var h=n[i][o][r.team2.leagueTeamID]||H;n[i][o][r.team2.leagueTeamID]={wins:h.wins+(2===r.winner?1:0),losses:h.losses+(1===r.winner?1:0),draws:h.draws+u,pf:h.pf+c,pa:h.pa+s,gf:h.gf+d,ga:h.ga+l,pool:h.pool+o,seed:r.seeds[1]}}else n[i][o][r.seeds[0].toString()]=H,n[i][o][r.seeds[1].toString()]=H}}catch(f){a.e(f)}finally{a.f()}return n},be=function(e,t,n){var a=n.round,r=n.poolNumber;if(e[a]||(e[a]={}),e[a][r]||(e[a][r]={}),!n.team1||!n.team2||!n.team1.leagueTeamID||!n.team2.leagueTeamID)return e;var i=ue.teamPoolPlay.getTeamStatisticsFromMatch(t,1),o=ue.teamPoolPlay.getTeamStatisticsFromMatch(n,1),s=Object(ce.a)({},e),c=e[a][r][n.team1.leagueTeamID]||H;s[a][r][n.team1.leagueTeamID]={wins:c.wins-i.wins+o.wins,losses:c.losses-i.losses+o.losses,draws:c.draws-i.draws+o.draws,pf:c.pf-i.pf+o.pf,pa:c.pa-i.pa+o.pa,gf:c.gf-i.gf+o.gf,ga:c.ga-i.ga+o.ga,pool:c.pool-i.pool+o.pool,seed:n.seeds[0]};var l=e[a][r][n.team2.leagueTeamID]||H;return s[a][r][n.team2.leagueTeamID]={wins:l.wins-i.losses+o.losses,losses:l.losses-i.wins+o.wins,draws:l.draws-i.draws+o.draws,pf:l.pf-i.pa+o.pa,pa:l.pa-i.pf+o.pf,gf:l.gf-i.ga+o.ga,ga:l.ga-i.gf+o.gf,pool:l.pool-i.pool+o.pool,seed:n.seeds[1]},s},pe=function(e){return Object(de.orderBy)(e,["stats.wins",function(e){return e.stats.pf-e.stats.pa},"stats.seed"],["desc","desc","asc"])},ge=function(e){return Object(de.orderBy)(e,[function(e){return je(e.stats)>0&&e.stats.pool>0?e.stats.pool/je(e.stats):999},function(e){return je(e.stats)>0?e.stats.wins:-1},function(e){return e.stats.pf||0===e.stats.pf?e.stats.pf-e.stats.pa:-4}],["asc","desc","desc"])},je=function(e){return(e.wins||0)+(e.losses||0)+(e.draws||0)},he=function(e){return e.teamPools?Object.keys(e.teamPools[1]).map((function(e){return{name:"Pool "+e,filter:function(t){return"poolNumber"in t&&t.poolNumber.toString()===e}}})):[]},fe=n(14),Oe=n(4),xe=n(2),ye=n.n(xe),ve=n(213),we=n(260),Se=n(66),Te=n(921),Ne=n(134),Ce=n(0),Pe=Oe.c.div.withConfig({displayName:"TeamItem__DraggableContainer",componentId:"sc-1bsd5v8-0"})(["background:",";box-shadow:0 3px 6px rgba(0,0,0,0.08);margin-bottom:0.5rem;padding:0.35rem 1rem;border-radius:0.5rem;"],(function(e){return e.theme.colors.whites[0]})),Ie=Oe.c.div.withConfig({displayName:"TeamItem__TeamContainer",componentId:"sc-1bsd5v8-1"})(["display:flex;align-items:center;.name{flex-grow:1;margin-left:0.75rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}"]),Ee=Object(Oe.c)(Ne.a).withConfig({displayName:"TeamItem__StyledInfoTooltip",componentId:"sc-1bsd5v8-2"})(["color:",";"],(function(e){return e.theme.colors.warning})),_e=function(e){var t=e.leagueTeam;return Object(Ce.jsx)(Te.b,{draggableId:t.id,index:e.index,isDragDisabled:e.setupIsLocked,children:function(e,n){return Object(Ce.jsx)(Pe,Object(ce.a)(Object(ce.a)(Object(ce.a)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:Object(Ce.jsxs)(Ie,{children:[Object(Ce.jsx)("div",{children:Object(Ce.jsx)("i",{className:"fas fa-user-friends icon"})}),Object(Ce.jsx)("div",{className:"name",children:t.team.name}),t.deletedAt&&Object(Ce.jsx)(Ee,{info:"This team was removed from your league."})]})}))}})},ke=n(266),Re=n.n(ke),Le=n(9),Me=n(211),De=Oe.c.div.withConfig({displayName:"TeamList__Container",componentId:"sc-zrzsc-0"})(["height:100%;.title{font-size:1.5rem;margin-bottom:1rem;}",""],Le.b.greaterThan("md")(i||(i=Object(fe.a)(["\n    .title {\n      font-size: 2rem;\n    }\n  "])))),Ae=Oe.c.div.withConfig({displayName:"TeamList__DroppableContainer",componentId:"sc-zrzsc-1"})(["display:flex;flex-wrap:wrap;justify-content:space-between;align-content:flex-start;align-items:flex-start;height:calc(100% - 3.4rem);> div{width:100%;}",""],Le.b.greaterThan("xl")(o||(o=Object(fe.a)(["\n    > div {\n      width: calc(50% - 0.25rem);\n    }\n  "])))),Fe=Oe.c.div.withConfig({displayName:"TeamList__NoTeamMessage",componentId:"sc-zrzsc-2"})(["width:100% !important;"]),ze=function(e){var t=Re()(e.leagueTeams,"team.name");return Object(Ce.jsxs)(De,{children:[Object(Ce.jsx)("h2",{className:"title",children:"Teams"}),Object(Ce.jsx)(Te.c,{droppableId:"team-list",type:"pool",isDropDisabled:e.setupIsLocked,children:function(n,a){return Object(Ce.jsxs)(Ae,Object(ce.a)(Object(ce.a)({ref:n.innerRef},n.droppableProps),{},{isDraggingOver:a.isDraggingOver,children:[0===e.totalTeamCount&&Object(Ce.jsxs)(Fe,{children:[Object(Ce.jsx)("p",{style:{marginBottom:"0.5rem"},children:"There are no teams in your league yet."}),Object(Ce.jsxs)(Me.a,{children:["To add teams to your league, go back to your league dashboard and head over to the"," ",Object(Ce.jsx)("i",{children:"Setup"})," page."]})]}),e.totalTeamCount>0&&0===e.leagueTeams.length&&Object(Ce.jsx)(Fe,{children:"All of your teams are placed in a pool."}),t.map((function(t,n){return t.deletedAt?null:Object(Ce.jsx)(_e,{leagueTeam:t,index:n,setupIsLocked:e.setupIsLocked},t.id)})),n.placeholder]}))}})]})},Ge=n(965),Ue=n(16),Be=n(1127),qe=(n(98),n(27)),We=n(68),Ye=function(e,t,n){return function(){var a=Object(ae.a)(Object(ee.a)().mark((function a(r){var i;return Object(ee.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r(Object(Be.a)("GENERATE_MATCHES_REQUEST")(!0)),a.prev=1,i=Object(We.a)("league-generateLeagueMatches"),a.next=5,i({leagueID:e,sessionID:t});case 5:r(Object(Be.a)("GENERATE_MATCHES_SUCCESS")(!0)),n(),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(1),r(Object(Be.a)("GENERATE_MATCHES_REQUEST")(!1)),Object(qe.a)("Sorry, a problem occured while trying to generate your matches. Please refresh the page.");case 13:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(e){return a.apply(this,arguments)}}()},Ve=function(e,t){return function(){var n=Object(ae.a)(Object(ee.a)().mark((function n(a){var r,i,o,s,c,l,d,u,m,b,p;return Object(ee.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(Object(Be.a)("DELETE_MATCHES_REQUEST")(!0)),r=re.a.firestore(),i=r.collection("leagues").doc(e),o=i.collection("sessions").doc(t),n.prev=4,n.next=7,Promise.all([o.collection("matches").get(),o.collection("deletedMatches").get()]);case 7:s=n.sent,c=Object(ne.a)(s,2),l=c[0],d=c[1],u=0,(b=[])[m=0]=r.batch(),b[m].delete(i.collection("teamStatistics").doc(t)),b[m].delete(i.collection("playerStatistics").doc(t)),b[m].update(o,{matchesAreGenerated:!1,matchCount:0,playedMatchCount:0}),[].concat(Object(Ue.a)(l.docs),Object(Ue.a)(d.docs)).forEach((function(e){u++,b[m].delete(e.ref),u%490||(m++,b[m]=r.batch())})),p=0;case 20:if(!(p<b.length)){n.next=26;break}return n.next=23,b[p].commit();case 23:p++,n.next=20;break;case 26:a(Object(Be.a)("DELETE_MATCHES_SUCCESS")(!0)),Object(qe.b)("Your matches were successfully deleted"),n.next=34;break;case 30:n.prev=30,n.t0=n.catch(4),a(Object(Be.a)("DELETE_MATCHES_REQUEST")(!1)),Object(qe.a)("Sorry, a problem occured while trying to retrieve your matches. Please try again or contact an administrator.");case 34:case"end":return n.stop()}}),n,null,[[4,30]])})));return function(e){return n.apply(this,arguments)}}()},He=function(e,t,n,a){return function(){var r=Object(ae.a)(Object(ee.a)().mark((function r(i){var o,s,c,l;return Object(ee.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i(Object(Be.a)("EDIT_FORMAT_SETTING_REQUEST")(!0)),o=re.a.firestore(),s=o.collection("leagues").doc(e),c=s.collection("sessions").doc(t),r.prev=4,(l=o.batch()).update(s,Object(te.a)({},"format.".concat(n),a)),l.update(c,Object(te.a)({},"format.".concat(n),a)),r.next=10,l.commit();case 10:i(Object(Be.a)("EDIT_FORMAT_SETTING_SUCCESS")({setting:n,value:a})),r.next=17;break;case 13:r.prev=13,r.t0=r.catch(4),i(Object(Be.a)("EDIT_FORMAT_SETTING_REQUEST")(!1)),Object(qe.a)("Sorry, a problem occured while saving your settings. Please refresh the page.");case 17:case"end":return r.stop()}}),r,null,[[4,13]])})));return function(e){return r.apply(this,arguments)}}()},Qe=function(e,t,n,a){return function(){var r=Object(ae.a)(Object(ee.a)().mark((function r(i){var o;return Object(ee.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,i(Object(Be.a)("EDIT_TEAM_POOLS")(a)),o=re.a.firestore(),r.next=5,o.collection("leagues").doc(e).collection("sessions").doc(t).collection("teamPools").doc("1").set(a);case 5:r.next=11;break;case 7:r.prev=7,r.t0=r.catch(0),i(Object(Be.a)("EDIT_TEAM_POOLS")(n)),Object(qe.a)("Sorry, a problem occured while trying to edit your pools. Please refresh the page.");case 11:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e){return r.apply(this,arguments)}}()},Ke=function(e,t,n){return function(){var a=Object(ae.a)(Object(ee.a)().mark((function a(r){var i,o,s;return Object(ee.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=Object.keys(n).length+1,r(Object(Be.a)("ADD_TEAM_POOL")(i)),o=re.a.firestore(),s=o.collection("leagues").doc(e).collection("sessions").doc(t).collection("teamPools").doc("1"),a.prev=4,a.next=7,o.runTransaction(function(){var e=Object(ae.a)(Object(ee.a)().mark((function e(t){var a,r;return Object(ee.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get(s);case 2:if(a=e.sent,!(!(r=a.data())&&Object.keys(n).length>0||r&&Object.keys(r).length!==Object.keys(n).length)){e.next=7;break}return t.set(s,{},{merge:!0}),e.abrupt("return",{success:!1});case 7:return t.set(s,Object(te.a)({},i.toString(),[]),{merge:!0}),e.abrupt("return",{success:!0,poolNumber:i});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:if(a.sent.success){a.next=10;break}throw Error();case 10:a.next=16;break;case 12:a.prev=12,a.t0=a.catch(4),r(Object(Be.a)("REMOVE_TEAM_POOL")(n)),Object(qe.a)("Sorry, a problem occured while adding a pool. Please refresh the page.");case 16:case"end":return a.stop()}}),a,null,[[4,12]])})));return function(e){return a.apply(this,arguments)}}()},$e=function(e,t,n,a){return function(){var r=Object(ae.a)(Object(ee.a)().mark((function r(i){var o,s,c,l;return Object(ee.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o={},Object.entries(n).forEach((function(e){var t=Object(ne.a)(e,2),r=t[0],i=t[1];if(parseInt(r)<a)o[r]=i;else if(parseInt(r)!==Object.keys(n).length){var s=n[(parseInt(r)+1).toString()];o[r]=s}})),i(Object(Be.a)("REMOVE_TEAM_POOL")(o)),s=re.a.firestore(),c=s.collection("leagues").doc(e).collection("sessions").doc(t).collection("teamPools").doc("1"),r.prev=5,r.next=8,s.runTransaction(function(){var e=Object(ae.a)(Object(ee.a)().mark((function e(t){var r,i;return Object(ee.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get(c);case 2:if(r=e.sent,(i=r.data())&&Object.keys(i).length===Object.keys(n).length){e.next=7;break}return t.update(c,{}),e.abrupt("return",{success:!1});case 7:return t.set(c,o),e.abrupt("return",{success:!0,poolNumber:a});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:if((l=r.sent).success&&l.poolNumber){r.next=11;break}throw Error();case 11:r.next=17;break;case 13:r.prev=13,r.t0=r.catch(5),i(Object(Be.a)("REMOVE_TEAM_POOL")(n)),Object(qe.a)("Sorry, a problem occured while removing a pool. Please refresh the page.");case 17:case"end":return r.stop()}}),r,null,[[5,13]])})));return function(e){return r.apply(this,arguments)}}()},Je=function(e,t,n,a,r,i,o){return function(){var s=Object(ae.a)(Object(ee.a)().mark((function s(c){var l,d,u,m,b,p;return Object(ee.a)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return l={},a&&(l[a]=o[a].filter((function(e){return e!==n}))),r&&(d=o[r].filter((function(e){return e!==n})),l[r]=[].concat(Object(Ue.a)(d.slice(0,i)),[n],Object(Ue.a)(d.slice(i)))),c(Object(Be.a)("CHANGE_TEAM_POOL_REQUEST")(l)),u=re.a.firestore(),m=u.collection("leagues").doc(e).collection("sessions").doc(t).collection("teamPools").doc("1"),s.prev=6,s.next=9,m.update(l);case 9:return s.next=11,m.get();case 11:b=s.sent,p=b.data(),c(Object(Be.a)("CHANGE_TEAM_POOL_SUCCESS")(p)),s.next=20;break;case 16:s.prev=16,s.t0=s.catch(6),c(Object(Be.a)("CHANGE_TEAM_POOL_SUCCESS")(o)),Object(qe.a)("Sorry, a problem occured while moving a team. Please refresh the page.");case 20:case"end":return s.stop()}}),s,null,[[6,16]])})));return function(e){return s.apply(this,arguments)}}()},Xe=function(e,t,n,a){return function(){var r=Object(ae.a)(Object(ee.a)().mark((function r(i){var o;return Object(ee.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,i(Object(Be.a)("EDIT_PLAYER_POOLS")(a)),o=re.a.firestore(),r.next=5,o.collection("leagues").doc(e).collection("sessions").doc(t).collection("playerPools").doc("1").set(a);case 5:r.next=11;break;case 7:r.prev=7,r.t0=r.catch(0),i(Object(Be.a)("EDIT_PLAYER_POOLS")(n)),Object(qe.a)("Sorry, a problem occured while editing your pools. Please refresh the page.");case 11:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e){return r.apply(this,arguments)}}()},Ze=function(e,t,n){return function(){var a=Object(ae.a)(Object(ee.a)().mark((function a(r){var i,o,s;return Object(ee.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=Object.keys(n).length+1,r(Object(Be.a)("ADD_PLAYER_POOL")(i)),o=re.a.firestore(),s=o.collection("leagues").doc(e).collection("sessions").doc(t).collection("playerPools").doc("1"),a.prev=4,a.next=7,o.runTransaction(function(){var e=Object(ae.a)(Object(ee.a)().mark((function e(t){var a,r;return Object(ee.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get(s);case 2:if(a=e.sent,!(!(r=a.data())&&Object.keys(n).length>0||r&&Object.keys(r).length!==Object.keys(n).length)){e.next=7;break}return t.update(s,{}),e.abrupt("return",{success:!1});case 7:return t.set(s,Object(te.a)({},i.toString(),[]),{merge:!0}),e.abrupt("return",{success:!0,poolNumber:i});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:if(a.sent.success){a.next=10;break}throw Error();case 10:a.next=17;break;case 12:a.prev=12,a.t0=a.catch(4),console.error(a.t0),r(Object(Be.a)("REMOVE_PLAYER_POOL")(n)),Object(qe.a)("Sorry, a problem occured while adding a pool. Please refresh the page.");case 17:case"end":return a.stop()}}),a,null,[[4,12]])})));return function(e){return a.apply(this,arguments)}}()},et=function(e,t,n,a){return function(){var r=Object(ae.a)(Object(ee.a)().mark((function r(i){var o,s,c,l;return Object(ee.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o={},Object.entries(n).forEach((function(e){var t=Object(ne.a)(e,2),r=t[0],i=t[1];if(parseInt(r)<a)o[r]=i;else if(parseInt(r)!==Object.keys(n).length){var s=n[(parseInt(r)+1).toString()];o[r]=s}})),i(Object(Be.a)("REMOVE_PLAYER_POOL")(o)),s=re.a.firestore(),c=s.collection("leagues").doc(e).collection("sessions").doc(t).collection("playerPools").doc("1"),r.prev=5,r.next=8,s.runTransaction(function(){var e=Object(ae.a)(Object(ee.a)().mark((function e(t){var r,i;return Object(ee.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get(c);case 2:if(r=e.sent,(i=r.data())&&Object.keys(i).length===Object.keys(n).length){e.next=7;break}return t.update(c,{}),e.abrupt("return",{success:!1});case 7:return t.set(c,o),e.abrupt("return",{success:!0,poolNumber:a});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:if((l=r.sent).success&&l.poolNumber){r.next=11;break}throw Error();case 11:r.next=17;break;case 13:r.prev=13,r.t0=r.catch(5),i(Object(Be.a)("REMOVE_PLAYER_POOL")(n)),Object(qe.a)("Sorry, a problem occured while removing a pool. Please refresh the page.");case 17:case"end":return r.stop()}}),r,null,[[5,13]])})));return function(e){return r.apply(this,arguments)}}()},tt=function(e,t,n,a,r,i,o){return function(){var s=Object(ae.a)(Object(ee.a)().mark((function s(c){var l,d,u,m,b,p;return Object(ee.a)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return l={},a&&(l[a]=o[a].filter((function(e){return e!==n}))),r&&(d=o[r].filter((function(e){return e!==n})),l[r]=[].concat(Object(Ue.a)(d.slice(0,i)),[n],Object(Ue.a)(d.slice(i)))),c(Object(Be.a)("CHANGE_PLAYER_POOL_REQUEST")(l)),u=re.a.firestore(),m=u.collection("leagues").doc(e).collection("sessions").doc(t).collection("playerPools").doc("1"),s.prev=6,s.next=9,m.update(l);case 9:return s.next=11,m.get();case 11:b=s.sent,p=b.data(),c(Object(Be.a)("CHANGE_PLAYER_POOL_SUCCESS")(p)),s.next=20;break;case 16:s.prev=16,s.t0=s.catch(6),c(Object(Be.a)("CHANGE_PLAYER_POOL_SUCCESS")(o)),Object(qe.a)("Sorry, a problem occured while moving a team. Please refresh the page.");case 20:case"end":return s.stop()}}),s,null,[[6,16]])})));return function(e){return s.apply(this,arguments)}}()},nt=Oe.c.div.withConfig({displayName:"PoolItem__Container",componentId:"sc-190aita-0"})(["background:",";box-shadow:0 3px 6px rgba(0,0,0,0.08);width:100%;border-radius:0.5rem;padding:0.75rem 1rem;margin-bottom:1rem;"," ",""],(function(e){return e.theme.colors.whites[0]}),Le.b.greaterThan("md")(s||(s=Object(fe.a)(["\n     width: calc(50% - 0.5rem);\n     \n     &:not(:nth-child(2n)) {\n       margin-right: 1rem;\n     }\n  "]))),Le.b.greaterThan("xl")(c||(c=Object(fe.a)(["\n     width: calc(33% - 0.6665rem);\n\n     /* Cancel margins from previous breakpoint */\n     &:not(:nth-child(2n)) {\n       margin-right: 0rem;\n     }\n     \n     &:not(:nth-child(3n)) {\n       margin-right: 1rem;\n     }\n  "])))),at=Oe.c.div.withConfig({displayName:"PoolItem__PoolHeader",componentId:"sc-190aita-1"})(["display:flex;justify-content:space-between;align-items:center;margin-bottom:0.75rem;.pool-title{margin-bottom:0;}.icon{opacity:0.25;cursor:pointer;&:hover{opacity:1;color:",";}}"],(function(e){return e.theme.colors.danger})),rt=Oe.c.div.withConfig({displayName:"PoolItem__DroppableContainer",componentId:"sc-190aita-2"})(["min-height:220px;"]),it=function(e){return Object(Ce.jsxs)(nt,{children:[Object(Ce.jsxs)(at,{children:[Object(Ce.jsxs)("h5",{className:"pool-title",children:["Pool ",e.poolNumber]}),!e.setupIsLocked&&Object(Ce.jsx)("i",{className:"fas fa-trash-alt icon",title:"Delete pool",onClick:function(){return e.removeTeamPool(e.poolNumber)}})]}),Object(Ce.jsx)(Te.c,{droppableId:e.poolNumber.toString(),type:"pool",isDropDisabled:e.setupIsLocked,children:function(t,n){return Object(Ce.jsxs)(rt,Object(ce.a)(Object(ce.a)({ref:t.innerRef},t.droppableProps),{},{children:[e.pool.map((function(t,n){var a=e.leagueTeams?e.leagueTeams[t]:null;return a?Object(Ce.jsx)(_e,{leagueTeam:a,index:n,setupIsLocked:e.setupIsLocked},a.id):null})),t.placeholder]}))}})]})},ot=n(23),st=Object(Oe.c)(nt).withConfig({displayName:"NewPoolItem__Container",componentId:"sc-1qr2sy5-0"})(["display:flex;justify-content:center;align-items:center;min-height:276px;background:none;box-shadow:none;border:2px dashed rgba(0,0,0,0.15);.icon{margin-right:0.5rem;}"]),ct=function(e){return Object(Ce.jsx)(st,{children:Object(Ce.jsxs)(ot.a,{theme:"primary",onClick:e.addTeamPool,children:[Object(Ce.jsx)("i",{className:"fas fa-plus icon"}),"Add a pool"]})})},lt=n(210),dt=Oe.c.div.withConfig({displayName:"PoolList__Container",componentId:"sc-727ds-0"})([".header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;.title{font-size:1.5rem;margin-bottom:0;}.controls{display:none;.icon{margin-right:0.5rem;}}.controls-dropdown .icon{padding:0.25rem;cursor:pointer;opacity:0.25;&:hover{opacity:1;}}}",""],Le.b.greaterThan("md")(l||(l=Object(fe.a)(["\n    .header {\n      .title {\n        font-size: 2rem;\n      }\n      .controls {\n        display: block;\n      }\n      .controls-dropdown {\n        display: none;\n      }\n    }\n  "])))),ut=Oe.c.div.withConfig({displayName:"PoolList__PoolListContainer",componentId:"sc-727ds-1"})(["display:flex;flex-wrap:wrap;align-items:flex-start;"]),mt=Oe.c.div.withConfig({displayName:"PoolList__ErrorWarning",componentId:"sc-727ds-2"})(["font-weight:600;color:",";margin-bottom:0.75em;.icon{margin-right:0.5rem;}"],(function(e){return e.theme.colors.danger})),bt=function(e){var t=e.teamPools&&e.teamPools[1]||{},n=[{label:"Get pools from another session",onClick:e.openOtherSessionModal}];return Object(Ce.jsxs)(dt,{children:[Object(Ce.jsxs)("div",{className:"header",children:[Object(Ce.jsx)("h2",{className:"title",children:"Pools"}),Object(Ce.jsx)("div",{className:"controls",children:Object(Ce.jsxs)(ot.a,{theme:"success",onClick:e.openOtherSessionModal,disabled:e.setupIsLocked,children:[Object(Ce.jsx)("i",{className:"far fa-clone icon"}),"Get pools from another session"]})}),Object(Ce.jsx)("div",{className:"controls-dropdown",children:Object(Ce.jsx)(lt.a,{items:n,placement:"BOTTOM_RIGHT",children:Object(Ce.jsx)("i",{className:"fas fa-ellipsis-h icon"})})})]}),!e.setupIsLocked&&e.errorMessage&&Object(Ce.jsxs)(mt,{children:[Object(Ce.jsx)("i",{className:"fas fa-exclamation-circle icon"}),e.errorMessage]}),Object(Ce.jsxs)(ut,{children:[Object.keys(t).map((function(n){return Object(Ce.jsx)(it,{poolNumber:parseInt(n),pool:t[n],leagueTeams:e.leagueTeams,setupIsLocked:e.setupIsLocked,removeTeamPool:e.removeTeamPool},n)})),!e.setupIsLocked&&Object(Ce.jsx)(ct,{addTeamPool:e.addTeamPool})]})]})},pt=Oe.c.select.withConfig({displayName:"Selectstyle__StyledSelect",componentId:"sc-p68stn-0"})(["width:100%;border:none;font-size:inherit;line-height:1.5;padding:0.45em 1em;background:",";border-radius:0.5em;font-weight:600;option:not(:disabled){color:",";}option:disabled{color:rgba(0,0,0,0.25);}&.is-placeholder{color:rgba(0,0,0,0.25);font:400 1rem Muli;opacity:1;font-size:inherit;option:not(:disabled){color:",";}option:disabled{color:rgba(0,0,0,0.25);}}&:focus{outline:0;}"],(function(e){var t=e.background,n=e.theme;return t||n.colors.lightgray}),(function(e){return e.theme.colors.darkblue}),(function(e){return e.theme.colors.darkblue})),gt=pt,jt=n(262),ht=n(80),ft=Oe.c.div.withConfig({displayName:"GenerateModal__Container",componentId:"sc-v1a3wg-0"})([".button-container{display:flex;justify-content:center;margin-top:2.5rem;}"]),Ot=Oe.c.div.withConfig({displayName:"GenerateModal__FormContainer",componentId:"sc-v1a3wg-1"})(["label{margin-bottom:0;font-weight:700;}> div{display:flex;flex-direction:column;align-items:center;margin-bottom:1.25rem;}"]),xt=Object(Oe.c)(gt).withConfig({displayName:"GenerateModal__StyledSelect",componentId:"sc-v1a3wg-2"})(["display:block;padding:0.25rem 0.75rem 0.25rem 0rem;width:auto;"]),yt=Object(Oe.c)(ot.a).withConfig({displayName:"GenerateModal__StyledButton",componentId:"sc-v1a3wg-3"})(["font-size:1rem;padding:0.35rem 1.25rem;"]),vt=Object(Oe.c)(Ne.a).withConfig({displayName:"GenerateModal__StyledInfoTooltip",componentId:"sc-v1a3wg-4"})(["margin-left:0.5rem;opacity:0.25;"]),wt=function(e){return Object(Ce.jsx)(ht.a,{isOpen:e.isOpen,onRequestClose:e.onRequestClose,size:"sm",children:Object(Ce.jsxs)(ft,{children:[Object(Ce.jsxs)(Ot,{children:[Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)("label",{children:"Format"}),Object(Ce.jsx)("div",{children:"Team pool play"})]}),Object(Ce.jsxs)("div",{children:[Object(Ce.jsxs)("label",{children:["Rounds",Object(Ce.jsx)(vt,{info:"A round is completed when all teams of a pool have faced each other. You will be able to change pools between rounds if you want."})]}),Object(Ce.jsx)(xt,{background:"#fff",disabled:e.setupIsLocked,onChange:function(t){return e.editFormatSetting("rounds",parseInt(t.target.value))},value:e.savingFormatSetting?void 0:e.format.rounds,children:[1,2,3,4,5,6,7,8].map((function(e){return Object(Ce.jsx)("option",{value:e,children:e},e)}))})]}),Object(Ce.jsxs)("div",{children:[Object(Ce.jsxs)("label",{children:["Confrontations",Object(Ce.jsx)(vt,{info:"Number of times two teams will face each other in a round."})]}),Object(Ce.jsx)(xt,{background:"#fff",disabled:e.setupIsLocked,onChange:function(t){return e.editFormatSetting("confrontations",parseInt(t.target.value))},value:e.savingFormatSetting?void 0:e.format.confrontations,children:[1,2,3,4,5].map((function(e){return Object(Ce.jsx)("option",{value:e,children:e},e)}))})]}),Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)("label",{children:"Format of matches"}),Object(Ce.jsxs)(xt,{background:"#fff",disabled:e.setupIsLocked,onChange:function(t){return e.editFormatSetting("numberOfGames",parseInt(t.target.value))},value:e.savingFormatSetting?void 0:e.format.numberOfGames,children:[Object(Ce.jsx)("option",{value:"1",children:"Single game"}),Object(Ce.jsx)("option",{value:"3",children:"Best of 3"}),Object(Ce.jsx)("option",{value:"5",children:"Best of 5"})]})]})]}),Object(Ce.jsx)("div",{className:"button-container",children:Object(Ce.jsx)(yt,{loading:e.savingFormatSetting,onClick:e.onRequestClose,children:"Close"})})]})})},St=Oe.c.div.withConfig({displayName:"GenerateBanner__Banner",componentId:"sc-1blhtig-0"})(["position:absolute;top:0;left:0;right:0;padding:1.5rem 2rem;z-index:2;background:",";box-shadow:5px 3px 6px rgba(0,0,0,0.08);.button-container{display:flex;justify-content:center;align-items:flex-end;margin-top:0.5rem;}.more-settings{flex-direction:column;justify-content:center;color:",";text-align:center;&.more-settings.more-settings.more-settings{align-items:center;}.icon{margin-left:0.25rem;vertical-align:middle;}}"," "," "," ",""],(function(e){return e.theme.colors.whites[0]}),(function(e){return e.theme.colors.primary}),Le.b.lessThan("xs320")(d||(d=Object(fe.a)(["\n    padding: 1.5rem 1.5rem;\n    font-size: 0.95rem;\n  "]))),Le.b.greaterThan("md")(u||(u=Object(fe.a)(["\n    position: fixed;\n    top: 0;\n    left: ",";\n    right: 0;\n    padding: 1.75rem 2rem 1.5rem;\n\n    display: flex;\n    align-items: center;\n    .button-container {\n      order: 1;\n      margin-top: 0rem;\n      margin-right: 2.5rem;\n    }\n  "])),(function(e){return e.sideMenuWidth+"px"})),Le.b.greaterThan("lg")(m||(m=Object(fe.a)(["\n    display: flex;\n    top: initial;\n    bottom: 0;\n    padding: 1.75rem 1.5rem 2rem;\n    .button-container {\n      margin-right: 1.5rem;\n    }\n  "]))),Le.b.greaterThan("xl")(b||(b=Object(fe.a)(["\n    padding: 2rem 3rem 2.5rem;\n  "])))),Tt=Object(Oe.c)(ot.a).withConfig({displayName:"GenerateBanner__StyledButton",componentId:"sc-1blhtig-1"})(["font-size:1.35rem;padding:0.5rem 1rem;"]),Nt=Oe.c.div.withConfig({displayName:"GenerateBanner__FormatDescription",componentId:"sc-1blhtig-2"})(["flex-grow:1;display:flex;flex-direction:column;align-items:center;label{margin-bottom:0;font-weight:700;}",""],Le.b.greaterThan("md")(p||(p=Object(fe.a)(["\n    max-width: 1100px;\n    flex-direction: row;\n    order: 2;\n  "])))),Ct=Oe.c.div.withConfig({displayName:"GenerateBanner__SettingGroup",componentId:"sc-1blhtig-3"})(["display:flex;justify-content:space-between;width:100%;max-width:360px;&.hide-xs{display:none;}.setting{margin-bottom:1rem;&:nth-child(2){display:flex;flex-direction:column;align-items:flex-end;}&.hide-xs{display:none;}}"," "," ",""],Le.b.greaterThan("md")(g||(g=Object(fe.a)(["\n    justify-content: space-between;\n    &:first-child {\n      flex-grow: 1;\n      max-width: none;\n    }\n\n    &.hide-md {\n      display: none;\n    }\n\n    .setting {\n      margin-bottom: 0;\n      &:nth-child(2) {\n        display: block;\n      }\n    }\n\n    .setting.show-md {\n      display: block;\n    }\n\n    .promotions-setting {\n      display: none;\n    }\n  "]))),Le.b.greaterThan("lg")(j||(j=Object(fe.a)(["\n    justify-content: space-around;\n    .promotions-setting {\n      display: block;\n    }\n\n    .setting.hide-lg {\n      display: none;\n    }\n    .setting.show-lg {\n      display: block;\n    }\n  "]))),Le.b.greaterThan("xl")(h||(h=Object(fe.a)(["\n    .setting.hide-xl {\n      display: none;\n    }\n    .setting.show-xl {\n      display: block;\n    }\n  "])))),Pt=Object(Oe.c)(gt).withConfig({displayName:"GenerateBanner__StyledSelect",componentId:"sc-1blhtig-4"})(["display:block;padding:0.25rem 0.5rem 0.25rem 0rem;width:auto;max-width:175px;border-radius:0;",""],Le.b.greaterThan("xl")(f||(f=Object(fe.a)(["\n    max-width: 230px;\n  "])))),It=Object(Oe.c)(Ne.a).withConfig({displayName:"GenerateBanner__StyledInfoTooltip",componentId:"sc-1blhtig-5"})(["margin-left:0.5rem;opacity:0.25;"]),Et=function(e){var t=Object(xe.useState)(!1),n=Object(ne.a)(t,2),a=n[0],r=n[1],i=function(){var t=Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)("h3",{children:"Confirmation"}),Object(Ce.jsx)("p",{style:{fontWeight:400},children:"Once your matches will be generated, many of your settings will be locked."}),Object(Ce.jsx)("p",{style:{fontWeight:400},children:"To modify one of these settings, you will need to delete all your matches and generate them again with your new settings."})]});Object(jt.a)(t,{proceedText:"Generate matches",proceedStyle:{fontSize:"1.15rem"},cancelStyle:{fontSize:"1.15rem"}}).then((function(){e.generateMatches()}))};return Object(Ce.jsxs)(St,{sideMenuWidth:e.sideMenuWidth,children:[Object(Ce.jsx)(Nt,{children:Object(Ce.jsxs)(Ct,{children:[Object(Ce.jsxs)("div",{className:"setting",children:[Object(Ce.jsx)("label",{children:"Format"}),Object(Ce.jsxs)(Pt,{background:"#fff",disabled:e.setupIsLocked,onChange:function(t){return e.editFormatSetting("name",t.target.value)},value:e.savingFormatSetting?void 0:e.format.name,children:[Object(Ce.jsx)("option",{value:"teamPoolPlay",children:"Team pool play"}),Object(Ce.jsx)("option",{value:"playerKOTC",children:"King of the Court (Players)"})]})]}),Object(Ce.jsxs)("div",{className:"setting hide-xs show-md",children:[Object(Ce.jsxs)("label",{children:["Rounds",Object(Ce.jsx)(It,{info:"A round is completed when all teams of a pool have faced each other. You will be able to change pools between rounds if you want."})]}),Object(Ce.jsx)(Pt,{background:"#fff",disabled:e.setupIsLocked,onChange:function(t){return e.editFormatSetting("rounds",parseInt(t.target.value))},value:e.savingFormatSetting?void 0:e.format.rounds,children:[1,2,3,4,5,6,7,8].map((function(e){return Object(Ce.jsx)("option",{value:e,children:e},e)}))})]}),Object(Ce.jsxs)("div",{className:"setting hide-xs show-lg",children:[Object(Ce.jsxs)("label",{children:["Confrontations",Object(Ce.jsx)(It,{info:"Number of times two teams will face each other in a round."})]}),Object(Ce.jsx)(Pt,{background:"#fff",disabled:e.setupIsLocked,onChange:function(t){return e.editFormatSetting("confrontations",parseInt(t.target.value))},value:e.savingFormatSetting?void 0:e.format.confrontations,children:[1,2,3,4,5].map((function(e){return Object(Ce.jsx)("option",{value:e,children:e},e)}))})]}),Object(Ce.jsxs)("div",{className:"setting hide-xs show-lg",children:[Object(Ce.jsx)("label",{children:"Matches"}),Object(Ce.jsxs)(Pt,{background:"#fff",disabled:e.setupIsLocked,onChange:function(t){return e.editFormatSetting("numberOfGames",parseInt(t.target.value))},value:e.savingFormatSetting?void 0:e.format.numberOfGames,children:[Object(Ce.jsx)("option",{value:"1",children:"Single game"}),Object(Ce.jsx)("option",{value:"3",children:"Best of 3"})]})]}),Object(Ce.jsxs)("div",{className:"setting more-settings hide-lg",onClick:function(){return r(!0)},children:[Object(Ce.jsx)("div",{children:"More settings"}),Object(Ce.jsx)("div",{children:Object(Ce.jsx)("i",{className:"fas fa-angle-double-right icon"})})]})]})}),Object(Ce.jsxs)("div",{className:"button-container",children:[!e.setupIsLocked&&Object(Ce.jsx)(Tt,{theme:"success",size:"lg",loading:e.savingFormatSetting||e.generatingMatches,onClick:i,disabled:e.setupIsLocked,children:"Generate matches"}),e.setupIsLocked&&Object(Ce.jsx)(Tt,{theme:"danger",size:"lg",loading:e.deletingMatches,onClick:function(){var t=Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)("h3",{children:"Confirmation"}),Object(Ce.jsx)("p",{style:{fontWeight:400},children:"Are you sure you want to delete all matches from this session?"})]});Object(jt.a)(t,{proceedText:"Delete all matches",proceedTheme:"danger",proceedStyle:{fontSize:"1.15rem"},cancelStyle:{fontSize:"1.15rem"}}).then((function(){e.deleteMatches()}))},disabled:!e.setupIsLocked,children:"Delete all matches"})]}),Object(Ce.jsx)(wt,{format:e.format,editFormatSetting:e.editFormatSetting,savingFormatSetting:e.savingFormatSetting,generateMatches:i,setupIsLocked:e.setupIsLocked,isOpen:a,onRequestClose:function(){return r(!1)}})]})},_t=n(65),kt=n(40),Rt=n.n(kt),Lt=Oe.c.div.withConfig({displayName:"OtherSessionList__Container",componentId:"sc-18af0ks-0"})(["display:flex;flex-direction:column;align-items:center;margin-bottom:1rem;.title{text-align:center;margin-bottom:1.5rem;}.session-list{width:100%;max-width:600px;}"]),Mt=Oe.c.div.withConfig({displayName:"OtherSessionList__SessionItem",componentId:"sc-18af0ks-1"})(["background:white;border-radius:0.75rem;box-shadow:0 3px 6px rgba(0,0,0,0.08);margin-bottom:0.75rem;padding:0.75rem 1.25rem;width:100%;font-size:1.25rem;display:flex;justify-content:space-between;align-items:center;.icon{margin-left:0.5rem;}"]),Dt=Oe.c.div.withConfig({displayName:"OtherSessionList__NoSessionsMessage",componentId:"sc-18af0ks-2"})(["text-align:center;padding-top:3rem;p{padding-bottom:2rem;}.icon{font-size:3.5rem;}"]),At=function(e){return 0===e.sessions.length?Object(Ce.jsxs)(Dt,{children:[Object(Ce.jsx)("h1",{children:Object(Ce.jsx)("i",{className:"far fa-sad-tear icon"})}),Object(Ce.jsx)("p",{children:"There are no other sessions in your league that use the same format as this session."}),Object(Ce.jsx)(ot.a,{size:"lg",onClick:e.closeModal,children:"Close"})]}):Object(Ce.jsxs)(Lt,{children:[Object(Ce.jsx)("h2",{className:"title",children:"Select a session"}),Object(Ce.jsx)("div",{className:"session-list",children:Re()(e.sessions.filter((function(e){return e.matchesAreGenerated})),"date").map((function(t){for(var n=[],a=function(a){n.push({label:"Round "+a,onClick:function(){e.setSelectedSession(t),e.setSelectedRound(a)}})},r=1;r<=t.format.rounds;r++)a(r);return Object(Ce.jsxs)(Mt,{children:[Object(Ce.jsxs)("div",{children:[" ",Rt()(t.date.toDate()).format("dddd, MMMM Do")]}),Object(Ce.jsx)(lt.a,{items:n,placement:"BOTTOM_RIGHT",children:Object(Ce.jsxs)(ot.a,{as:"span",theme:"success",size:"lg",onPress:function(e){var t;return null===(t=e.target.parentElement)||void 0===t?void 0:t.click()},children:["Select",Object(Ce.jsx)("i",{className:"fas fa-caret-down icon"})]})})]},t.id)}))})]})},Ft=Oe.c.div.withConfig({displayName:"RoundTeamItem__DraggableContainer",componentId:"sc-ux4ekz-0"})(["background:",";box-shadow:0 3px 6px rgba(0,0,0,0.08);margin-bottom:0.5rem;padding:0.35rem 1rem;border-radius:0.5rem;"],(function(e){return e.theme.colors.whites[0]})),zt=Oe.c.div.withConfig({displayName:"RoundTeamItem__TeamContainer",componentId:"sc-ux4ekz-1"})(["display:flex;.name{flex-grow:1;margin-left:0.75rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}.pool-diff{margin-left:1rem;white-space:nowrap;.icon{margin-right:0.35rem;}&.red{color:",";}&.green{color:",";}}"],(function(e){return e.theme.colors.danger}),(function(e){return e.theme.colors.primary})),Gt=function(e){var t=e.leagueTeam,n=e.currPool,a=e.prevPool;return Object(Ce.jsx)(Te.b,{draggableId:t.id,index:e.index,isDragDisabled:e.setupIsLocked,children:function(e,r){return Object(Ce.jsx)(Ft,Object(ce.a)(Object(ce.a)(Object(ce.a)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:Object(Ce.jsxs)(zt,{children:[Object(Ce.jsx)("div",{children:Object(Ce.jsx)("i",{className:"fas fa-user-friends icon"})}),Object(Ce.jsx)("div",{className:"name",children:t.team.name}),a!==n&&Object(Ce.jsxs)("div",{className:n<a?"pool-diff green":"pool-diff red",children:[n>a&&Object(Ce.jsx)("i",{className:"fas fa-caret-down icon"}),a>n&&Object(Ce.jsx)("i",{className:"fas fa-caret-up icon"}),Math.abs(n-a)]})]})}))}})},Ut=Oe.c.div.withConfig({displayName:"RoundPoolItem__Container",componentId:"sc-acknj2-0"})(["background:",";box-shadow:0 3px 6px rgba(0,0,0,0.08);width:100%;border-radius:0.5rem;padding:0.75rem 1rem;margin-bottom:1rem;"," "," ",""],(function(e){return e.theme.colors.whites[0]}),Le.b.greaterThan("sm")(O||(O=Object(fe.a)(["\n     width: calc(50% - 0.5rem);\n     \n     &:not(:nth-child(2n)) {\n       margin-right: 1rem;\n     }\n  "]))),Le.b.greaterThan("lg")(x||(x=Object(fe.a)(["\n     width: calc(33% - 0.6666rem);\n\n     &:not(:nth-child(2n)) {\n       margin-right: 0rem;\n     }\n     \n     &:not(:nth-child(3n)) {\n       margin-right: 1rem;\n     }\n  "]))),Le.b.greaterThan("xl")(y||(y=Object(fe.a)(["\n     width: calc(25% - 0.75rem);\n\n     /* Cancel margins from previous breakpoint */\n     &:not(:nth-child(3n)) {\n       margin-right: 0rem;\n     }\n     \n     &:not(:nth-child(4n)) {\n       margin-right: 1rem;\n     }\n  "])))),Bt=Oe.c.div.withConfig({displayName:"RoundPoolItem__DroppableContainer",componentId:"sc-acknj2-1"})(["min-height:220px;"]),qt=function(e){return Object(Ce.jsxs)(Ut,{children:[Object(Ce.jsxs)("h5",{children:["Pool ",e.poolNumber]}),Object(Ce.jsx)(Te.c,{droppableId:e.poolNumber.toString(),type:"pool",isDropDisabled:e.setupIsLocked,children:function(t,n){return Object(Ce.jsxs)(Bt,Object(ce.a)(Object(ce.a)({ref:t.innerRef},t.droppableProps),{},{children:[e.pool.map((function(t,n){var a=e.leagueTeams?e.leagueTeams[t.leagueTeamID]:null;return a?Object(Ce.jsx)(Gt,{leagueTeam:a,index:n,setupIsLocked:e.setupIsLocked,currPool:e.poolNumber,prevPool:t.prevPool},a.id):null})),t.placeholder]}))}})]})},Wt=Oe.c.div.withConfig({displayName:"RoundPoolList__Container",componentId:"sc-oqib34-0"})(["width:100%;"]),Yt=Oe.c.div.withConfig({displayName:"RoundPoolList__PoolListContainer",componentId:"sc-oqib34-1"})(["display:flex;flex-wrap:wrap;align-items:flex-start;"]),Vt=function(e){var t=e.teamPools;return Object(Ce.jsx)(Wt,{children:Object(Ce.jsx)(Yt,{children:Object.keys(t).map((function(n,a){return Object(Ce.jsx)(qt,{poolNumber:parseInt(n),pool:t[n],leagueTeams:e.leagueTeams,setupIsLocked:e.setupIsLocked},n)}))})})},Ht=function(){var e=Object(ae.a)(Object(ee.a)().mark((function e(t,n,a,r){var i;return Object(ee.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=Object(We.a)("league-handleTeamPoolPlayNextRound"),e.next=4,i({leagueID:t,sessionID:n,round:a,teamPools:r});case 4:return e.abrupt("return",!0);case 7:return e.prev=7,e.t0=e.catch(0),Object(qe.a)("Sorry, a problem occured while trying to prepare your next round. Please try again or contact an administrator."),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),Qt=Oe.c.div.withConfig({displayName:"RoundSetup__Container",componentId:"sc-jjsujg-0"})([".setup{display:flex;margin-top:1.5rem;}.unbalanced-pools-warning{margin:0.5rem 0rem;color:",";font-size:1rem;.icon{margin-right:0.5rem;}}.buttons-container{margin-top:1.5rem;display:flex;justify-content:center;button{margin-left:0.75rem;font-size:1.15rem;}}"],(function(e){return e.theme.colors.warning})),Kt=Oe.c.div.withConfig({displayName:"RoundSetup__PromotionCount",componentId:"sc-jjsujg-1"})(["font-size:1.25rem;margin-top:1rem;"]),$t=Oe.c.div.withConfig({displayName:"RoundSetup__PromotionCountInput",componentId:"sc-jjsujg-2"})(["display:inline-flex;margin-left:1rem;.minus,.value,.plus{width:2.5rem;text-align:center;user-select:none;}.minus{background-color:",";border-top-left-radius:0.25rem;border-bottom-left-radius:0.25rem;line-height:1.25;cursor:pointer;}.plus{background-color:",";border-top-right-radius:0.25rem;border-bottom-right-radius:0.25rem;line-height:1.25;cursor:pointer;}"],(function(e){return e.theme.colors.lightgray}),(function(e){return e.theme.colors.lightgray})),Jt=Object(we.b)((function(e){return{league:e.league.data,session:e.session.data,statistics:e.session.statistics}}),{})((function(e){var t=Object(xe.useState)(!1),n=Object(ne.a)(t,2),a=n[0],r=n[1],i=Object(xe.useState)(1),o=Object(ne.a)(i,2),s=o[0],c=o[1],l=Object(xe.useState)(null),d=Object(ne.a)(l,2),u=d[0],m=d[1],b=e.league,p=e.statistics,g=e.round,j=e.newRound,h=Object(xe.useMemo)((function(){if(!p)return 1;var e=1e5,t=0;return p[g-1]?Object.entries(p[g-1]).forEach((function(n){var a=Object(ne.a)(n,2),r=(a[0],a[1]),i=Object.keys(r).length;i<e&&(e=i),t++})):e=2,1===t?0:2===t?e:Math.floor(e/2)}),[p,g]);Object(xe.useEffect)((function(){if(p&&p[g-1]){var e={},t=p[g-1];Object.entries(t).forEach((function(t){var n=Object(ne.a)(t,2),a=n[0],r=n[1],i=[],o=Object.keys(r).map((function(e){return{id:e,stats:r[e]}}));pe(o).forEach((function(e){i.push({leagueTeamID:e.id,prevPool:parseInt(a)})})),e[a]=i})),Object.entries(e).forEach((function(t,n,a){var r=Object(ne.a)(t,2),i=r[0],o=r[1],c=Object(Ue.a)(o),l=Object(Ue.a)(a);if(n!==a.length-1)for(var d=1;d<=s;d++)e[i][c.length-d]=l[n+1][1][s-d],e[(parseInt(i)+1).toString()][s-d]=c[c.length-d]})),m(e)}}),[s,p,g]);var f=function(){var t=Object(ae.a)(Object(ee.a)().mark((function t(){var n;return Object(ee.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r(!0),!u){t.next=11;break}return n={},Object.entries(u).forEach((function(e){var t=Object(ne.a)(e,2),a=t[0],r=t[1];n[a]=r.map((function(e){return e.leagueTeamID}))})),t.next=6,Ht(e.league.id,e.session.id,g,n);case 6:if(!t.sent){t.next=11;break}return r(!1),e.closeModal(),t.abrupt("return");case 11:r(!1);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),O=Object(xe.useMemo)((function(){return!j&&(u&&Object.entries(u).every((function(e){var t=Object(ne.a)(e,2),n=t[0],a=t[1];return p&&p[g-1]&&Object.keys(p[g-1][parseInt(n)]).length===a.length})))}),[p,u,g,j]);return Object(Ce.jsxs)(Qt,{children:[Object(Ce.jsxs)("h2",{children:["Round ",e.round," - Setup"]}),Object(Ce.jsxs)(Kt,{children:["Apply promotions/relegations:",Object(Ce.jsxs)($t,{children:[Object(Ce.jsx)("div",{className:"minus",onClick:function(){return c((function(e){return e>0?e-1:0}))},children:"-"}),Object(Ce.jsx)("div",{className:"value",children:s}),Object(Ce.jsx)("div",{className:"plus",onClick:function(){return c((function(e){return e<h?e+1:h}))},children:"+"})]})]}),Object(Ce.jsx)(Me.a,{style:{fontSize:"1rem",marginTop:"0.75rem"},children:"Teams are ordered according to the final standings of the previous round, which allows you to easily apply promotions and relegations."}),Object(Ce.jsx)("div",{className:"setup",children:u?Object(Ce.jsx)(Te.a,{onDragEnd:function(e,t){var n=e.destination,a=e.source;if(n&&(n.droppableId!==a.droppableId||n.index!==a.index)&&u&&u[a.droppableId]){var r=Object(ce.a)({},u),i=Object(ce.a)({},u[a.droppableId][a.index]);r[a.droppableId].splice(a.index,1),r[n.droppableId].splice(n.index,0,i),m(r)}},children:Object(Ce.jsx)(Vt,{leagueTeams:b.leagueTeams,teamPools:u,setupIsLocked:a})}):Object(Ce.jsx)("div",{children:"Preparing your pools..."})}),!O&&!j&&Object(Ce.jsxs)("div",{className:"unbalanced-pools-warning",children:[Object(Ce.jsx)("i",{className:"fas fa-exclamation-triangle icon"}),"If you change the number of teams per pool, existing matches from round ",g," will be deleted and replaced. The number of matches might change."]}),Object(Ce.jsxs)("div",{className:"buttons-container",children:[Object(Ce.jsx)(ot.a,{theme:"success",onClick:f,size:"lg",loading:a,disabled:a,children:"Confirm setup"}),Object(Ce.jsx)(ot.a,{size:"lg",disabled:a,onClick:e.closeModal,children:"Cancel"})]})]})})),Xt=Oe.c.div.withConfig({displayName:"OtherSessionEditor__Container",componentId:"sc-u6q6ed-0"})([".header{display:flex;align-items:center;margin-bottom:1rem;.title{margin-bottom:0;}.go-back{margin-right:1rem;.icon{margin-right:0.5rem;}}}.setup{margin-top:1.5rem;}.buttons-container{margin-top:1.5rem;display:flex;justify-content:center;button{margin-left:0.75rem;font-size:1.15rem;}.icon{margin-right:0.5rem;}}"]),Zt=Oe.c.div.withConfig({displayName:"OtherSessionEditor__NoSetupMessage",componentId:"sc-u6q6ed-1"})(["text-align:center;padding-top:2rem;p{padding-bottom:2rem;}.icon{margin-right:0.5rem;}"]),en=function(e){var t=e.statistics,n=Object(xe.useState)(0),a=Object(ne.a)(n,2),r=a[0],i=a[1],o=Object(xe.useState)(null),s=Object(ne.a)(o,2),c=s[0],l=s[1],d=Object(xe.useMemo)((function(){if(!t)return 1;var e=1e5,n=0;return t?Object.entries(t).forEach((function(t){var a=Object(ne.a)(t,2),r=(a[0],a[1]),i=Object.keys(r).length;i<e&&(e=i),n++})):e=2,1===n?0:2===n?e:Math.floor(e/2)}),[t]);Object(xe.useEffect)((function(){if(t){var e={};Object.entries(t).forEach((function(t){var n=Object(ne.a)(t,2),a=n[0],r=n[1],i=[],o=Object.keys(r).map((function(e){return{id:e,stats:r[e]}}));pe(o).forEach((function(e){i.push({leagueTeamID:e.id,prevPool:parseInt(a)})})),e[a]=i})),Object.entries(e).forEach((function(t,n,a){var i=Object(ne.a)(t,2),o=i[0],s=i[1],c=Object(Ue.a)(s),l=Object(Ue.a)(a);if(n!==a.length-1)for(var d=1;d<=r;d++)e[o][c.length-d]=l[n+1][1][r-d],e[(parseInt(o)+1).toString()][r-d]=c[c.length-d]})),l(e)}}),[r,t]);var u=function(){var t=Object(ae.a)(Object(ee.a)().mark((function t(){var n;return Object(ee.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c&&(n={},Object.entries(c).forEach((function(e){var t=Object(ne.a)(e,2),a=t[0],r=t[1];n[a]=r.map((function(e){return e.leagueTeamID}))})),e.editTeamPools(n),e.closeModal());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(Ce.jsxs)(Xt,{children:[Object(Ce.jsx)("div",{className:"header",children:Object(Ce.jsxs)("h2",{className:"title",children:[Rt()(e.selectedSession.date.toDate()).format("dddd, MMMM Do")," - Round"," ",e.selectedRound]})}),c&&Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsxs)(Kt,{children:["Apply promotions/relegations:",Object(Ce.jsxs)($t,{children:[Object(Ce.jsx)("div",{className:"minus",onClick:function(){return i((function(e){return e>0?e-1:0}))},children:"-"}),Object(Ce.jsx)("div",{className:"value",children:r}),Object(Ce.jsx)("div",{className:"plus",onClick:function(){return i((function(e){return e<d?e+1:d}))},children:"+"})]})]}),Object(Ce.jsx)(Me.a,{style:{fontSize:"1rem",marginTop:"0.75rem"},children:"Teams are ordered according to the final standings of the previous round, which allows you to easily apply promotions and relegations."})]}),Object(Ce.jsx)("div",{className:"setup",children:c?Object(Ce.jsx)(Te.a,{onDragEnd:function(e,t){var n=e.destination,a=e.source;if(n&&(n.droppableId!==a.droppableId||n.index!==a.index)&&c&&c[a.droppableId]){var r=Object(ce.a)({},c),i=Object(ce.a)({},c[a.droppableId][a.index]);r[a.droppableId].splice(a.index,1),r[n.droppableId].splice(n.index,0,i),l(r)}},children:Object(Ce.jsx)(Vt,{leagueTeams:e.leagueTeams,teamPools:c,setupIsLocked:!1})}):Object(Ce.jsxs)(Zt,{children:[Object(Ce.jsx)("h1",{children:Object(Ce.jsx)("i",{className:"far fa-sad-tear sad-icon"})}),Object(Ce.jsx)("p",{children:"The round you selected is not prepared yet. Please choose another session or round."}),Object(Ce.jsxs)(ot.a,{size:"lg",onClick:e.goBack,children:[Object(Ce.jsx)("i",{className:"fas fa-arrow-left icon"}),"Go back"]})]})}),c&&Object(Ce.jsxs)("div",{className:"buttons-container",children:[Object(Ce.jsxs)(ot.a,{size:"lg",disabled:!1,onClick:e.goBack,children:[Object(Ce.jsx)("i",{className:"fas fa-arrow-left icon"})," Go back"]}),Object(Ce.jsx)(ot.a,{theme:"success",onClick:u,size:"lg",loading:!1,disabled:!1,children:"Confirm setup"})]})]})},tn=function(e){var t=Object(xe.useState)(!0),n=Object(ne.a)(t,2),a=n[0],r=n[1],i=Object(xe.useState)(void 0),o=Object(ne.a)(i,2),s=o[0],c=o[1],l=Object(xe.useState)(void 0),d=Object(ne.a)(l,2),u=d[0],m=d[1],b=Object(xe.useState)(void 0),p=Object(ne.a)(b,2),g=p[0],j=p[1],h=Object(xe.useState)(!1),f=Object(ne.a)(h,2),O=f[0],x=f[1],y=Object(xe.useState)(void 0),v=Object(ne.a)(y,2),w=v[0],S=v[1];return Object(xe.useEffect)((function(){r(!0);var t=function(){var t=Object(ae.a)(Object(ee.a)().mark((function t(){var n,a;return Object(ee.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,re.a.firestore().collection("leagues").doc(e.leagueID).collection("sessions").where("format.name","==","teamPoolPlay").get();case 2:n=t.sent,a=[],n.forEach((function(e){a.push(Object(ce.a)(Object(ce.a)({},e.data()),{},{id:e.id}))})),c(a),r(!1);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e.leagueID]),Object(xe.useEffect)((function(){x(!0);var t=function(){var t=Object(ae.a)(Object(ee.a)().mark((function t(n){var a,r,i;return Object(ee.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,re.a.firestore().collection("leagues").doc(e.leagueID).collection("sessions").doc(n.id).collection("matches").where("round","==",g).get();case 2:a=t.sent,r=[],a.forEach((function(e){r.push(Object(ce.a)(Object(ce.a)({},e.data()),{},{id:e.id}))})),0!==r.length&&r[0].team1&&r[0].team2?(i=me(r),S(i)):S({}),x(!1);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();u&&g&&t(u)}),[e.leagueID,u,g]),u&&g||!s?s&&u&&g&&w?Object(Ce.jsx)(en,{selectedSession:u,selectedRound:g,statistics:w[g],leagueTeams:e.leagueTeams,closeModal:e.closeModal,editTeamPools:e.editTeamPools,goBack:function(){m(void 0),j(void 0),S(void 0)}}):Object(Ce.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"4rem 0rem"},children:[Object(Ce.jsx)(_t.a,{size:40}),Object(Ce.jsx)("div",{style:{marginTop:"1rem"},children:a?"Loading other sessions...":O?"Loading setup...":"Loading..."})]}):Object(Ce.jsx)(At,{sessions:s,setSelectedSession:m,setSelectedRound:j,closeModal:e.closeModal})},nn=n(977),an=Oe.c.div.withConfig({displayName:"Setup__Container",componentId:"sc-1xcu2ah-0"})(["padding-top:9.65rem;.setup{display:flex;opacity:",";}.t-list-container{width:45%;padding-right:0.5rem;}.pools-container{width:55%;padding-left:0.5rem;}"," "," ",""],(function(e){return e.setupIsLocked?.675:1}),Le.b.greaterThan("sm")(v||(v=Object(fe.a)(["\n    .t-list-container {\n      padding-right: 1rem;\n    }\n    .pools-container {\n      padding-left: 1rem;\n    }\n  "]))),Le.b.greaterThan("md")(w||(w=Object(fe.a)(["\n    padding-top: 6rem;\n    .t-list-container {\n      width: 35%;\n    }\n    .pools-container {\n      width: 65%;\n    }\n  "]))),Le.b.greaterThan("lg")(S||(S=Object(fe.a)(["\n    padding-top: 0;\n    padding-bottom: 6.4rem;\n  "])))),rn=Oe.c.div.withConfig({displayName:"Setup__SetupIsLocked",componentId:"sc-1xcu2ah-1"})(["display:inline-block;padding:0.75rem 1.5rem;border-radius:0.5rem;background:rgba(220,53,69,0.15);margin-bottom:1.5rem;.title{font-weight:700;.icon{margin-right:0.5rem;}}"]),on=Object(we.b)((function(e){return{league:e.league.data,session:e.session.data,addingPool:!!e.session.loading.addTeamPool,removingPool:!!e.session.loading.removeTeamPool,savingFormatSetting:!!e.session.loading.editFormatSetting,generatingMatches:!!e.session.loading.generateMatches,deletingMatches:!!e.session.loading.deleteMatches}}),(function(e){return Object(ve.b)({getLeagueTeams:Ge.j,generateMatches:Ye,deleteMatches:Ve,editTeamPools:Qe,addTeamPool:Ke,removeTeamPool:$e,changeTeamPool:Je,editFormatSetting:He},e)}))((function(e){var t=Object(Se.h)(),n=Object(xe.useState)(!1),a=Object(ne.a)(n,2),r=a[0],i=a[1],o=e.league,s=e.session,c=Object(xe.useContext)(nn.a).width,l=o?Object.values(o.leagueTeams||{}).length:1,d=o?o.id:"",u=e.getLeagueTeams;Object(xe.useEffect)((function(){0===l&&u(d)}),[u,l,d]);var m=Object(xe.useMemo)((function(){return s&&s.teamPools&&s.teamPools[1]||{}}),[s]),b=o?o.leagueTeams:void 0,p=Object(xe.useMemo)((function(){if(!m||!m[1])return"You need at least 1 pool.";var e=void 0;return Object.values(m).some((function(t){return t.length<2?(e="Every pool must have at least 2 teams.",!0):t.some((function(t){return!!(b&&b[t]&&b[t].deletedAt)&&(e="You cannot prepare your matches with a team that was removed from your league ("+b[t].team.name+").",!0)}))})),e}),[m,b]);if(!o||!s)return t.push("/"),null;var g=s.teamPools&&s.teamPools[1]||{},j=Object(ce.a)({},o.leagueTeams||{});return Object.values(g).forEach((function(e){e.forEach((function(e){delete j[e]}))})),Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)(Et,{generateMatches:function(){p?Object(qe.a)(p):e.generateMatches(o.id,s.id,(function(){return t.push("/".concat(o.url,"/session/").concat(s.id))}))},deleteMatches:function(){e.deleteMatches(o.id,s.id)},deletingMatches:e.deletingMatches,generatingMatches:e.generatingMatches,format:s.format,editFormatSetting:function(t,n){e.editFormatSetting(o.id,s.id,t,n)},savingFormatSetting:e.savingFormatSetting,setupIsLocked:!!s.matchesAreGenerated,sideMenuWidth:c}),Object(Ce.jsxs)(an,{setupIsLocked:!!s.matchesAreGenerated,children:[s.matchesAreGenerated&&Object(Ce.jsxs)(rn,{children:[Object(Ce.jsxs)("div",{className:"title",children:[Object(Ce.jsx)("i",{className:"fas fa-lock icon"}),"Your setup is locked!"]}),Object(Ce.jsx)("div",{children:"Once your matches are generated, you cannot edit your setup. If you need to edit something, you have to delete all your matches before."})]}),Object(Ce.jsx)("div",{className:"setup",children:Object(Ce.jsxs)(Te.a,{onDragEnd:function(t,n){var a=t.destination,r=t.source,i=t.draggableId;a&&(a.droppableId===r.droppableId&&a.index===r.index||function(t,n,a,r){e.changeTeamPool(o.id,s.id,t,n,a,r,s.teamPools&&s.teamPools[1]||{})}(i,"team-list"===r.droppableId?null:r.droppableId,"team-list"===a.droppableId?null:a.droppableId,a.index))},children:[Object(Ce.jsx)("div",{className:"t-list-container",children:Object(Ce.jsx)(ze,{totalTeamCount:Object.keys(o.leagueTeams||{}).length,leagueTeams:Object.values(j),setupIsLocked:!!s.matchesAreGenerated})}),Object(Ce.jsx)("div",{className:"pools-container",children:Object(Ce.jsx)(bt,{addTeamPool:function(){e.addTeamPool(o.id,s.id,s.teamPools&&s.teamPools[1]||{})},removeTeamPool:function(t){e.removeTeamPool(o.id,s.id,s.teamPools&&s.teamPools[1]||{},t)},leagueTeams:o.leagueTeams,teamPools:s.teamPools,setupIsLocked:!!s.matchesAreGenerated,openOtherSessionModal:function(){return i(!0)},errorMessage:p})})]})})]}),Object(Ce.jsx)(ht.a,{isOpen:r,onRequestClose:function(){return i(!1)},width:"1200px",children:Object(Ce.jsx)(tn,{leagueID:o.id,leagueTeams:o.leagueTeams,closeModal:function(){return i(!1)},editTeamPools:function(t){return e.editTeamPools(o.id,s.id,(s.teamPools||{})[1],t)}})})]})})),sn=n(20),cn=Oe.c.div.withConfig({displayName:"ReportScoreClickable__Wrapper",componentId:"sc-1qwy42c-0"})(["display:flex;justify-content:center;padding:0.5rem;"]),ln=Oe.c.div.withConfig({displayName:"ReportScoreClickable__Container",componentId:"sc-1qwy42c-1"})(["display:flex;justify-content:space-between;border-radius:0.75rem;padding:0.5rem 1.35rem 0.5rem 1.5rem;background:",";box-shadow:0 3px 6px rgba(0,0,0,0.08),0 0 60px -16px rgba(0,0,0,0.08);cursor:pointer;font-size:",";width:300px;max-width:100%;.label{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding-right:0.75rem;}.arrow{display:flex;align-items:center;color:",";font-size:",";}&:hover{transform:translateY(-1px);}"],(function(e){return e.theme.colors.whites[0]}),(function(e){var t=e.fontSize;return t?t+"rem":"1rem"}),(function(e){return e.theme.colors.primary}),(function(e){var t=e.fontSize;return t?.8*t+"rem":"0.8rem"})),dn=function(e){return Object(Ce.jsx)(cn,{className:e.className||"",children:Object(Ce.jsxs)(ln,{onClick:e.onClick,fontSize:e.fontSize,className:"clickable-container",children:[Object(Ce.jsx)("div",{className:"label",children:e.label}),Object(Ce.jsx)("div",{className:"arrow",children:Object(Ce.jsx)("i",{className:"fas fa-long-arrow-alt-right"})})]})})},un=Oe.c.div.withConfig({displayName:"ReportScoreRound__Container",componentId:"sc-1aeir48-0"})([".title{text-align:center;margin-bottom:0.5rem;}.subtitle{text-align:center;color:",";margin-bottom:1.25rem;}"],(function(e){return e.theme.colors.primary})),mn=function(e){var t=Object(xe.useMemo)((function(){for(var t=!0,n=1,a=function(){var a=n;e.matches.find((function(e){return e.round===a&&!!e.team1&&!!e.team2}))?n++:t=!1};!0===t;)a();for(var r=[],i=1;i<=n-1;i++)r.push(i);return r}),[e.matches]);return 1===t.length&&e.setRound(t[0]),Object(Ce.jsxs)(un,{children:[Object(Ce.jsx)("h1",{className:"title",children:"Report a score"}),Object(Ce.jsx)("h5",{className:"subtitle",children:"Select a round"}),t.map((function(n){return Object(Ce.jsx)(dn,{label:"Round "+n,onClick:function(){return e.setRound(n)},fontSize:Math.round(100*(1.25+1/Math.min(t.length,5)))/100},n)}))]})},bn=Oe.c.div.withConfig({displayName:"ReportScorePool__Container",componentId:"sc-hse85c-0"})([".title{text-align:center;margin-bottom:0.5rem;}.subtitle{text-align:center;color:",";margin-bottom:1.25rem;}"],(function(e){return e.theme.colors.primary})),pn=function(e){for(var t=[],n=1;n<=e.numberOfPools;n++)t.push(n);return Object(Ce.jsxs)(bn,{children:[Object(Ce.jsxs)("h1",{className:"title",children:["Round ",e.round]}),Object(Ce.jsx)("h5",{className:"subtitle",children:"Select a pool"}),t.map((function(n){return Object(Ce.jsx)(dn,{label:Z(n),onClick:function(){return e.setPoolNumber(n)},fontSize:Math.round(100*(1.25+1/Math.min(t.length,5)))/100},n)}))]})},gn=Oe.c.div.withConfig({displayName:"ReportScoreTeam__Container",componentId:"sc-1y8r9mw-0"})(["text-align:center;.title{text-align:center;margin-bottom:0.5rem;}.subtitle{text-align:center;color:",";margin-bottom:1.25rem;}"],(function(e){return e.theme.colors.primary})),jn=Object(Oe.c)(dn).withConfig({displayName:"ReportScoreTeam__StyledReportScoreClickable",componentId:"sc-1y8r9mw-1"})([".clickable-container{width:400px;}"]),hn=function(e){var t=e.teams,n=e.poolNumber,a=e.round;return Object(Ce.jsxs)(gn,{children:[n&&Object(Ce.jsxs)("h1",{className:"title",children:["Pool ",n]}),!n&&a&&Object(Ce.jsxs)("h1",{className:"title",children:["Round ",a]}),Object(Ce.jsx)("h5",{className:"subtitle",children:e.title}),t.map((function(n){var a=e.leagueTeams[n];return a?Object(Ce.jsx)(jn,{label:a.team.name,onClick:function(){return e.setTeam(a)},fontSize:Math.round(100*(1.25+1/Math.min(t.length,5)))/100},a.id):null}))]})},fn=n(1041),On=n(1012),xn=n(1010),yn=n(1011),vn=Oe.c.div.withConfig({displayName:"ReportScoreMatches__Container",componentId:"sc-1caurt7-0"})(["text-align:center;.title{text-align:center;margin-bottom:1.5rem;}.match-wrapper{display:flex;justify-content:center;padding:0.75rem;}.confrontation-number{font-weight:600;text-align:center;font-size:1.25rem;}.button-wrapper{display:inline-block;margin-top:2rem;}"]),wn=Object(Oe.c)(fn.a).withConfig({displayName:"ReportScoreMatches__StyledMatchContainer",componentId:"sc-1caurt7-1"})(["box-shadow:0 3px 6px rgba(0,0,0,0.08),0 0 60px -16px rgba(0,0,0,0.08);width:100%;max-width:500px;text-align:left;cursor:inherit;"]),Sn=Oe.c.div.withConfig({displayName:"ReportScoreMatches__ErrorWarning",componentId:"sc-1caurt7-2"})(["font-weight:600;color:",";margin-top:0.5em;.icon{margin-right:0.5rem;}"],(function(e){return e.theme.colors.danger})),Tn=function(e){var t=Object(xe.useState)(e.matches.map((function(e){return Object(ce.a)(Object(ce.a)({},e),{},{games:e.games.map((function(e){return Object(ce.a)({},e)}))})}))),n=Object(ne.a)(t,2),a=n[0],r=n[1],i=Object(xe.useState)(void 0),o=Object(ne.a)(i,2),s=o[0],c=o[1],l=function(e,t,n,i){var o=1===n?"team1Score":"team2Score",s=1===n?"team2Score":"team1Score",c=Object(Ue.a)(a);c[e].games[t]=Object(ce.a)(Object(ce.a)({},c[e].games[t]),{},Object(te.a)({},o,i?parseInt(i):null)),null===c[e].games[t][o]&&null===c[e].games[t][s]&&c[e].games.splice(t,1);var l=X(c[e]);c[e].winner=l,r(c)};return Object(Ce.jsxs)(vn,{children:[Object(Ce.jsx)("h1",{className:"title",children:"Report score"}),a.map((function(t,n){for(var r=Q(t,e.leagueTeams||{},{}),i=K(t,e.leagueTeams||{},{}),o=[],s=0;s<a[n].numberOfGames;s++)o.push(Object(Ce.jsx)(yn.a,{matchNumber:t.matchNumber,canEdit:!0,editMode:!0,setEditMode:function(){},values:t.games[s],gameIndex:s,handleChange:function(e,t,a){return l(n,e,t,a)},submitScores:function(){}},s));return Object(Ce.jsxs)(ye.a.Fragment,{children:[e.matches.length>1&&Object(Ce.jsxs)("div",{className:"confrontation-number",children:["Confrontation ",n+1]}),Object(Ce.jsx)("div",{className:"match-wrapper",children:Object(Ce.jsxs)(wn,{editMode:!1,canEdit:!0,children:[Object(Ce.jsx)(On.a,{loading:!!t.saving,children:Object(Ce.jsxs)("div",{className:"wrapper",children:[Object(Ce.jsx)("div",{className:"match-number",children:t.matchNumber}),Object(Ce.jsxs)("div",{className:"subtitle",children:["Pool ",t.poolNumber]})]})}),Object(Ce.jsxs)(fn.b,{children:[Object(Ce.jsx)("div",{className:1===t.winner?"winner":"",children:r}),Object(Ce.jsx)("div",{className:2===t.winner?"winner":"",children:i})]}),Object(Ce.jsxs)(xn.a,{winner:t.winner,children:[Object(Ce.jsxs)("i",{children:[Object(Ce.jsx)("div",{className:"team-1-caret",children:Object(Ce.jsx)("i",{className:"fas fa-caret-right"})}),Object(Ce.jsx)("i",{className:"team-2-caret",children:Object(Ce.jsx)("i",{className:"fas fa-caret-right"})})]}),o]})]})},t.id)]},t.id)})),s&&Object(Ce.jsxs)(Sn,{children:[Object(Ce.jsx)("i",{className:"fas fa-exclamation-circle icon"}),s]}),Object(Ce.jsx)("div",{className:"button-wrapper",children:Object(Ce.jsxs)(ot.a,{theme:"success",size:"lg",onClick:function(){a.every((function(e){return e.games.every((function(e){return!(!e.team1Score&&0!==e.team1Score&&e.team2Score||!e.team2Score&&0!==e.team2Score&&e.team1Score)}))}))?e.reportScores(e.matches,a):c("You must provide a score for both teams.")},loading:e.reportingScores,children:["Save score",e.matches.length>1&&"s"]})})]})},Nn=n(77),Cn=Oe.c.div.withConfig({displayName:"ReportScoreSuccess__Container",componentId:"sc-1a1tj02-0"})(["min-height:calc(100vh - 9rem - 80px);display:flex;flex-direction:column;justify-content:space-between;text-align:center;.title{text-align:center;margin-bottom:0.5rem;}.subtitle{color:",";}.success-message{font-size:1.4rem;.icon{font-size:8rem;color:",";margin-bottom:1rem;margin-top:1rem;}}.buttons-container{display:flex;justify-content:center;margin-bottom:0.5rem;button{margin:0rem 0.5rem 0.5rem;font-size:1.25rem;}.icon{margin-right:0.75rem;}}"],(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.primary})),Pn=function(e){return Object(Ce.jsxs)(Cn,{children:[Object(Ce.jsx)("h1",{className:"title",children:"Report Score"}),Object(Ce.jsxs)("div",{className:"success-message",children:[Object(Ce.jsx)("h3",{className:"subtitle",children:"Success!"}),Object(Ce.jsx)("i",{className:"fas fa-check icon"}),Object(Ce.jsx)("p",{children:"Your score was succesfully saved."})]}),Object(Ce.jsxs)("div",{className:"buttons-container",children:[Object(Ce.jsxs)(ot.a,{theme:"primary",size:"lg",onClick:e.reset,children:[Object(Ce.jsx)("i",{className:"fas fa-angle-left icon"}),"Report another score"]}),Object(Ce.jsx)(ot.a,{size:"lg",onClick:e.closeModal,children:"Close"})]})]})},In=function(e){var t=e.matches,n=e.leagueTeams,a=e.userFromAuth,r=e.canReportAnyScore?"anyScore":"myScore",i=Object(xe.useState)(void 0),o=Object(ne.a)(i,2),s=o[0],c=o[1],l=Object(xe.useState)(void 0),d=Object(ne.a)(l,2),u=d[0],m=d[1],b=Object(xe.useState)(void 0),p=Object(ne.a)(b,2),g=p[0],j=p[1],h=Object(xe.useState)(void 0),f=Object(ne.a)(h,2),O=f[0],x=f[1],y=Object(xe.useState)(!1),v=Object(ne.a)(y,2),w=v[0],S=v[1],T=Object(Nn.a)(e.reportingScores);Object(xe.useEffect)((function(){e.reportingScores||!T||e.reportScoresError||S(!0)}),[e.reportingScores,e.reportScoresError,T]);var N=Object(xe.useMemo)((function(){if("anyScore"!==r&&a&&n){var e=[];return t.forEach((function(t){[t.team1?n[t.team1.leagueTeamID]:void 0,t.team2?n[t.team2.leagueTeamID]:void 0].forEach((function(n){var r=!!Object.values((null===n||void 0===n?void 0:n.team.players)||{}).find((function(e){return e.uid===a.uid}));n&&r&&!e.find((function(e){return e.leagueTeam.id===n.id}))&&e.push({leagueTeam:n,poolNumber:t.poolNumber})}))})),e}}),[t,r,n,a]);Object(xe.useEffect)((function(){N&&1===N.length&&(m(N[0].poolNumber),j(N[0].leagueTeam))}),[N]);var C=Object(xe.useMemo)((function(){for(var t=!0,n=1,a=function(){var a=n;e.matches.find((function(e){return"poolNumber"in e&&e.poolNumber===a&&!!e.team1&&!!e.team2}))?n++:t=!1};!0===t;)a();return n-1===1&&m(1),n-1}),[e.matches]),P=Object(xe.useMemo)((function(){if(s&&u){var e=[];return t.forEach((function(t){t.round===s&&t.poolNumber===u&&(t.team1&&!e.find((function(e){return e===t.team1.leagueTeamID}))&&e.push(t.team1.leagueTeamID),t.team2&&!e.find((function(e){return e===t.team2.leagueTeamID}))&&e.push(t.team2.leagueTeamID))})),e}}),[s,u,t]),I=Object(xe.useMemo)((function(){if(s&&g&&O)return t.filter((function(e){return e.round===s&&e.team1&&e.team2&&(e.team1.leagueTeamID===g.id||e.team1.leagueTeamID===O.id)&&(e.team2.leagueTeamID===g.id||e.team2.leagueTeamID===O.id)}))}),[t,s,g,O]);return s?u||"anyScore"!==r?g||!P&&!N?w?Object(Ce.jsx)(Pn,{reset:function(){c(void 0),m(1===C?1:N&&1===N.length?N[0].poolNumber:void 0),j(N&&1===N.length?N[0].leagueTeam:void 0),x(void 0),S(!1)},closeModal:e.closeModal}):g&&u&&!O&&P?Object(Ce.jsx)(hn,{teams:P.filter((function(e){return e!==g.id})),poolNumber:u,setTeam:x,leagueTeams:n||{},title:N?"Select your opponent":"Select the second team"}):I?Object(Ce.jsx)(Tn,{matches:I,leagueTeams:n||{},reportScores:e.reportScores,reportingScores:e.reportingScores}):Object(Ce.jsx)("h1",{children:"Report Score"}):Object(Ce.jsx)(hn,{teams:N?N.map((function(e){return e.leagueTeam.id})):P||[],poolNumber:u,round:s,setTeam:N?function(e){var t=N.find((function(t){return t.leagueTeam.id===e.id}));t&&(m(t.poolNumber),j(t.leagueTeam))}:j,leagueTeams:n||{},title:N?"Select your team":"Select a first team"}):Object(Ce.jsx)(pn,{round:s,numberOfPools:C,setPoolNumber:m}):Object(Ce.jsx)(mn,{matches:t,setRound:c})},En=["isOpen","setIsOpen"],_n=Object(Oe.c)(ht.a).withConfig({displayName:"ReportScoreModal__StyledModal",componentId:"sc-1wwhi0e-0"})(["min-height:calc(100vh - 6rem - 80px);padding:1.5rem 0.5rem;"]),kn=function(e){e.isOpen;var t=e.setIsOpen,n=Object(sn.a)(e,En);return Object(Ce.jsx)(_n,{isOpen:e.isOpen,onRequestClose:function(){return e.setIsOpen(!1)},width:"750px",children:Object(Ce.jsx)(In,Object(ce.a)(Object(ce.a)({},n),{},{closeModal:function(){return t(!1)}}))})},Rn="player",Ln={name:"playerKOTC",rounds:1,confrontations:1,numberOfGames:1,allowDraws:!0},Mn={wins:0,losses:0,draws:0,pf:0,pa:0,gf:0,ga:0,court:0,seed:0},Dn=function(e,t,n){var a=e.team1?n[e.team1.leaguePlayers[0]]:void 0,r=e.team1?n[e.team1.leaguePlayers[1]]:void 0;return a&&r?Fn(a)+"/"+Fn(r):"Player "+e.seeds[0]+"/Player "+e.seeds[1]},An=function(e,t,n){var a=e.team2?n[e.team2.leaguePlayers[0]]:void 0,r=e.team2?n[e.team2.leaguePlayers[1]]:void 0;return a&&r?Fn(a)+"/"+Fn(r):"Player "+e.seeds[2]+"/Player "+e.seeds[3]},Fn=function(e){var t=e.player;if(t.firstName&&t.lastName)return t.firstName+" "+t.lastName[0]+".";var n=e.player.displayName.split(" ");return n[0]&&n[1]?n[0]+" "+n[1][0]+".":n[0]},zn=function(e,t,n,a){return[t.team1,t.team2].some((function(t){return t&&t.leaguePlayers.some((function(t){return"string"===typeof t&&a[t]&&a[t].player.uid===e}))}))},Gn=function(e,t,n,a){return t.filter((function(t){return zn(e,t,n,a)}))},Un=function(e){var t=0,n=0;return e.games?(e.games.forEach((function(e){(e.team1Score&&e.team2Score||e.team1Score&&0===e.team2Score||e.team2Score&&0===e.team1Score)&&(e.team1Score=+e.team1Score,e.team2Score=+e.team2Score,e.team1Score>e.team2Score?t++:e.team1Score<e.team2Score&&n++)})),t>e.numberOfGames/2&&e.team1?1:n>e.numberOfGames/2&&e.team2?2:null):null},Bn=function(e){return"Court "+e},qn=function(){var e=Object(ae.a)(Object(ee.a)().mark((function e(t,n,a){var r,i,o;return Object(ee.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=re.a.firestore(),i=r.collection("leagues").doc(t),o=i.collection("sessions").doc(n).collection("matches").doc(a.id),e.next=5,r.runTransaction(function(){var e=Object(ae.a)(Object(ee.a)().mark((function e(t){var r,s,c,l,d,u,m,b,p,g,j,h;return Object(ee.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get(o);case 2:if((r=e.sent).exists){e.next=6;break}return t.update(o,{}),e.abrupt("return",{success:!1,message:"Match not found."});case 6:if((s=r.data()).team1&&s.team1.leaguePlayers&&s.team2&&s.team2.leaguePlayers){e.next=10;break}return t.update(o,{}),e.abrupt("return",{success:!1,message:"Teams not found."});case 10:for(c=0,l=[s.team1,s.team2];c<l.length;c++){u=Wn(s,(d=l[c]).leaguePlayers),m=Wn(a,d.leaguePlayers),b=re.a.firestore.FieldValue.increment,p=m&&u?{wins:b(m.wins-u.wins),losses:b(m.losses-u.losses),draws:b(m.draws-u.draws),pf:b(m.pf-u.pf),pa:b(m.pa-u.pa),gf:b(m.gf-u.gf),ga:b(m.ga-u.ga),court:b(s.courtNumber)}:{},g=Object(le.a)(d.leaguePlayers);try{for(g.s();!(j=g.n()).done;)h=j.value,t.set(i.collection("playerStatistics").doc(n),Object(te.a)({},h,p),{merge:!0})}catch(f){g.e(f)}finally{g.f()}}return a.winner=Yn(a),t.update(o,{games:a.games,winner:a.winner}),e.abrupt("return",{success:!0,match:a});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Wn=function(e,t){var n=e.team1&&e.team1.leaguePlayers===t?1:e.team2&&e.team2.leaguePlayers===t?2:null;if(!n)return null;var a=!1,r=[];if(e.games.forEach((function(e){!e.team1Score&&0!==e.team1Score||!e.team2Score&&0!==e.team2Score||(a=!0,r.push(e))})),!a)return Mn;var i=Yn(e),o=i===n?1:0,s=null===i||i===n?0:1,c=r.reduce((function(e,t){return e+(1===n?t.team1Score||0:t.team2Score||0)}),0),l=r.reduce((function(e,t){return e+(1===n?t.team2Score||0:t.team1Score||0)}),0),d=0,u=0;return r.forEach((function(e){(e.team1Score||-1)>(e.team2Score||-1)?1===n?d++:u++:(e.team1Score||-1)<(e.team2Score||-1)&&(1===n?u++:d++)})),{wins:o,losses:s,draws:1===e.numberOfGames&&c===l?1:0,pf:c,pa:l,gf:d,ga:u,court:e.courtNumber}},Yn=function(e){var t=0,n=0;return e.games?(e.games.forEach((function(e){(e.team1Score&&e.team2Score||e.team1Score&&0===e.team2Score||e.team2Score&&0===e.team1Score)&&(e.team1Score=+e.team1Score,e.team2Score=+e.team2Score,e.team1Score>e.team2Score?t++:e.team1Score<e.team2Score&&n++)})),t>e.numberOfGames/2&&e.team1?1:n>e.numberOfGames/2&&e.team2?2:null):null},Vn=function(e){var t,n={},a=Object(le.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value,i=r.round,o=r.courtNumber,s=r.team1,c=r.team2;if(n[i]||(n[i]={}),n[i][o]||(n[i][o]={}),s&&c&&2===s.leaguePlayers.length&&2===c.leaguePlayers.length){var l=0,d=0,u=0,m=0,b=0;if(r.games){var p,g=!1,j=Object(le.a)(r.games);try{for(j.s();!(p=j.n()).done;){var h=p.value;!h.team1Score&&0!==h.team1Score||!h.team2Score&&0!==h.team2Score||(g=!0,l+=h.team1Score,d+=h.team2Score,u+=h.team1Score>h.team2Score?1:0,m+=h.team1Score<h.team2Score?1:0)}}catch(N){j.e(N)}finally{j.f()}b=g&&1===r.numberOfGames&&l===d?1:0}for(var f=0,O=[0,1];f<O.length;f++){var x=O[f],y=n[i][o][s.leaguePlayers[x]]||Mn;n[i][o][s.leaguePlayers[x]]={wins:y.wins+(1===r.winner?1:0),losses:y.losses+(2===r.winner?1:0),draws:y.draws+b,pf:y.pf+l,pa:y.pa+d,gf:y.gf+u,ga:y.ga+m,court:y.court+o,seed:r.seeds[x]}}for(var v=0,w=[0,1];v<w.length;v++){var S=w[v],T=n[i][o][c.leaguePlayers[S]]||Mn;n[i][o][c.leaguePlayers[S]]={wins:T.wins+(2===r.winner?1:0),losses:T.losses+(1===r.winner?1:0),draws:T.draws+b,pf:T.pf+d,pa:T.pa+l,gf:T.gf+m,ga:T.ga+u,court:T.court+o,seed:r.seeds[S+2]}}}else n[i][o][0]=Mn,n[i][o][1]=Mn,n[i][o][2]=Mn,n[i][o][3]=Mn}}catch(N){a.e(N)}finally{a.f()}return n},Hn=function(e,t,n){var a=n.round,r=n.courtNumber,i=n.team1,o=n.team2;if(e[a]||(e[a]={}),e[a][r]||(e[a][r]={}),!i||!o||2!==i.leaguePlayers.length||2!==o.leaguePlayers.length)return e;for(var s=ue.playerKOTC.getTeamStatisticsFromMatch(t,1),c=ue.playerKOTC.getTeamStatisticsFromMatch(n,1),l=Object(ce.a)({},e),d=0,u=[0,1];d<u.length;d++){var m=u[d],b=e[a][r][i.leaguePlayers[m]]||Mn;l[a][r][i.leaguePlayers[m]]={wins:b.wins-s.wins+c.wins,losses:b.losses-s.losses+c.losses,draws:b.draws-s.draws+c.draws,pf:b.pf-s.pf+c.pf,pa:b.pa-s.pa+c.pa,gf:b.gf-s.gf+c.gf,ga:b.ga-s.ga+c.ga,court:b.court-s.court+c.court,seed:n.seeds[m]}}for(var p=0,g=[0,1];p<g.length;p++){var j=g[p],h=e[a][r][o.leaguePlayers[j]]||Mn;l[a][r][o.leaguePlayers[j]]={wins:h.wins-s.losses+c.losses,losses:h.losses-s.wins+c.wins,draws:h.draws-s.draws+c.draws,pf:h.pf-s.pa+c.pa,pa:h.pa-s.pf+c.pf,gf:h.gf-s.ga+c.ga,ga:h.ga-s.gf+c.gf,court:h.court-s.court+c.court,seed:n.seeds[j+2]}}return l},Qn=function(e){return Object(de.orderBy)(e,["stats.wins",function(e){return e.stats.pf-e.stats.pa},"stats.seed"],["desc","desc","asc"])},Kn=function(e){return Object(de.orderBy)(e,[function(e){return $n(e.stats)>0&&e.stats.court>0?e.stats.court/$n(e.stats):999},function(e){return $n(e.stats)>0?e.stats.wins:-1},function(e){return e.stats.pf||0===e.stats.pf?e.stats.pf-e.stats.pa:-4}],["asc","desc","desc"])},$n=function(e){return(e.wins||0)+(e.losses||0)+(e.draws||0)},Jn=function(e){return e.playerPools?Object.keys(e.playerPools[1]).map((function(e){return{name:"Court "+e,filter:function(t){return"courtNumber"in t&&t.courtNumber.toString()===e}}})):[]},Xn=Oe.c.div.withConfig({displayName:"PlayerItem__DraggableContainer",componentId:"sc-tkg4y-0"})(["background:",";box-shadow:0 3px 6px rgba(0,0,0,0.08);margin-bottom:0.5rem;padding:0.35rem 1rem;border-radius:0.5rem;"],(function(e){return e.theme.colors.whites[0]})),Zn=Oe.c.div.withConfig({displayName:"PlayerItem__PlayerContainer",componentId:"sc-tkg4y-1"})(["display:flex;align-items:center;.name{flex-grow:1;margin-left:0.75rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}"]),ea=Object(Oe.c)(Ne.a).withConfig({displayName:"PlayerItem__StyledInfoTooltip",componentId:"sc-tkg4y-2"})(["color:",";"],(function(e){return e.theme.colors.warning})),ta=function(e){var t=e.leaguePlayer;return Object(Ce.jsx)(Te.b,{draggableId:t.id,index:e.index,isDragDisabled:e.setupIsLocked,children:function(e,n){return Object(Ce.jsx)(Xn,Object(ce.a)(Object(ce.a)(Object(ce.a)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:Object(Ce.jsxs)(Zn,{children:[Object(Ce.jsx)("div",{children:Object(Ce.jsx)("i",{className:"fas fa-user icon"})}),Object(Ce.jsx)("div",{className:"name",children:t.player.displayName}),t.deletedAt&&Object(Ce.jsx)(ea,{info:"This player was removed from your league."})]})}))}})},na=Oe.c.div.withConfig({displayName:"PlayerList__Container",componentId:"sc-14j2k42-0"})(["height:100%;.title{font-size:1.5rem;margin-bottom:1rem;}",""],Le.b.greaterThan("md")(T||(T=Object(fe.a)(["\n    .title {\n      font-size: 2rem;\n    }\n  "])))),aa=Oe.c.div.withConfig({displayName:"PlayerList__DroppableContainer",componentId:"sc-14j2k42-1"})(["display:flex;flex-wrap:wrap;justify-content:space-between;align-content:flex-start;align-items:flex-start;height:calc(100% - 3.4rem);> div{width:100%;}",""],Le.b.greaterThan("xl")(N||(N=Object(fe.a)(["\n    > div {\n      width: calc(50% - 0.25rem);\n    }\n  "])))),ra=Oe.c.div.withConfig({displayName:"PlayerList__NoPlayerMessage",componentId:"sc-14j2k42-2"})(["width:100% !important;"]),ia=function(e){var t=Re()(e.leaguePlayers,"player.displayName");return Object(Ce.jsxs)(na,{children:[Object(Ce.jsx)("h2",{className:"title",children:"Players"}),Object(Ce.jsx)(Te.c,{droppableId:"player-list",type:"pool",isDropDisabled:e.setupIsLocked,children:function(n,a){return Object(Ce.jsxs)(aa,Object(ce.a)(Object(ce.a)({ref:n.innerRef},n.droppableProps),{},{isDraggingOver:a.isDraggingOver,children:[0===e.totalPlayerCount&&Object(Ce.jsxs)(ra,{children:[Object(Ce.jsx)("p",{style:{marginBottom:"0.5rem"},children:"There are no players in your league yet."}),Object(Ce.jsxs)(Me.a,{children:["To add players to your league, go back to your league dashboard and head over to the ",Object(Ce.jsx)("i",{children:"Setup"})," page."]})]}),e.totalPlayerCount>0&&0===e.leaguePlayers.length&&Object(Ce.jsx)(ra,{children:"All of your players are placed in a pool."}),t.map((function(t,n){return t.deletedAt?null:Object(Ce.jsx)(ta,{leaguePlayer:t,index:n,setupIsLocked:e.setupIsLocked},t.id)})),n.placeholder]}))}})]})},oa=Oe.c.div.withConfig({displayName:"PoolItem__Container",componentId:"sc-1naa5hl-0"})(["background:",";box-shadow:0 3px 6px rgba(0,0,0,0.08);width:100%;border-radius:0.5rem;padding:0.75rem 1rem;margin-bottom:1rem;"," ",""],(function(e){return e.theme.colors.whites[0]}),Le.b.greaterThan("md")(C||(C=Object(fe.a)(["\n     width: calc(50% - 0.5rem);\n     \n     &:not(:nth-child(2n)) {\n       margin-right: 1rem;\n     }\n  "]))),Le.b.greaterThan("xl")(P||(P=Object(fe.a)(["\n     width: calc(33% - 0.6665rem);\n\n     /* Cancel margins from previous breakpoint */\n     &:not(:nth-child(2n)) {\n       margin-right: 0rem;\n     }\n     \n     &:not(:nth-child(3n)) {\n       margin-right: 1rem;\n     }\n  "])))),sa=Oe.c.div.withConfig({displayName:"PoolItem__PoolHeader",componentId:"sc-1naa5hl-1"})(["display:flex;justify-content:space-between;align-items:center;margin-bottom:0.75rem;.pool-title{margin-bottom:0;}.icon{opacity:0.25;cursor:pointer;&:hover{opacity:1;color:",";}}"],(function(e){return e.theme.colors.danger})),ca=Oe.c.div.withConfig({displayName:"PoolItem__DroppableContainer",componentId:"sc-1naa5hl-2"})(["min-height:180px;"]),la=function(e){return Object(Ce.jsxs)(oa,{children:[Object(Ce.jsxs)(sa,{children:[Object(Ce.jsxs)("h5",{className:"pool-title",children:["Pool ",e.poolNumber]}),!e.setupIsLocked&&Object(Ce.jsx)("i",{className:"fas fa-trash-alt icon",title:"Delete pool",onClick:function(){return e.removePlayerPool(e.poolNumber)}})]}),Object(Ce.jsx)(Te.c,{droppableId:e.poolNumber.toString(),type:"pool",isDropDisabled:e.setupIsLocked,children:function(t,n){return Object(Ce.jsxs)(ca,Object(ce.a)(Object(ce.a)({ref:t.innerRef},t.droppableProps),{},{children:[e.pool.map((function(t,n){var a=e.leaguePlayers?e.leaguePlayers[t]:null;return a?Object(Ce.jsx)(ta,{leaguePlayer:a,index:n,setupIsLocked:e.setupIsLocked},a.id):null})),t.placeholder]}))}})]})},da=Object(Oe.c)(oa).withConfig({displayName:"NewPoolItem__Container",componentId:"sc-73duw2-0"})(["display:flex;justify-content:center;align-items:center;min-height:240px;background:none;box-shadow:none;border:2px dashed rgba(0,0,0,0.15);.icon{margin-right:0.5rem;}"]),ua=function(e){return Object(Ce.jsx)(da,{children:Object(Ce.jsxs)(ot.a,{theme:"primary",onClick:e.addPlayerPool,children:[Object(Ce.jsx)("i",{className:"fas fa-plus icon"}),"Add a pool"]})})},ma=Oe.c.div.withConfig({displayName:"PoolList__Container",componentId:"sc-197vdtc-0"})([".header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;.title{font-size:1.5rem;margin-bottom:0;}.controls{display:none;.icon{margin-right:0.5rem;}}.controls-dropdown .icon{padding:0.25rem;cursor:pointer;opacity:0.25;&:hover{opacity:1;}}}",""],Le.b.greaterThan("md")(I||(I=Object(fe.a)(["\n    .header {\n      .title {\n        font-size: 2rem;\n      }\n      .controls {\n        display: block;\n      }\n      .controls-dropdown {\n        display: none;\n      }\n    }\n  "])))),ba=Oe.c.div.withConfig({displayName:"PoolList__ErrorWarning",componentId:"sc-197vdtc-1"})(["font-weight:600;color:",";margin-bottom:0.75em;.icon{margin-right:0.5rem;}"],(function(e){return e.theme.colors.danger})),pa=Oe.c.div.withConfig({displayName:"PoolList__PoolListContainer",componentId:"sc-197vdtc-2"})(["display:flex;flex-wrap:wrap;align-items:flex-start;"]),ga=function(e){var t=e.playerPools&&e.playerPools[1]||{},n=[{label:"Get pools from another session",onClick:e.openOtherSessionModal}];return Object(Ce.jsxs)(ma,{children:[Object(Ce.jsxs)("div",{className:"header",children:[Object(Ce.jsx)("h2",{className:"title",children:"Pools"}),Object(Ce.jsx)("div",{className:"controls",children:Object(Ce.jsxs)(ot.a,{theme:"success",onClick:e.openOtherSessionModal,disabled:e.setupIsLocked,children:[Object(Ce.jsx)("i",{className:"far fa-clone icon"}),"Get pools from another session"]})}),Object(Ce.jsx)("div",{className:"controls-dropdown",children:Object(Ce.jsx)(lt.a,{items:n,placement:"BOTTOM_RIGHT",children:Object(Ce.jsx)("i",{className:"fas fa-ellipsis-h icon"})})})]}),!e.setupIsLocked&&e.errorMessage&&Object(Ce.jsxs)(ba,{children:[Object(Ce.jsx)("i",{className:"fas fa-exclamation-circle icon"}),e.errorMessage]}),Object(Ce.jsxs)(pa,{children:[Object.keys(t).map((function(n){return Object(Ce.jsx)(la,{poolNumber:parseInt(n),pool:t[n],leaguePlayers:e.leaguePlayers,setupIsLocked:e.setupIsLocked,removePlayerPool:e.removePlayerPool},n)})),!e.setupIsLocked&&Object(Ce.jsx)(ua,{addPlayerPool:e.addPlayerPool})]})]})},ja=Oe.c.div.withConfig({displayName:"GenerateModal__Container",componentId:"sc-1ixsztj-0"})([".button-container{display:flex;justify-content:center;margin-top:2.5rem;}"]),ha=Oe.c.div.withConfig({displayName:"GenerateModal__FormContainer",componentId:"sc-1ixsztj-1"})(["label{margin-bottom:0;font-weight:700;}> div{display:flex;flex-direction:column;align-items:center;margin-bottom:1.25rem;}"]),fa=Object(Oe.c)(gt).withConfig({displayName:"GenerateModal__StyledSelect",componentId:"sc-1ixsztj-2"})(["display:block;padding:0.25rem 0.75rem 0.25rem 0rem;width:auto;"]),Oa=Object(Oe.c)(ot.a).withConfig({displayName:"GenerateModal__StyledButton",componentId:"sc-1ixsztj-3"})(["font-size:1rem;padding:0.35rem 1.25rem;"]),xa=Object(Oe.c)(Ne.a).withConfig({displayName:"GenerateModal__StyledInfoTooltip",componentId:"sc-1ixsztj-4"})(["margin-left:0.5rem;opacity:0.25;"]),ya=function(e){return Object(Ce.jsx)(ht.a,{isOpen:e.isOpen,onRequestClose:e.onRequestClose,size:"sm",children:Object(Ce.jsxs)(ja,{children:[Object(Ce.jsxs)(ha,{children:[Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)("label",{children:"Format"}),Object(Ce.jsx)("div",{children:"Team pool play"})]}),Object(Ce.jsxs)("div",{children:[Object(Ce.jsxs)("label",{children:["Rounds",Object(Ce.jsx)(xa,{info:"A round is completed when all teams of a pool have faced each other. You will be able to change pools between rounds if you want."})]}),Object(Ce.jsx)(fa,{background:"#fff",disabled:e.setupIsLocked,onChange:function(t){return e.editFormatSetting("rounds",parseInt(t.target.value))},value:e.savingFormatSetting?void 0:e.format.rounds,children:[1,2,3,4,5,6,7,8].map((function(e){return Object(Ce.jsx)("option",{value:e,children:e},e)}))})]}),Object(Ce.jsxs)("div",{children:[Object(Ce.jsxs)("label",{children:["Confrontations",Object(Ce.jsx)(xa,{info:"Number of times two teams will face each other in a round."})]}),Object(Ce.jsx)(fa,{background:"#fff",disabled:e.setupIsLocked,onChange:function(t){return e.editFormatSetting("confrontations",parseInt(t.target.value))},value:e.savingFormatSetting?void 0:e.format.confrontations,children:[1,2,3,4,5].map((function(e){return Object(Ce.jsx)("option",{value:e,children:e},e)}))})]}),Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)("label",{children:"Format of matches"}),Object(Ce.jsxs)(fa,{background:"#fff",disabled:e.setupIsLocked,onChange:function(t){return e.editFormatSetting("numberOfGames",parseInt(t.target.value))},value:e.savingFormatSetting?void 0:e.format.numberOfGames,children:[Object(Ce.jsx)("option",{value:"1",children:"Single game"}),Object(Ce.jsx)("option",{value:"3",children:"Best of 3"}),Object(Ce.jsx)("option",{value:"5",children:"Best of 5"})]})]})]}),Object(Ce.jsx)("div",{className:"button-container",children:Object(Ce.jsx)(Oa,{loading:e.savingFormatSetting,onClick:e.onRequestClose,children:"Close"})})]})})},va=Oe.c.div.withConfig({displayName:"GenerateBanner__Banner",componentId:"sc-1q24uyt-0"})(["position:absolute;top:0;left:0;right:0;padding:1.5rem 2rem;z-index:2;background:",";box-shadow:5px 3px 6px rgba(0,0,0,0.08);.button-container{display:flex;justify-content:center;align-items:flex-end;margin-top:0.5rem;}.more-settings{flex-direction:column;justify-content:center;color:",";text-align:center;&.more-settings.more-settings.more-settings{align-items:center;}.icon{margin-left:0.25rem;vertical-align:middle;}}"," "," "," ",""],(function(e){return e.theme.colors.whites[0]}),(function(e){return e.theme.colors.primary}),Le.b.lessThan("xs320")(E||(E=Object(fe.a)(["\n    padding: 1.5rem 1.5rem;\n    font-size: 0.95rem;\n  "]))),Le.b.greaterThan("md")(_||(_=Object(fe.a)(["\n    position: fixed;\n    top: 0;\n    left: ",";\n    right: 0;\n    padding: 1.75rem 2rem 1.5rem;\n\n    display: flex;\n    align-items: center;\n    .button-container {\n      order: 1;\n      margin-top: 0rem;\n      margin-right: 2.5rem;\n    }\n  "])),(function(e){return e.sideMenuWidth+"px"})),Le.b.greaterThan("lg")(k||(k=Object(fe.a)(["\n    display: flex;\n    top: initial; \n    bottom: 0;\n    padding: 1.75rem 1.5rem 2rem;\n    .button-container {\n      margin-right: 1.5rem;\n    }\n  "]))),Le.b.greaterThan("xl")(R||(R=Object(fe.a)(["\n    padding: 2rem 3rem 2.5rem;\n  "])))),wa=Object(Oe.c)(ot.a).withConfig({displayName:"GenerateBanner__StyledButton",componentId:"sc-1q24uyt-1"})(["font-size:1.35rem;padding:0.5rem 1rem;"]),Sa=Oe.c.div.withConfig({displayName:"GenerateBanner__FormatDescription",componentId:"sc-1q24uyt-2"})(["flex-grow:1;display:flex;flex-direction:column;align-items:center;label{margin-bottom:0;font-weight:700;}",""],Le.b.greaterThan("md")(L||(L=Object(fe.a)(["\n    max-width: 1100px;\n    flex-direction: row;\n    order: 2;\n  "])))),Ta=Oe.c.div.withConfig({displayName:"GenerateBanner__SettingGroup",componentId:"sc-1q24uyt-3"})(["display:flex;justify-content:space-between;width:100%;max-width:360px;&.hide-xs{display:none;}.setting{margin-bottom:1rem;&:nth-child(2){display:flex;flex-direction:column;align-items:flex-end;}&.hide-xs{display:none;}}"," "," ",""],Le.b.greaterThan("md")(M||(M=Object(fe.a)(["\n    justify-content: space-between;\n    &:first-child {\n      flex-grow: 1;\n      max-width: none;\n    }\n\n    &.hide-md {\n      display: none;\n    }\n\n    .setting {\n      margin-bottom: 0;\n      &:nth-child(2) {\n        display: block;\n      }\n    }\n\n    .setting.show-md {\n      display: block;\n    }\n\n    .promotions-setting {\n      display: none;\n    }\n  "]))),Le.b.greaterThan("lg")(D||(D=Object(fe.a)(["\n    justify-content: space-around;\n    .promotions-setting {\n      display: block;\n    }\n\n    .setting.hide-lg {\n      display: none;\n    }\n    .setting.show-lg {\n      display: block;\n    }\n  "]))),Le.b.greaterThan("xl")(A||(A=Object(fe.a)(["\n    .setting.hide-xl {\n      display: none;\n    }\n    .setting.show-xl {\n      display: block;\n    }\n  "])))),Na=Object(Oe.c)(gt).withConfig({displayName:"GenerateBanner__StyledSelect",componentId:"sc-1q24uyt-4"})(["display:block;padding:0.25rem 0.5rem 0.25rem 0rem;width:auto;max-width:175px;border-radius:0;",""],Le.b.greaterThan("xl")(F||(F=Object(fe.a)(["\n    max-width: 230px;\n  "])))),Ca=Object(Oe.c)(Ne.a).withConfig({displayName:"GenerateBanner__StyledInfoTooltip",componentId:"sc-1q24uyt-5"})(["margin-left:0.5rem;opacity:0.25;"]),Pa=function(e){var t=Object(xe.useState)(!1),n=Object(ne.a)(t,2),a=n[0],r=n[1],i=function(){var t=Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)("h3",{children:"Confirmation"}),Object(Ce.jsx)("p",{style:{fontWeight:400},children:"Once your matches will be generated, many of your settings will be locked."}),Object(Ce.jsx)("p",{style:{fontWeight:400},children:"To modify one of these settings, you will need to delete all your matches and generate them again with your new settings."})]});Object(jt.a)(t,{proceedText:"Generate matches",proceedStyle:{fontSize:"1.15rem"},cancelStyle:{fontSize:"1.15rem"}}).then((function(){e.generateMatches()}))};return Object(Ce.jsxs)(va,{sideMenuWidth:e.sideMenuWidth,children:[Object(Ce.jsx)(Sa,{children:Object(Ce.jsxs)(Ta,{children:[Object(Ce.jsxs)("div",{className:"setting",children:[Object(Ce.jsx)("label",{children:"Format"}),Object(Ce.jsxs)(Na,{background:"#fff",disabled:e.setupIsLocked,onChange:function(t){return e.editFormatSetting("name",t.target.value)},value:e.savingFormatSetting?void 0:e.format.name,children:[Object(Ce.jsx)("option",{value:"teamPoolPlay",children:"Team pool play"}),Object(Ce.jsx)("option",{value:"playerKOTC",children:"King of the Court (Players)"})]})]}),Object(Ce.jsxs)("div",{className:"setting hide-xs show-md",children:[Object(Ce.jsxs)("label",{children:["Rounds",Object(Ce.jsx)(Ca,{info:"A round is completed when all teams of a pool have faced each other. You will be able to change pools between rounds if you want."})]}),Object(Ce.jsx)(Na,{background:"#fff",disabled:e.setupIsLocked,onChange:function(t){return e.editFormatSetting("rounds",parseInt(t.target.value))},value:e.savingFormatSetting?void 0:e.format.rounds,children:[1,2,3,4,5,6,7,8].map((function(e){return Object(Ce.jsx)("option",{value:e,children:e},e)}))})]}),Object(Ce.jsxs)("div",{className:"setting hide-xs show-lg",children:[Object(Ce.jsxs)("label",{children:["Confrontations",Object(Ce.jsx)(Ca,{info:"Number of times two teams will face each other in a round."})]}),Object(Ce.jsx)(Na,{background:"#fff",disabled:e.setupIsLocked,onChange:function(t){return e.editFormatSetting("confrontations",parseInt(t.target.value))},value:e.savingFormatSetting?void 0:e.format.confrontations,children:[1,2,3,4,5].map((function(e){return Object(Ce.jsx)("option",{value:e,children:e},e)}))})]}),Object(Ce.jsxs)("div",{className:"setting hide-xs show-lg",children:[Object(Ce.jsx)("label",{children:"Matches"}),Object(Ce.jsxs)(Na,{background:"#fff",disabled:e.setupIsLocked,onChange:function(t){return e.editFormatSetting("numberOfGames",parseInt(t.target.value))},value:e.savingFormatSetting?void 0:e.format.numberOfGames,children:[Object(Ce.jsx)("option",{value:"1",children:"Single game"}),Object(Ce.jsx)("option",{value:"3",children:"Best of 3"})]})]}),Object(Ce.jsxs)("div",{className:"setting more-settings hide-lg",onClick:function(){return r(!0)},children:[Object(Ce.jsx)("div",{children:"More settings"}),Object(Ce.jsx)("div",{children:Object(Ce.jsx)("i",{className:"fas fa-angle-double-right icon"})})]})]})}),Object(Ce.jsxs)("div",{className:"button-container",children:[!e.setupIsLocked&&Object(Ce.jsx)(wa,{theme:"success",size:"lg",loading:e.savingFormatSetting||e.generatingMatches,onClick:i,disabled:e.setupIsLocked,children:"Generate matches"}),e.setupIsLocked&&Object(Ce.jsx)(wa,{theme:"danger",size:"lg",loading:e.deletingMatches,onClick:function(){var t=Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)("h3",{children:"Confirmation"}),Object(Ce.jsx)("p",{style:{fontWeight:400},children:"Are you sure you want to delete all matches from this session?"})]});Object(jt.a)(t,{proceedText:"Delete all matches",proceedTheme:"danger",proceedStyle:{fontSize:"1.15rem"},cancelStyle:{fontSize:"1.15rem"}}).then((function(){e.deleteMatches()}))},disabled:!e.setupIsLocked,children:"Delete all matches"})]}),Object(Ce.jsx)(ya,{format:e.format,editFormatSetting:e.editFormatSetting,savingFormatSetting:e.savingFormatSetting,generateMatches:i,setupIsLocked:e.setupIsLocked,isOpen:a,onRequestClose:function(){return r(!1)}})]})},Ia=Oe.c.div.withConfig({displayName:"OtherSessionList__Container",componentId:"sc-5r9ytk-0"})(["display:flex;flex-direction:column;align-items:center;margin-bottom:1rem;.title{text-align:center;margin-bottom:1.5rem;}.session-list{width:100%;max-width:600px;}"]),Ea=Oe.c.div.withConfig({displayName:"OtherSessionList__SessionItem",componentId:"sc-5r9ytk-1"})(["background:white;border-radius:0.75rem;box-shadow:0 3px 6px rgba(0,0,0,0.08);margin-bottom:0.75rem;padding:0.75rem 1.25rem;width:100%;font-size:1.25rem;display:flex;justify-content:space-between;align-items:center;.icon{margin-left:0.5rem;}"]),_a=Oe.c.div.withConfig({displayName:"OtherSessionList__NoSessionsMessage",componentId:"sc-5r9ytk-2"})(["text-align:center;padding-top:3rem;p{padding-bottom:2rem;}.icon{font-size:3.5rem;}"]),ka=function(e){return 0===e.sessions.length?Object(Ce.jsxs)(_a,{children:[Object(Ce.jsx)("h1",{children:Object(Ce.jsx)("i",{className:"far fa-sad-tear icon"})}),Object(Ce.jsx)("p",{children:"There are no other sessions in your league that use the same format as this session."}),Object(Ce.jsx)(ot.a,{size:"lg",onClick:e.closeModal,children:"Close"})]}):Object(Ce.jsxs)(Ia,{children:[Object(Ce.jsx)("h2",{className:"title",children:"Select a session"}),Object(Ce.jsx)("div",{className:"session-list",children:Re()(e.sessions.filter((function(e){return e.matchesAreGenerated})),"date").map((function(t){for(var n=[],a=function(a){n.push({label:"Round "+a,onClick:function(){e.setSelectedSession(t),e.setSelectedRound(a)}})},r=1;r<=t.format.rounds;r++)a(r);return Object(Ce.jsxs)(Ea,{children:[Object(Ce.jsxs)("div",{children:[" ",Rt()(t.date.toDate()).format("dddd, MMMM Do")]}),Object(Ce.jsx)(lt.a,{items:n,placement:"BOTTOM_RIGHT",children:Object(Ce.jsxs)(ot.a,{as:"span",theme:"success",size:"lg",onPress:function(e){var t;return null===(t=e.target.parentElement)||void 0===t?void 0:t.click()},children:["Select",Object(Ce.jsx)("i",{className:"fas fa-caret-down icon"})]})})]},t.id)}))})]})},Ra=Oe.c.div.withConfig({displayName:"RoundPlayerItem__DraggableContainer",componentId:"sc-1ihqvuf-0"})(["background:",";box-shadow:0 3px 6px rgba(0,0,0,0.08);margin-bottom:0.5rem;padding:0.35rem 1rem;border-radius:0.5rem;"],(function(e){return e.theme.colors.whites[0]})),La=Oe.c.div.withConfig({displayName:"RoundPlayerItem__PlayerContainer",componentId:"sc-1ihqvuf-1"})(["display:flex;.name{flex-grow:1;margin-left:0.75rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}.pool-diff{margin-left:1rem;white-space:nowrap;.icon{margin-right:0.35rem;}&.red{color:",";}&.green{color:",";}}"],(function(e){return e.theme.colors.danger}),(function(e){return e.theme.colors.primary})),Ma=function(e){var t=e.leaguePlayer,n=e.currPool,a=e.prevPool;return Object(Ce.jsx)(Te.b,{draggableId:t.id,index:e.index,isDragDisabled:e.setupIsLocked,children:function(e,r){return Object(Ce.jsx)(Ra,Object(ce.a)(Object(ce.a)(Object(ce.a)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:Object(Ce.jsxs)(La,{children:[Object(Ce.jsx)("div",{children:Object(Ce.jsx)("i",{className:"fas fa-user-friends icon"})}),Object(Ce.jsx)("div",{className:"name",children:t.player.displayName}),a!==n&&Object(Ce.jsxs)("div",{className:n<a?"pool-diff green":"pool-diff red",children:[n>a&&Object(Ce.jsx)("i",{className:"fas fa-caret-down icon"}),a>n&&Object(Ce.jsx)("i",{className:"fas fa-caret-up icon"}),Math.abs(n-a)]})]})}))}})},Da=Oe.c.div.withConfig({displayName:"RoundPoolItem__Container",componentId:"sc-1p7q0uh-0"})(["background:",";box-shadow:0 3px 6px rgba(0,0,0,0.08);width:100%;border-radius:0.5rem;padding:0.75rem 1rem;margin-bottom:1rem;"," "," ",""],(function(e){return e.theme.colors.whites[0]}),Le.b.greaterThan("sm")(z||(z=Object(fe.a)(["\n     width: calc(50% - 0.5rem);\n     \n     &:not(:nth-child(2n)) {\n       margin-right: 1rem;\n     }\n  "]))),Le.b.greaterThan("lg")(G||(G=Object(fe.a)(["\n     width: calc(33% - 0.6666rem);\n\n     &:not(:nth-child(2n)) {\n       margin-right: 0rem;\n     }\n     \n     &:not(:nth-child(3n)) {\n       margin-right: 1rem;\n     }\n  "]))),Le.b.greaterThan("xl")(U||(U=Object(fe.a)(["\n     width: calc(25% - 0.75rem);\n\n     /* Cancel margins from previous breakpoint */\n     &:not(:nth-child(3n)) {\n       margin-right: 0rem;\n     }\n     \n     &:not(:nth-child(4n)) {\n       margin-right: 1rem;\n     }\n  "])))),Aa=Oe.c.div.withConfig({displayName:"RoundPoolItem__DroppableContainer",componentId:"sc-1p7q0uh-1"})(["min-height:180px;"]),Fa=function(e){return Object(Ce.jsxs)(Da,{children:[Object(Ce.jsxs)("h5",{children:["Pool ",e.poolNumber]}),Object(Ce.jsx)(Te.c,{droppableId:e.poolNumber.toString(),type:"pool",isDropDisabled:e.setupIsLocked,children:function(t,n){return Object(Ce.jsxs)(Aa,Object(ce.a)(Object(ce.a)({ref:t.innerRef},t.droppableProps),{},{children:[e.pool.map((function(t,n){var a=e.leaguePlayers?e.leaguePlayers[t.leaguePlayerID]:null;return a?Object(Ce.jsx)(Ma,{leaguePlayer:a,index:n,setupIsLocked:e.setupIsLocked,currPool:e.poolNumber,prevPool:t.prevPool},a.id):null})),t.placeholder]}))}})]})},za=Oe.c.div.withConfig({displayName:"RoundPoolList__Container",componentId:"sc-1k8fdlj-0"})(["width:100%;"]),Ga=Oe.c.div.withConfig({displayName:"RoundPoolList__PoolListContainer",componentId:"sc-1k8fdlj-1"})(["display:flex;flex-wrap:wrap;align-items:flex-start;"]),Ua=function(e){var t=e.playerPools;return Object(Ce.jsx)(za,{children:Object(Ce.jsx)(Ga,{children:Object.keys(t).map((function(n,a){return Object(Ce.jsx)(Fa,{poolNumber:parseInt(n),pool:t[n],leaguePlayers:e.leaguePlayers,setupIsLocked:e.setupIsLocked},n)}))})})},Ba=function(){var e=Object(ae.a)(Object(ee.a)().mark((function e(t,n,a,r){var i;return Object(ee.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=Object(We.a)("league-handlePlayerKOTCNextRound"),e.next=4,i({leagueID:t,sessionID:n,round:a,playerPools:r});case 4:return e.abrupt("return",!0);case 7:return e.prev=7,e.t0=e.catch(0),Object(qe.a)("Sorry, a problem occured while trying to prepare your next round. Please try again or contact an administrator."),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),qa=Oe.c.div.withConfig({displayName:"RoundSetup__Container",componentId:"sc-1uzt7is-0"})([".setup{display:flex;margin-top:1.5rem;}.unbalanced-pools-warning{margin:0.5rem 0rem;color:",";font-size:1rem;.icon{margin-right:0.5rem;}}.buttons-container{margin-top:1.5rem;display:flex;justify-content:center;button{margin-left:0.75rem;font-size:1.15rem;}}"],(function(e){return e.theme.colors.warning})),Wa=Oe.c.div.withConfig({displayName:"RoundSetup__PromotionCount",componentId:"sc-1uzt7is-1"})(["font-size:1.25rem;margin-top:1rem;"]),Ya=Oe.c.div.withConfig({displayName:"RoundSetup__PromotionCountInput",componentId:"sc-1uzt7is-2"})(["display:inline-flex;margin-left:1rem;.minus,.value,.plus{width:2.5rem;text-align:center;user-select:none;}.minus{background-color:",";border-top-left-radius:0.25rem;border-bottom-left-radius:0.25rem;line-height:1.25;cursor:pointer;}.plus{background-color:",";border-top-right-radius:0.25rem;border-bottom-right-radius:0.25rem;line-height:1.25;cursor:pointer;}"],(function(e){return e.theme.colors.lightgray}),(function(e){return e.theme.colors.lightgray})),Va=Object(we.b)((function(e){return{league:e.league.data,session:e.session.data,statistics:e.session.statistics}}),{})((function(e){var t=Object(xe.useState)(!1),n=Object(ne.a)(t,2),a=n[0],r=n[1],i=Object(xe.useState)(1),o=Object(ne.a)(i,2),s=o[0],c=o[1],l=Object(xe.useState)(null),d=Object(ne.a)(l,2),u=d[0],m=d[1],b=e.league,p=e.statistics,g=e.round,j=e.newRound,h=Object(xe.useMemo)((function(){if(!p)return 1;var e=1e5,t=0;return p[g-1]?Object.entries(p[g-1]).forEach((function(n){var a=Object(ne.a)(n,2),r=(a[0],a[1]),i=Object.keys(r).length;i<e&&(e=i),t++})):e=2,1===t?0:2===t?e:Math.floor(e/2)}),[p,g]);Object(xe.useEffect)((function(){if(p&&p[g-1]){var e={},t=p[g-1];Object.entries(t).forEach((function(t){var n=Object(ne.a)(t,2),a=n[0],r=n[1],i=[],o=Object.keys(r).map((function(e){return{id:e,stats:r[e]}}));Qn(o).forEach((function(e){i.push({leaguePlayerID:e.id,prevPool:parseInt(a)})})),e[a]=i})),Object.entries(e).forEach((function(t,n,a){var r=Object(ne.a)(t,2),i=r[0],o=r[1],c=Object(Ue.a)(o),l=Object(Ue.a)(a);if(n!==a.length-1)for(var d=1;d<=s;d++)e[i][c.length-d]=l[n+1][1][s-d],e[(parseInt(i)+1).toString()][s-d]=c[c.length-d]})),m(e)}}),[s,p,g]);var f=function(){var t=Object(ae.a)(Object(ee.a)().mark((function t(){var n;return Object(ee.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r(!0),!u){t.next=11;break}return n={},Object.entries(u).forEach((function(e){var t=Object(ne.a)(e,2),a=t[0],r=t[1];n[a]=r.map((function(e){return e.leaguePlayerID}))})),t.next=6,Ba(e.league.id,e.session.id,g,n);case 6:if(!t.sent){t.next=11;break}return r(!1),e.closeModal(),t.abrupt("return");case 11:r(!1);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),O=Object(xe.useMemo)((function(){return!j&&(u&&Object.entries(u).every((function(e){var t=Object(ne.a)(e,2),n=t[0],a=t[1];return p&&p[g-1]&&Object.keys(p[g-1][parseInt(n)]).length===a.length})))}),[p,u,g,j]);return Object(Ce.jsxs)(qa,{children:[Object(Ce.jsxs)("h2",{children:["Round ",e.round," - Setup"]}),u&&Object.keys(u).length>1&&Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsxs)(Wa,{children:["Apply promotions/relegations:",Object(Ce.jsxs)(Ya,{children:[Object(Ce.jsx)("div",{className:"minus",onClick:function(){return c((function(e){return e>0?e-1:0}))},children:"-"}),Object(Ce.jsx)("div",{className:"value",children:s}),Object(Ce.jsx)("div",{className:"plus",onClick:function(){return c((function(e){return e<h?e+1:h}))},children:"+"})]})]}),Object(Ce.jsx)(Me.a,{style:{fontSize:"1rem",marginTop:"0.75rem"},children:"Players are ordered according to the final standings of the previous round, which allows you to easily apply promotions and relegations."})]}),Object(Ce.jsx)("div",{className:"setup",children:u?Object(Ce.jsx)(Te.a,{onDragEnd:function(e,t){var n=e.destination,a=e.source;if(n&&(n.droppableId!==a.droppableId||n.index!==a.index)&&u&&u[a.droppableId]){var r=Object(ce.a)({},u),i=Object(ce.a)({},u[a.droppableId][a.index]);r[a.droppableId].splice(a.index,1),r[n.droppableId].splice(n.index,0,i),m(r)}},children:Object(Ce.jsx)(Ua,{leaguePlayers:b.leaguePlayers,playerPools:u,setupIsLocked:a})}):Object(Ce.jsx)("div",{children:"Preparing your pools..."})}),!O&&!j&&Object(Ce.jsxs)("div",{className:"unbalanced-pools-warning",children:[Object(Ce.jsx)("i",{className:"fas fa-exclamation-triangle icon"}),"If you change the number of players per pool, existing matches from round ",g," will be deleted and replaced. The number of matches might change."]}),Object(Ce.jsxs)("div",{className:"buttons-container",children:[Object(Ce.jsx)(ot.a,{theme:"success",onClick:f,size:"lg",loading:a,disabled:a,children:"Confirm setup"}),Object(Ce.jsx)(ot.a,{size:"lg",disabled:a,onClick:e.closeModal,children:"Cancel"})]})]})})),Ha=Oe.c.div.withConfig({displayName:"OtherSessionEditor__Container",componentId:"sc-1d9xc92-0"})([".header{display:flex;align-items:center;margin-bottom:1rem;.title{margin-bottom:0;}.go-back{margin-right:1rem;.icon{margin-right:0.5rem;}}}.setup{margin-top:1.5rem;}.buttons-container{margin-top:1.5rem;display:flex;justify-content:center;button{margin-left:0.75rem;font-size:1.15rem;}.icon{margin-right:0.5rem;}}"]),Qa=Oe.c.div.withConfig({displayName:"OtherSessionEditor__NoSetupMessage",componentId:"sc-1d9xc92-1"})(["text-align:center;padding-top:2rem;p{padding-bottom:2rem;}.icon{margin-right:0.5rem;}"]),Ka=function(e){var t=e.statistics,n=Object(xe.useState)(0),a=Object(ne.a)(n,2),r=a[0],i=a[1],o=Object(xe.useState)(null),s=Object(ne.a)(o,2),c=s[0],l=s[1],d=t?Object.keys(t):1,u=1===d?0:2===d?4:2;Object(xe.useEffect)((function(){if(t){var e={};Object.entries(t).forEach((function(t){var n=Object(ne.a)(t,2),a=n[0],r=n[1],i=[],o=Object.keys(r).map((function(e){return{id:e,stats:r[e]}}));Qn(o).forEach((function(e){i.push({leaguePlayerID:e.id,prevPool:parseInt(a)})})),e[a]=i})),Object.entries(e).forEach((function(t,n,a){var i=Object(ne.a)(t,2),o=i[0],s=i[1],c=Object(Ue.a)(s),l=Object(Ue.a)(a);if(n!==a.length-1)for(var d=1;d<=r;d++)e[o][c.length-d]=l[n+1][1][r-d],e[(parseInt(o)+1).toString()][r-d]=c[c.length-d]})),l(e)}}),[r,t]);var m=function(){var t=Object(ae.a)(Object(ee.a)().mark((function t(){var n;return Object(ee.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c&&(n={},Object.entries(c).forEach((function(e){var t=Object(ne.a)(e,2),a=t[0],r=t[1];n[a]=r.map((function(e){return e.leaguePlayerID}))})),e.editPlayerPools(n),e.closeModal());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(Ce.jsxs)(Ha,{children:[Object(Ce.jsx)("div",{className:"header",children:Object(Ce.jsxs)("h2",{className:"title",children:[Rt()(e.selectedSession.date.toDate()).format("dddd, MMMM Do")," - Round"," ",e.selectedRound]})}),c&&Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsxs)(Wa,{children:["Apply promotions/relegations:",Object(Ce.jsxs)(Ya,{children:[Object(Ce.jsx)("div",{className:"minus",onClick:function(){return i((function(e){return e>0?e-1:0}))},children:"-"}),Object(Ce.jsx)("div",{className:"value",children:r}),Object(Ce.jsx)("div",{className:"plus",onClick:function(){return i((function(e){return e<u?e+1:u}))},children:"+"})]})]}),Object(Ce.jsx)(Me.a,{style:{fontSize:"1rem",marginTop:"0.75rem"},children:"Players are ordered according to the final standings of the selected round, which allows you to easily apply promotions and relegations."})]}),Object(Ce.jsx)("div",{className:"setup",children:c?Object(Ce.jsx)(Te.a,{onDragEnd:function(e,t){var n=e.destination,a=e.source;if(n&&(n.droppableId!==a.droppableId||n.index!==a.index)&&c&&c[a.droppableId]){var r=Object(ce.a)({},c),i=Object(ce.a)({},c[a.droppableId][a.index]);r[a.droppableId].splice(a.index,1),r[n.droppableId].splice(n.index,0,i),l(r)}},children:Object(Ce.jsx)(Ua,{leaguePlayers:e.leaguePlayers,playerPools:c,setupIsLocked:!1})}):Object(Ce.jsxs)(Qa,{children:[Object(Ce.jsx)("h1",{children:Object(Ce.jsx)("i",{className:"far fa-sad-tear sad-icon"})}),Object(Ce.jsx)("p",{children:"The round you selected is not prepared yet. Please choose another session or round."}),Object(Ce.jsxs)(ot.a,{size:"lg",onClick:e.goBack,children:[Object(Ce.jsx)("i",{className:"fas fa-arrow-left icon"}),"Go back"]})]})}),c&&Object(Ce.jsxs)("div",{className:"buttons-container",children:[Object(Ce.jsxs)(ot.a,{size:"lg",disabled:!1,onClick:e.goBack,children:[Object(Ce.jsx)("i",{className:"fas fa-arrow-left icon"})," Go back"]}),Object(Ce.jsx)(ot.a,{theme:"success",onClick:m,size:"lg",loading:!1,disabled:!1,children:"Confirm setup"})]})]})},$a=function(e){var t=Object(xe.useState)(!0),n=Object(ne.a)(t,2),a=n[0],r=n[1],i=Object(xe.useState)(void 0),o=Object(ne.a)(i,2),s=o[0],c=o[1],l=Object(xe.useState)(void 0),d=Object(ne.a)(l,2),u=d[0],m=d[1],b=Object(xe.useState)(void 0),p=Object(ne.a)(b,2),g=p[0],j=p[1],h=Object(xe.useState)(!1),f=Object(ne.a)(h,2),O=f[0],x=f[1],y=Object(xe.useState)(void 0),v=Object(ne.a)(y,2),w=v[0],S=v[1];return Object(xe.useEffect)((function(){r(!0);var t=function(){var t=Object(ae.a)(Object(ee.a)().mark((function t(){var n,a;return Object(ee.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,re.a.firestore().collection("leagues").doc(e.leagueID).collection("sessions").where("format.name","==","playerKOTC").get();case 2:n=t.sent,a=[],n.forEach((function(e){a.push(Object(ce.a)(Object(ce.a)({},e.data()),{},{id:e.id}))})),c(a),r(!1);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e.leagueID]),Object(xe.useEffect)((function(){x(!0);var t=function(){var t=Object(ae.a)(Object(ee.a)().mark((function t(n){var a,r,i;return Object(ee.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,re.a.firestore().collection("leagues").doc(e.leagueID).collection("sessions").doc(n.id).collection("matches").where("round","==",g).get();case 2:a=t.sent,r=[],a.forEach((function(e){r.push(Object(ce.a)(Object(ce.a)({},e.data()),{},{id:e.id}))})),0!==r.length&&r[0].team1&&r[0].team2?(i=Vn(r),S(i)):S({}),x(!1);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();u&&g&&t(u)}),[e.leagueID,u,g]),u&&g||!s?s&&u&&g&&w?Object(Ce.jsx)(Ka,{selectedSession:u,selectedRound:g,statistics:w[g],leaguePlayers:e.leaguePlayers,closeModal:e.closeModal,editPlayerPools:e.editPlayerPools,goBack:function(){m(void 0),j(void 0),S(void 0)}}):Object(Ce.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"4rem 0rem"},children:[Object(Ce.jsx)(_t.a,{size:40}),Object(Ce.jsx)("div",{style:{marginTop:"1rem"},children:a?"Loading other sessions...":O?"Loading setup...":"Loading..."})]}):Object(Ce.jsx)(ka,{sessions:s,setSelectedSession:m,setSelectedRound:j,closeModal:e.closeModal})},Ja=Oe.c.div.withConfig({displayName:"Setup__Container",componentId:"sc-lax0td-0"})(["padding-top:9.65rem;.setup{display:flex;opacity:",";}.t-list-container{width:45%;padding-right:0.5rem;}.pools-container{width:55%;padding-left:0.5rem;}"," "," ",""],(function(e){return e.setupIsLocked?.675:1}),Le.b.greaterThan("sm")(B||(B=Object(fe.a)(["\n    .t-list-container {\n      padding-right: 1rem;\n    }\n    .pools-container {\n      padding-left: 1rem;\n    }\n  "]))),Le.b.greaterThan("md")(q||(q=Object(fe.a)(["\n    padding-top: 6rem;\n    .t-list-container {\n      width: 35%;\n    }\n    .pools-container {\n      width: 65%;\n    }\n  "]))),Le.b.greaterThan("lg")(W||(W=Object(fe.a)(["\n    padding-top: 0;\n    padding-bottom: 6.4rem;\n  "])))),Xa=Oe.c.div.withConfig({displayName:"Setup__SetupIsLocked",componentId:"sc-lax0td-1"})(["display:inline-block;padding:0.75rem 1.5rem;border-radius:0.5rem;background:rgba(220,53,69,0.15);margin-bottom:1.5rem;.title{font-weight:700;.icon{margin-right:0.5rem;}}"]),Za=Object(we.b)((function(e){return{league:e.league.data,session:e.session.data,addingPool:!!e.session.loading.addPlayerPool,removingPool:!!e.session.loading.removePlayerPool,savingFormatSetting:!!e.session.loading.editFormatSetting,generatingMatches:!!e.session.loading.generateMatches,deletingMatches:!!e.session.loading.deleteMatches}}),(function(e){return Object(ve.b)({getLeaguePlayers:Ge.i,generateMatches:Ye,deleteMatches:Ve,editPlayerPools:Xe,addPlayerPool:Ze,removePlayerPool:et,changePlayerPool:tt,editFormatSetting:He},e)}))((function(e){var t=Object(Se.h)(),n=Object(xe.useState)(!1),a=Object(ne.a)(n,2),r=a[0],i=a[1],o=e.league,s=e.session,c=Object(xe.useContext)(nn.a).width,l=o?Object.values(o.leaguePlayers||{}).length:1,d=o?o.id:"",u=e.getLeaguePlayers;Object(xe.useEffect)((function(){0===l&&u(d)}),[u,l,d]);var m=Object(xe.useMemo)((function(){return s&&s.playerPools&&s.playerPools[1]||{}}),[s]),b=o?o.leaguePlayers:void 0,p=Object(xe.useMemo)((function(){if(!m||!m[1])return"You need at least 1 pool.";var e=void 0;return Object.values(m).some((function(t){return 4!==t.length?(e="For this format, every pool must have exactly 4 players.",!0):t.some((function(t){return!!(b&&b[t]&&b[t].deletedAt)&&(e="You cannot prepare your matches with a player that was removed from your league ("+b[t].player.displayName+").",!0)}))})),e}),[m,b]);if(!o||!s)return t.push("/"),null;var g=s.playerPools&&s.playerPools[1]||{},j=Object(ce.a)({},o.leaguePlayers||{});return Object.values(g).forEach((function(e){e.forEach((function(e){delete j[e]}))})),Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)(Pa,{generateMatches:function(){p?Object(qe.a)(p):e.generateMatches(o.id,s.id,(function(){return t.push("/".concat(o.url,"/session/").concat(s.id))}))},deleteMatches:function(){e.deleteMatches(o.id,s.id)},deletingMatches:e.deletingMatches,generatingMatches:e.generatingMatches,format:s.format,editFormatSetting:function(t,n){e.editFormatSetting(o.id,s.id,t,n)},savingFormatSetting:e.savingFormatSetting,setupIsLocked:!!s.matchesAreGenerated,sideMenuWidth:c}),Object(Ce.jsxs)(Ja,{setupIsLocked:!!s.matchesAreGenerated,children:[s.matchesAreGenerated&&Object(Ce.jsxs)(Xa,{children:[Object(Ce.jsxs)("div",{className:"title",children:[Object(Ce.jsx)("i",{className:"fas fa-lock icon"}),"Your setup is locked!"]}),Object(Ce.jsx)("div",{children:"Once your matches are generated, you cannot edit your setup. If you need to edit something, you have to delete all your matches before."})]}),Object(Ce.jsx)("div",{className:"setup",children:Object(Ce.jsxs)(Te.a,{onDragEnd:function(t,n){var a=t.destination,r=t.source,i=t.draggableId;a&&(a.droppableId===r.droppableId&&a.index===r.index||function(t,n,a,r){e.changePlayerPool(o.id,s.id,t,n,a,r,s.playerPools&&s.playerPools[1]||{})}(i,"player-list"===r.droppableId?null:r.droppableId,"player-list"===a.droppableId?null:a.droppableId,a.index))},children:[Object(Ce.jsx)("div",{className:"t-list-container",children:Object(Ce.jsx)(ia,{totalPlayerCount:l,leaguePlayers:Object.values(j),setupIsLocked:!!s.matchesAreGenerated})}),Object(Ce.jsx)("div",{className:"pools-container",children:Object(Ce.jsx)(ga,{addPlayerPool:function(){e.addPlayerPool(o.id,s.id,s.playerPools&&s.playerPools[1]||{})},removePlayerPool:function(t){e.removePlayerPool(o.id,s.id,s.playerPools&&s.playerPools[1]||{},t)},leaguePlayers:o.leaguePlayers,playerPools:s.playerPools,setupIsLocked:!!s.matchesAreGenerated,openOtherSessionModal:function(){return i(!0)},errorMessage:p})})]})})]}),Object(Ce.jsx)(ht.a,{isOpen:r,onRequestClose:function(){return i(!1)},width:"1200px",children:Object(Ce.jsx)($a,{leagueID:o.id,leaguePlayers:o.leaguePlayers,closeModal:function(){return i(!1)},editPlayerPools:function(t){return e.editPlayerPools(o.id,s.id,(s.playerPools||{})[1],t)}})})]})})),er=Oe.c.div.withConfig({displayName:"ReportScoreClickable__Wrapper",componentId:"sc-1a7kjaz-0"})(["display:flex;justify-content:center;padding:0.5rem;"]),tr=Oe.c.div.withConfig({displayName:"ReportScoreClickable__Container",componentId:"sc-1a7kjaz-1"})(["display:flex;justify-content:space-between;border-radius:0.75rem;padding:0.5rem 1.35rem 0.5rem 1.5rem;background:",";box-shadow:0 3px 6px rgba(0,0,0,0.08),0 0 60px -16px rgba(0,0,0,0.08);cursor:pointer;font-size:",";width:300px;max-width:100%;.label{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding-right:0.75rem;}.arrow{display:flex;align-items:center;color:",";font-size:",";}&:hover{transform:translateY(-1px);}"],(function(e){return e.theme.colors.whites[0]}),(function(e){var t=e.fontSize;return t?t+"rem":"1rem"}),(function(e){return e.theme.colors.primary}),(function(e){var t=e.fontSize;return t?.8*t+"rem":"0.8rem"})),nr=function(e){return Object(Ce.jsx)(er,{className:e.className||"",children:Object(Ce.jsxs)(tr,{onClick:e.onClick,fontSize:e.fontSize,className:"clickable-container",children:[Object(Ce.jsx)("div",{className:"label",children:e.label}),Object(Ce.jsx)("div",{className:"arrow",children:Object(Ce.jsx)("i",{className:"fas fa-long-arrow-alt-right"})})]})})},ar=Oe.c.div.withConfig({displayName:"ReportScoreRound__Container",componentId:"sc-uwsne8-0"})([".title{text-align:center;margin-bottom:0.5rem;}.subtitle{text-align:center;color:",";margin-bottom:1.25rem;}"],(function(e){return e.theme.colors.primary})),rr=function(e){var t=Object(xe.useMemo)((function(){for(var t=!0,n=1,a=function(){var a=n;e.matches.find((function(e){return e.round===a&&!!e.team1&&!!e.team2}))?n++:t=!1};!0===t;)a();for(var r=[],i=1;i<=n-1;i++)r.push(i);return r}),[e.matches]);return 1===t.length&&e.setRound(t[0]),Object(Ce.jsxs)(ar,{children:[Object(Ce.jsx)("h1",{className:"title",children:"Report a score"}),Object(Ce.jsx)("h5",{className:"subtitle",children:"Select a round"}),t.map((function(n){return Object(Ce.jsx)(nr,{label:"Round "+n,onClick:function(){return e.setRound(n)},fontSize:Math.round(100*(1.25+1/Math.min(t.length,5)))/100},n)}))]})},ir=Oe.c.div.withConfig({displayName:"ReportScorePool__Container",componentId:"sc-1ecrgnv-0"})([".title{text-align:center;margin-bottom:0.5rem;}.subtitle{text-align:center;color:",";margin-bottom:1.25rem;}"],(function(e){return e.theme.colors.primary})),or=function(e){for(var t=[],n=1;n<=e.numberOfPools;n++)t.push(n);return Object(Ce.jsxs)(ir,{children:[Object(Ce.jsxs)("h1",{className:"title",children:["Round ",e.round]}),Object(Ce.jsx)("h5",{className:"subtitle",children:"Select a court"}),t.map((function(n){return Object(Ce.jsx)(nr,{label:Bn(n),onClick:function(){return e.setPoolNumber(n)},fontSize:Math.round(100*(1.25+1/Math.min(t.length,5)))/100},n)}))]})},sr=Oe.c.div.withConfig({displayName:"ReportScoreTeammate__Container",componentId:"sc-ver8jx-0"})(["text-align:center;.title{text-align:center;margin-bottom:0.5rem;}.subtitle{text-align:center;color:",";margin-bottom:1.25rem;}"],(function(e){return e.theme.colors.primary})),cr=Object(Oe.c)(nr).withConfig({displayName:"ReportScoreTeammate__StyledReportScoreClickable",componentId:"sc-ver8jx-1"})([".clickable-container{width:400px;}"]),lr=function(e){var t=e.poolLeaguePlayers,n=e.poolNumber,a=e.round;return Object(Ce.jsxs)(sr,{children:[n&&Object(Ce.jsxs)("h1",{className:"title",children:["Pool ",n]}),!n&&a&&Object(Ce.jsxs)("h1",{className:"title",children:["Round ",a]}),Object(Ce.jsx)("h5",{className:"subtitle",children:e.title}),t.map((function(t){return Object(Ce.jsx)(cr,{label:t.player.displayName,onClick:function(){return e.setTeammate(t.id)},fontSize:1.58},t.id)}))]})},dr=Oe.c.div.withConfig({displayName:"ReportScoreMatches__Container",componentId:"sc-1nser7h-0"})(["text-align:center;.title{text-align:center;margin-bottom:1.5rem;}.match-wrapper{display:flex;justify-content:center;padding:0.75rem;}.confrontation-number{font-weight:600;text-align:center;font-size:1.25rem;}.button-wrapper{display:inline-block;margin-top:2rem;}"]),ur=Object(Oe.c)(fn.a).withConfig({displayName:"ReportScoreMatches__StyledMatchContainer",componentId:"sc-1nser7h-1"})(["box-shadow:0 3px 6px rgba(0,0,0,0.08),0 0 60px -16px rgba(0,0,0,0.08);width:100%;max-width:500px;text-align:left;cursor:inherit;"]),mr=Oe.c.div.withConfig({displayName:"ReportScoreMatches__ErrorWarning",componentId:"sc-1nser7h-2"})(["font-weight:600;color:",";margin-top:0.5em;.icon{margin-right:0.5rem;}"],(function(e){return e.theme.colors.danger})),br=function(e){var t=Object(xe.useState)(e.matches.map((function(e){return Object(ce.a)(Object(ce.a)({},e),{},{games:e.games.map((function(e){return Object(ce.a)({},e)}))})}))),n=Object(ne.a)(t,2),a=n[0],r=n[1],i=Object(xe.useState)(void 0),o=Object(ne.a)(i,2),s=o[0],c=o[1],l=function(e,t,n,i){var o=1===n?"team1Score":"team2Score",s=1===n?"team2Score":"team1Score",c=Object(Ue.a)(a);c[e].games[t]=Object(ce.a)(Object(ce.a)({},c[e].games[t]),{},Object(te.a)({},o,i?parseInt(i):null)),null===c[e].games[t][o]&&null===c[e].games[t][s]&&c[e].games.splice(t,1);var l=Un(c[e]);c[e].winner=l,r(c)};return Object(Ce.jsxs)(dr,{children:[Object(Ce.jsx)("h1",{className:"title",children:"Report score"}),a.map((function(t,n){for(var a=Dn(t,{},e.leaguePlayers||{}),r=An(t,{},e.leaguePlayers||{}),i=[],o=0;o<e.matches[n].numberOfGames;o++)i.push(Object(Ce.jsx)(yn.a,{matchNumber:t.matchNumber,canEdit:!0,editMode:!0,setEditMode:function(){},values:t.games[o],gameIndex:o,handleChange:function(e,t,a){return l(n,e,t,a)},submitScores:function(){}},o));return Object(Ce.jsxs)(ye.a.Fragment,{children:[e.matches.length>1&&Object(Ce.jsxs)("div",{className:"confrontation-number",children:["Match ",n+1]}),Object(Ce.jsx)("div",{className:"match-wrapper",children:Object(Ce.jsxs)(ur,{editMode:!1,canEdit:!0,children:[Object(Ce.jsx)(On.a,{loading:!!t.saving,children:Object(Ce.jsxs)("div",{className:"wrapper",children:[Object(Ce.jsx)("div",{className:"match-number",children:t.matchNumber}),Object(Ce.jsxs)("div",{className:"subtitle",children:["Court ",t.courtNumber]})]})}),Object(Ce.jsxs)(fn.b,{children:[Object(Ce.jsx)("div",{className:1===t.winner?"winner":"",children:a}),Object(Ce.jsx)("div",{className:2===t.winner?"winner":"",children:r})]}),Object(Ce.jsxs)(xn.a,{winner:t.winner,children:[Object(Ce.jsxs)("i",{children:[Object(Ce.jsx)("div",{className:"team-1-caret",children:Object(Ce.jsx)("i",{className:"fas fa-caret-right"})}),Object(Ce.jsx)("i",{className:"team-2-caret",children:Object(Ce.jsx)("i",{className:"fas fa-caret-right"})})]}),i]})]})},t.id)]},t.id)})),s&&Object(Ce.jsxs)(mr,{children:[Object(Ce.jsx)("i",{className:"fas fa-exclamation-circle icon"}),s]}),Object(Ce.jsx)("div",{className:"button-wrapper",children:Object(Ce.jsxs)(ot.a,{theme:"success",size:"lg",onClick:function(){a.every((function(e){return e.games.every((function(e){return!(!e.team1Score&&0!==e.team1Score&&e.team2Score||!e.team2Score&&0!==e.team2Score&&e.team1Score)}))}))?e.reportScores(e.matches,a):c("You must provide a score for both teams.")},loading:e.reportingScores,children:["Save score",e.matches.length>1&&"s"]})})]})},pr=Oe.c.div.withConfig({displayName:"ReportScoreSuccess__Container",componentId:"sc-fxbvmz-0"})(["min-height:calc(100vh - 9rem - 80px);display:flex;flex-direction:column;justify-content:space-between;text-align:center;.title{text-align:center;margin-bottom:0.5rem;}.subtitle{color:",";}.success-message{font-size:1.4rem;.icon{font-size:8rem;color:",";margin-bottom:1rem;margin-top:1rem;}}.buttons-container{display:flex;justify-content:center;margin-bottom:0.5rem;button{margin:0rem 0.5rem 0.5rem;font-size:1.25rem;}.icon{margin-right:0.75rem;}}"],(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.primary})),gr=function(e){return Object(Ce.jsxs)(pr,{children:[Object(Ce.jsx)("h1",{className:"title",children:"Report Score"}),Object(Ce.jsxs)("div",{className:"success-message",children:[Object(Ce.jsx)("h3",{className:"subtitle",children:"Success!"}),Object(Ce.jsx)("i",{className:"fas fa-check icon"}),Object(Ce.jsx)("p",{children:"Your score was succesfully saved."})]}),Object(Ce.jsxs)("div",{className:"buttons-container",children:[Object(Ce.jsxs)(ot.a,{theme:"primary",size:"lg",onClick:e.reset,children:[Object(Ce.jsx)("i",{className:"fas fa-angle-left icon"}),"Report another score"]}),Object(Ce.jsx)(ot.a,{size:"lg",onClick:e.closeModal,children:"Close"})]})]})},jr=function(e){var t=e.matches,n=e.leaguePlayers,a=e.userFromAuth,r=e.canReportAnyScore?"anyScore":"myScore",i=Object.values(n||{}).find((function(e){return a&&e.player.uid===a.uid})),o=Object(xe.useState)(void 0),s=Object(ne.a)(o,2),c=s[0],l=s[1],d=Object(xe.useState)(void 0),u=Object(ne.a)(d,2),m=u[0],b=u[1],p=Object(xe.useState)(void 0),g=Object(ne.a)(p,2),j=g[0],h=g[1],f=Object(xe.useState)(!1),O=Object(ne.a)(f,2),x=O[0],y=O[1],v=Object(Nn.a)(e.reportingScores);Object(xe.useEffect)((function(){e.reportingScores||!v||e.reportScoresError||y(!0)}),[e.reportingScores,e.reportScoresError,v]),Object(xe.useEffect)((function(){a&&"myScore"===r&&t.some((function(e){return!!zn(a.uid,e,{},n||{})&&(b(e.courtNumber),!0)}))}),[a,r,n,t,c]);var w=Object(xe.useMemo)((function(){for(var t=!0,n=1,a=function(){var a=n;e.matches.find((function(e){return"courtNumber"in e&&e.courtNumber===a&&!!e.team1&&!!e.team2}))?n++:t=!1};!0===t;)a();return n-1===1&&b(1),n-1}),[e.matches]),S=Object(xe.useMemo)((function(){if(a&&c&&m&&n&&"myScore"===r){var e=[];return t.some((function(t){return t.round===c&&t.courtNumber===m&&[t.team1,t.team2].forEach((function(t){t&&t.leaguePlayers&&t.leaguePlayers.forEach((function(t){n[t]&&n[t].player.uid!==a.uid&&e.push(n[t])}))})),3===e.length})),e}}),[c,m,t,n,r,a]),T=Object(xe.useMemo)((function(){if(c&&m&&("anyScore"===r||j&&i)){if("anyScore"===r)return t.filter((function(e){return e.round===c&&e.courtNumber===m}));if(j&&i)return t.filter((function(e){return e.round===c&&e.courtNumber===m&&(e.team1&&e.team1.leaguePlayers.includes(i.id)&&e.team1.leaguePlayers.includes(j)||e.team2&&e.team2.leaguePlayers.includes(i.id)&&e.team2.leaguePlayers.includes(j))}))}}),[t,c,m,j,r,i]);return c?m?c&&m&&S&&!j?Object(Ce.jsx)(lr,{poolLeaguePlayers:S,poolNumber:m,round:c,setTeammate:h,title:"Who did you play with?"}):x?Object(Ce.jsx)(gr,{reset:function(){l(void 0),b(1===w?1:void 0),h(void 0),y(!1)},closeModal:e.closeModal}):T?Object(Ce.jsx)(br,{matches:T,leaguePlayers:n||{},reportScores:e.reportScores,reportingScores:e.reportingScores}):Object(Ce.jsx)("h1",{children:"Report Score"}):Object(Ce.jsx)(or,{round:c,numberOfPools:w,setPoolNumber:b}):Object(Ce.jsx)(rr,{matches:t,setRound:l})},hr=["isOpen","setIsOpen"],fr=Object(Oe.c)(ht.a).withConfig({displayName:"ReportScoreModal__StyledModal",componentId:"sc-ow7eiw-0"})(["min-height:calc(100vh - 6rem - 80px);padding:1.5rem 0.5rem;"]),Or=function(e){e.isOpen;var t=e.setIsOpen,n=Object(sn.a)(e,hr);return Object(Ce.jsx)(fr,{isOpen:e.isOpen,onRequestClose:function(){return e.setIsOpen(!1)},width:"750px",children:Object(Ce.jsx)(jr,Object(ce.a)(Object(ce.a)({},n),{},{closeModal:function(){return t(!1)}}))})},xr={teamPoolPlay:a,playerKOTC:r};t.a=xr},965:function(e,t,n){"use strict";n.d(t,"b",(function(){return j})),n.d(t,"h",(function(){return h})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return O})),n.d(t,"i",(function(){return x})),n.d(t,"j",(function(){return y})),n.d(t,"a",(function(){return v})),n.d(t,"m",(function(){return w})),n.d(t,"f",(function(){return S})),n.d(t,"e",(function(){return T})),n.d(t,"g",(function(){return N})),n.d(t,"k",(function(){return C})),n.d(t,"l",(function(){return P}));var a=n(21),r=n(20),i=n(5),o=n(7),s=n(1),c=n(11),l=n(1065),d=n(18),u=(n(98),n(160),n(27)),m=n(40),b=n.n(m),p=n(962),g=["leagueID"],j=function(e,t,n){return function(){var a=Object(c.a)(Object(o.a)().mark((function a(r){var m,g,j,h,f,O,x,y,v,w,S,T;return Object(o.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r(Object(l.a)("CREATE_LEAGUE_REQUEST")(!0)),m=d.a.auth().currentUser,g=m?m.uid:null,m&&g){a.next=5;break}throw new Error;case 5:return j=d.a.firestore(),h=j.collection("leagues").doc(),f=h.collection("private").doc("roles"),O=j.collection("urls").doc(e.url),x=j.collection("users").doc(g),a.prev=10,a.next=13,j.runTransaction(function(){var n=Object(c.a)(Object(o.a)().mark((function n(a){return Object(o.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.get(O);case 2:if(!n.sent.exists){n.next=5;break}return n.abrupt("return",!1);case 5:return a.set(O,{type:"league",id:h.id,ref:h}),a.set(h,{name:e.name,url:e.url,createdBy:g,createdAt:d.a.firestore.FieldValue.serverTimestamp(),description:e.description,location:e.location&&e.location.address?e.location:null,registration:{closingDate:d.a.firestore.Timestamp.fromDate(b()(e.registration.closingDate).toDate()),player:Object(s.a)(Object(s.a)({},e.registration.player),{},{cost:parseFloat(e.registration.player.cost||"0")}),team:Object(s.a)(Object(s.a)({},e.registration.team),{},{cost:parseFloat(e.registration.team.cost||"0")})},permissions:{isPublic:!0,sessionsArePublic:!1,participantsArePublic:!0,canReportOwnScore:!0,canReportAnyScore:!1},playerCount:1,teamCount:0,format:p.a.teamPoolPlay.defaultValues}),a.set(f,{all:[g],admins:[g],moderators:[],editors:[]}),a.set(h.collection("leaguePlayers").doc(),{player:{uid:g,displayName:t.displayName||"",photoURL:t.photoURL||""},registeredBy:g,registeredAt:d.a.firestore.FieldValue.serverTimestamp()}),a.update(x,{leagues:d.a.firestore.FieldValue.arrayUnion(h.id)}),n.abrupt("return",!0);case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());case 13:if(!1!==a.sent){a.next=16;break}throw Error("Sorry, the url you chose is not available anymore.");case 16:return a.next=18,Promise.all([h.get(),h.collection("private").doc("roles").get()]);case 18:y=a.sent,v=Object(i.a)(y,2),w=v[0],S=v[1],T=Object(s.a)(Object(s.a)({},w.data()),{},{id:w.id,roles:S.data(),leaguePlayers:{},leagueTeams:{}}),r(Object(l.a)("CREATE_LEAGUE_SUCCESS")(T)),n&&n(),a.next=31;break;case 27:a.prev=27,a.t0=a.catch(10),r(Object(l.a)("CREATE_LEAGUE_REQUEST")(!1)),Object(u.a)("Sorry, a problem occured while trying to save your league. Please try again or contact an administrator.");case 31:case"end":return a.stop()}}),a,null,[[10,27]])})));return function(e){return a.apply(this,arguments)}}()},h=function(e,t){return function(){var n=Object(c.a)(Object(o.a)().mark((function n(a){var r,c,m,b,p,g;return Object(o.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(Object(l.a)("GET_LEAGUE_REQUEST")(!0)),n.prev=1,n.next=4,d.a.firestore().collection("leagues").doc(e);case 4:return r=n.sent,n.next=7,Promise.all([r.get(),r.collection("private").doc("roles").get()]);case 7:c=n.sent,m=Object(i.a)(c,2),b=m[0],p=m[1],g=Object(s.a)(Object(s.a)({},b.data()),{},{id:b.id,roles:p.data()}),a(Object(l.a)("GET_LEAGUE_SUCCESS")(g)),n.next=20;break;case 15:n.prev=15,n.t0=n.catch(1),a(Object(l.a)("GET_LEAGUE_REQUEST")(!1)),Object(u.a)("The resource you are trying to access does not exist or is not public."),t&&t();case 20:case"end":return n.stop()}}),n,null,[[1,15]])})));return function(e){return n.apply(this,arguments)}}()},f=function(e,t){return function(){var n=Object(c.a)(Object(o.a)().mark((function n(a){var r,i,s;return Object(o.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a(Object(l.a)("EDIT_LEAGUE_REQUEST")(!0)),r=d.a.auth().currentUser,r?r.uid:null){n.next=5;break}throw new Error;case 5:return i=d.a.firestore(),s=i.collection("leagues").doc(e.leagueID),n.prev=7,n.next=10,s.update({name:e.name,location:e.location||null,description:e.description||""});case 10:a(Object(l.a)("EDIT_LEAGUE_SUCCESS")(e)),Object(u.b)("Changes were succesfully saved!"),t&&t(),n.next=19;break;case 15:n.prev=15,n.t0=n.catch(7),a(Object(l.a)("EDIT_LEAGUE_REQUEST")(!1)),Object(u.a)("Sorry, a problem occured while trying to edit your league. Please try again or contact an administrator.");case 19:case"end":return n.stop()}}),n,null,[[7,15]])})));return function(e){return n.apply(this,arguments)}}()},O=function(e,t){return function(){var n=Object(c.a)(Object(o.a)().mark((function n(a){var i,s,c,m,b;return Object(o.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a(Object(l.a)("EDIT_LEAGUE_PERMISSIONS_REQUEST")(!0)),i=d.a.auth().currentUser,i?i.uid:null){n.next=5;break}throw new Error;case 5:return s=e.leagueID,c=Object(r.a)(e,g),m=d.a.firestore(),b=m.collection("leagues").doc(s),n.prev=8,n.next=11,b.update({permissions:c});case 11:a(Object(l.a)("EDIT_LEAGUE_PERMISSIONS_SUCCESS")(c)),Object(u.b)("Changes were succesfully saved!"),t&&t(),n.next=20;break;case 16:n.prev=16,n.t0=n.catch(8),a(Object(l.a)("EDIT_LEAGUE_PERMISSIONS_REQUEST")(!1)),Object(u.a)("Sorry, a problem occured while trying to edit your league. Please try again or contact an administrator.");case 20:case"end":return n.stop()}}),n,null,[[8,16]])})));return function(e){return n.apply(this,arguments)}}()},x=function(e){return function(){var t=Object(c.a)(Object(o.a)().mark((function t(n){var a,r,i,c;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Object(l.a)("GET_LEAGUE_PLAYERS_REQUEST")(!0)),a=d.a.firestore(),r=a.collection("leagues").doc(e),t.prev=3,t.next=6,r.collection("leaguePlayers").get();case 6:i=t.sent,c={},i.forEach((function(e){c[e.id]=Object(s.a)(Object(s.a)({},e.data()),{},{id:e.id})})),n(Object(l.a)("GET_LEAGUE_PLAYERS_SUCCESS")(c)),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(3),n(Object(l.a)("GET_LEAGUE_PLAYERS_REQUEST")(!1)),Object(u.a)("Sorry, a problem occured while trying to retrieve players of the league.");case 16:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(e){return t.apply(this,arguments)}}()},y=function(e){return function(){var t=Object(c.a)(Object(o.a)().mark((function t(n){var a,r,i,c;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Object(l.a)("GET_LEAGUE_TEAMS_REQUEST")(!0)),a=d.a.firestore(),r=a.collection("leagues").doc(e),t.prev=3,t.next=6,r.collection("leagueTeams").get();case 6:i=t.sent,c={},i.forEach((function(e){c[e.id]=Object(s.a)(Object(s.a)({},e.data()),{},{id:e.id})})),n(Object(l.a)("GET_LEAGUE_TEAMS_SUCCESS")(c)),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(3),n(Object(l.a)("GET_LEAGUE_TEAMS_REQUEST")(!1)),Object(u.a)("Sorry, a problem occured while trying to retrieve teams of the league.");case 16:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(e){return t.apply(this,arguments)}}()},v=function(e,t,n){return function(){var r=Object(c.a)(Object(o.a)().mark((function r(i){return Object(o.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i(Object(l.a)("ADD_ROLE_REQUEST")(!0)),r.prev=1,r.next=4,d.a.firestore().collection("leagues").doc(e).collection("private").doc("roles").update(Object(a.a)({all:d.a.firestore.FieldValue.arrayUnion(t),admins:d.a.firestore.FieldValue.arrayRemove(t),moderators:d.a.firestore.FieldValue.arrayRemove(t),editors:d.a.firestore.FieldValue.arrayRemove(t)},n,d.a.firestore.FieldValue.arrayUnion(t)));case 4:i(Object(l.a)("ADD_ROLE_SUCCESS")({uid:t,role:n})),r.next=11;break;case 7:r.prev=7,r.t0=r.catch(1),i(Object(l.a)("ADD_ROLE_REQUEST")(!1)),Object(u.a)("Sorry, a problem occured while trying to edit permissions. Please try again or contact an administrator.");case 11:case"end":return r.stop()}}),r,null,[[1,7]])})));return function(e){return r.apply(this,arguments)}}()},w=function(e,t,n){return function(){var r=Object(c.a)(Object(o.a)().mark((function r(i){return Object(o.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i(Object(l.a)("ADD_ROLE_REQUEST")(!0)),r.prev=1,r.next=4,d.a.firestore().collection("leagues").doc(e).collection("private").doc("roles").update(Object(a.a)({all:d.a.firestore.FieldValue.arrayRemove(t)},n,d.a.firestore.FieldValue.arrayRemove(t)));case 4:i(Object(l.a)("REMOVE_ROLE_SUCCESS")({uid:t,role:n})),r.next=11;break;case 7:r.prev=7,r.t0=r.catch(1),i(Object(l.a)("ADD_ROLE_REQUEST")(!1)),Object(u.a)("Sorry, a problem occured while trying to edit permissions. Please try again or contact an administrator.");case 11:case"end":return r.stop()}}),r,null,[[1,7]])})));return function(e){return r.apply(this,arguments)}}()},S=function(e,t){return function(){var n=Object(c.a)(Object(o.a)().mark((function n(a){var r,i,s,c;return Object(o.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(Object(l.a)("EDIT_REGISTRATION_SETTINGS_REQUEST")(!0)),r=d.a.firestore(),i=r.collection("leagues").doc(e),n.prev=3,n.next=6,i.update({"registration.closingDate":d.a.firestore.Timestamp.fromDate(t.closingDate.toDate())});case 6:return n.next=8,i.get();case 8:s=n.sent,c=s.data(),a(Object(l.a)("EDIT_REGISTRATION_SETTINGS_SUCCESS")(c.registration)),Object(u.b)("Changes were succesfully saved!"),n.next=18;break;case 14:n.prev=14,n.t0=n.catch(3),a(Object(l.a)("EDIT_REGISTRATION_SETTINGS_REQUEST")(!1)),Object(u.a)("Sorry, a problem occured while trying to edit your league. Please try again or contact an administrator.");case 18:case"end":return n.stop()}}),n,null,[[3,14]])})));return function(e){return n.apply(this,arguments)}}()},T=function(e,t){return function(){var n=Object(c.a)(Object(o.a)().mark((function n(a){var r,i,s,c;return Object(o.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(Object(l.a)("EDIT_PLAYER_REGISTRATION_REQUEST")(!0)),r=d.a.firestore(),i=r.collection("leagues").doc(e),n.prev=3,n.next=6,i.update({"registration.player":t});case 6:return n.next=8,i.get();case 8:s=n.sent,c=s.data(),a(Object(l.a)("EDIT_PLAYER_REGISTRATION_SUCCESS")(c.registration.player)),Object(u.b)("Changes were succesfully saved!"),n.next=18;break;case 14:n.prev=14,n.t0=n.catch(3),a(Object(l.a)("EDIT_PLAYER_REGISTRATION_REQUEST")(!1)),Object(u.a)("Sorry, a problem occured while trying to save your changes. Please try again or contact an administrator.");case 18:case"end":return n.stop()}}),n,null,[[3,14]])})));return function(e){return n.apply(this,arguments)}}()},N=function(e,t){return function(){var n=Object(c.a)(Object(o.a)().mark((function n(a){var r,i,s,c;return Object(o.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(Object(l.a)("EDIT_TEAM_REGISTRATION_REQUEST")(!0)),r=d.a.firestore(),i=r.collection("leagues").doc(e),n.prev=3,n.next=6,i.update({"registration.team":t});case 6:return n.next=8,i.get();case 8:s=n.sent,c=s.data(),a(Object(l.a)("EDIT_TEAM_REGISTRATION_SUCCESS")(c.registration.team)),Object(u.b)("Changes were succesfully saved!"),n.next=18;break;case 14:n.prev=14,n.t0=n.catch(3),a(Object(l.a)("EDIT_TEAM_REGISTRATION_REQUEST")(!1)),Object(u.a)("Sorry, a problem occured while trying to save your changes. Please try again or contact an administrator.");case 18:case"end":return n.stop()}}),n,null,[[3,14]])})));return function(e){return n.apply(this,arguments)}}()},C=function(e){return function(){var t=Object(c.a)(Object(o.a)().mark((function t(n){var a,r,i,s;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Object(l.a)("GET_REGISTRATIONS_REQUEST")(!0)),a=d.a.firestore(),r=a.collection("leagues").doc(e),t.prev=3,t.next=6,r.collection("registrations").orderBy("registeredAt","desc").get();case 6:i=t.sent,s=[],i.forEach((function(e){s.push(e.data())})),n(Object(l.a)("GET_REGISTRATIONS_SUCCESS")(s)),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(3),n(Object(l.a)("GET_REGISTRATIONS_REQUEST")(!1)),Object(u.a)("Sorry, a problem occured while trying to retrieve registrations data.");case 16:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(e){return t.apply(this,arguments)}}()},P=function(e,t){return function(){var e=Object(c.a)(Object(o.a)().mark((function e(t){var n,a;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t(Object(l.a)("LEAGUE_REGISTER_REQUEST")(!0)),n=d.a.auth().currentUser,n?n.uid:null){e.next=5;break}throw new Error;case 5:throw e.prev=5,Error();case 9:e.prev=9,e.t0=e.catch(5),a="Sorry, an error occured while trying to submit your registration. Please contact an administrator if it repeats.",e.t0.response&&e.t0.response.data&&(a=e.t0.response.data),Object(u.a)(a),t(Object(l.a)("LEAGUE_REGISTER_REQUEST")(!1));case 15:case"end":return e.stop()}}),e,null,[[5,9]])})));return function(t){return e.apply(this,arguments)}}()}},977:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(2),r=n.n(a),i=n(163),o=n(0),s=r.a.createContext({width:80,expandedWidth:200});s.Consumer;t.b=function(e){var t=Object(i.a)(["xl"],[80],70);return Object(o.jsx)(s.Provider,{value:{width:t,expandedWidth:230},children:e.children})}}}]);